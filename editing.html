<!DOCTYPE html>
<html lang="en"><head>
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
  <title>HTML 5.1: User interaction</title>
  <meta content="width=device-width, initial-scale=1" name="viewport">
  <meta content="WD" name="w3c-status">
  <link href="../default.css" rel="stylesheet" type="text/css">
  <link href="../csslogo.ico" rel="shortcut icon" type="image/x-icon">
  <link href="styles/styles-html.css" rel="stylesheet" type="text/css">
  <link href="https://www.w3.org/StyleSheets/TR/W3C-WD" rel="stylesheet" type="text/css">
  <meta content="Bikeshed 1.0.0" name="generator">
<style>.highlight .hll { background-color: #ffffcc }
.highlight  { background: #ffffff; }
.highlight .c { color: #708090 } /* Comment */
.highlight .k { color: #990055 } /* Keyword */
.highlight .l { color: #000000 } /* Literal */
.highlight .n { color: #0077aa } /* Name */
.highlight .o { color: #999999 } /* Operator */
.highlight .p { color: #999999 } /* Punctuation */
.highlight .cm { color: #708090 } /* Comment.Multiline */
.highlight .cp { color: #708090 } /* Comment.Preproc */
.highlight .c1 { color: #708090 } /* Comment.Single */
.highlight .cs { color: #708090 } /* Comment.Special */
.highlight .kc { color: #990055 } /* Keyword.Constant */
.highlight .kd { color: #990055 } /* Keyword.Declaration */
.highlight .kn { color: #990055 } /* Keyword.Namespace */
.highlight .kp { color: #990055 } /* Keyword.Pseudo */
.highlight .kr { color: #990055 } /* Keyword.Reserved */
.highlight .kt { color: #990055 } /* Keyword.Type */
.highlight .ld { color: #000000 } /* Literal.Date */
.highlight .m { color: #000000 } /* Literal.Number */
.highlight .s { color: #a67f59 } /* Literal.String */
.highlight .na { color: #0077aa } /* Name.Attribute */
.highlight .nc { color: #0077aa } /* Name.Class */
.highlight .no { color: #0077aa } /* Name.Constant */
.highlight .nd { color: #0077aa } /* Name.Decorator */
.highlight .ni { color: #0077aa } /* Name.Entity */
.highlight .ne { color: #0077aa } /* Name.Exception */
.highlight .nf { color: #0077aa } /* Name.Function */
.highlight .nl { color: #0077aa } /* Name.Label */
.highlight .nn { color: #0077aa } /* Name.Namespace */
.highlight .py { color: #0077aa } /* Name.Property */
.highlight .nt { color: #669900 } /* Name.Tag */
.highlight .nv { color: #0077aa } /* Name.Variable */
.highlight .ow { color: #999999 } /* Operator.Word */
.highlight .mb { color: #000000 } /* Literal.Number.Bin */
.highlight .mf { color: #000000 } /* Literal.Number.Float */
.highlight .mh { color: #000000 } /* Literal.Number.Hex */
.highlight .mi { color: #000000 } /* Literal.Number.Integer */
.highlight .mo { color: #000000 } /* Literal.Number.Oct */
.highlight .sb { color: #a67f59 } /* Literal.String.Backtick */
.highlight .sc { color: #a67f59 } /* Literal.String.Char */
.highlight .sd { color: #a67f59 } /* Literal.String.Doc */
.highlight .s2 { color: #a67f59 } /* Literal.String.Double */
.highlight .se { color: #a67f59 } /* Literal.String.Escape */
.highlight .sh { color: #a67f59 } /* Literal.String.Heredoc */
.highlight .si { color: #a67f59 } /* Literal.String.Interpol */
.highlight .sx { color: #a67f59 } /* Literal.String.Other */
.highlight .sr { color: #a67f59 } /* Literal.String.Regex */
.highlight .s1 { color: #a67f59 } /* Literal.String.Single */
.highlight .ss { color: #a67f59 } /* Literal.String.Symbol */
.highlight .vc { color: #0077aa } /* Name.Variable.Class */
.highlight .vg { color: #0077aa } /* Name.Variable.Global */
.highlight .vi { color: #0077aa } /* Name.Variable.Instance */
.highlight .il { color: #000000 } /* Literal.Number.Integer.Long */
        .highlight { background: hsl(24, 20%, 95%); }
        code.highlight { padding: .1em; border-radius: .3em; }
        pre.highlight, pre > code.highlight { display: block; padding: 1em; margin: .5em 0; overflow: auto; border-radius: 0; }
        </style>
 </head>
 <body class="h-entry">
  <div class="head">
   <header>
    <p data-fill-with="logo"><a href="http://www.w3.org/"><img alt="W3C" height="48" src="https://www.w3.org/Icons/w3c_home" width="72"></a></p>
    <h1 class="p-name no-ref allcaps" id="title">HTML 5.1</h1>
    <h2 class="no-num no-toc no-ref heading settled" id="subtitle"><span class="content">W3C Working Draft, <time class="dt-updated" datetime="2016-01-20">20 January 2016</time></span></h2>
   </header>
   
   
   
   
  </div>
  
  
  
  
  
  <nav class="prev_next"> — ← <a href="semantics.html#semantics"><span class="secno">4</span> <span class="content">The elements of HTML</span></a> — <a href="index.html#contents">Table of contents</a> →<a href="browsers.html#browsers"><span class="secno">6</span> <span class="content">Loading Web pages</span></a></nav><nav data-fill-with="table-of-contents" id="toc">
   <h2 class="no-num no-toc no-ref" id="contents">Table of Contents</h2>
   <ol class="toc" role="directory">
    <li>
     <a href="editing.html#editing"><span class="secno">5</span> <span class="content">User interaction</span></a>
     <ol class="toc">
      <li><a href="editing.html#the-hidden-attribute"><span class="secno">5.1</span> <span class="content">The <span><code>hidden</code></span> attribute</span></a>
      </li><li><a href="editing.html#inert-subtrees"><span class="secno">5.2</span> <span class="content">Inert subtrees</span></a>
      </li><li><a href="editing.html#activation"><span class="secno">5.3</span> <span class="content">Activation</span></a>
      </li><li>
       <a href="editing.html#focus"><span class="secno">5.4</span> <span class="content">Focus</span></a>
       <ol class="toc">
        <li><a href="editing.html#focus-introduction"><span class="secno">5.4.1</span> <span class="content">Introduction</span></a>
        </li><li><a href="editing.html#data-model"><span class="secno">5.4.2</span> <span class="content">Data model</span></a>
        </li><li><a href="editing.html#the-tabindex-attribute"><span class="secno">5.4.3</span> <span class="content">The <code>tabindex</code> attribute</span></a>
        </li><li><a href="editing.html#focus-processing-model"><span class="secno">5.4.4</span> <span class="content">Processing model</span></a>
        </li><li><a href="editing.html#sec-sequential-focus-navigation"><span class="secno">5.4.5</span> <span class="content">Sequential focus navigation</span></a>
        </li><li><a href="editing.html#focus-management-apis"><span class="secno">5.4.6</span> <span class="content">Focus management APIs</span></a>
       </li></ol>
      </li><li>
       <a href="editing.html#assigning-keyboard-shortcuts"><span class="secno">5.5</span> <span class="content">Assigning keyboard shortcuts</span></a>
       <ol class="toc">
        <li><a href="editing.html#assigning-keyboard-shortcuts-introduction"><span class="secno">5.5.1</span> <span class="content">Introduction</span></a>
        </li><li><a href="editing.html#the-accesskey-attribute"><span class="secno">5.5.2</span> <span class="content">The <span><code>accesskey</code></span> attribute</span></a>
        </li><li><a href="editing.html#assigning-keyboard-shortcuts-processing-model"><span class="secno">5.5.3</span> <span class="content">Processing model</span></a>
       </li></ol>
      </li><li>
       <a href="editing.html#user-interaction-editing"><span class="secno">5.6</span> <span class="content">Editing</span></a>
       <ol class="toc">
        <li><a href="editing.html#making-document-regions-editable-the-contenteditable-content-attribute"><span class="secno">5.6.1</span> <span class="content">Making document regions editable: The <code>contenteditable</code> content attribute</span></a>
        </li><li><a href="editing.html#making-entire-documents-editable-the-designmode-idl-attribute"><span class="secno">5.6.2</span> <span class="content">Making entire documents editable: The <code>designMode</code> IDL attribute</span></a>
        </li><li><a href="editing.html#best-practices-for-in-page-editors"><span class="secno">5.6.3</span> <span class="content">Best practices for in-page editors</span></a>
        </li><li><a href="editing.html#editing-apis"><span class="secno">5.6.4</span> <span class="content">Editing APIs</span></a>
        </li><li><a href="editing.html#spelling-and-grammar-checking"><span class="secno">5.6.5</span> <span class="content">Spelling and grammar checking</span></a>
       </li></ol>
      </li><li>
       <a href="editing.html#drag-and-drop"><span class="secno">5.7</span> <span class="content">Drag and drop</span></a>
       <ol class="toc">
        <li><a href="editing.html#drag-and-drop-introduction"><span class="secno">5.7.1</span> <span class="content">Introduction</span></a>
        </li><li><a href="editing.html#the-drag-data-store"><span class="secno">5.7.2</span> <span class="content">The drag data store</span></a>
        </li><li>
         <a href="editing.html#the-datatransfer-interface"><span class="secno">5.7.3</span> <span class="content">The <code>DataTransfer</code> interface</span></a>
         <ol class="toc">
          <li><a href="editing.html#the-datatransferitemlist-interface"><span class="secno">5.7.3.1</span> <span class="content">The <code>DataTransferItemList</code> interface</span></a>
          </li><li><a href="editing.html#the-datatransferitem-interface"><span class="secno">5.7.3.2</span> <span class="content">The <code>DataTransferItem</code> interface</span></a>
         </li></ol>
        </li><li><a href="editing.html#the-dragevent-interface"><span class="secno">5.7.4</span> <span class="content">The <code>DragEvent</code> interface</span></a>
        </li><li><a href="editing.html#drag-and-drop-processing-model"><span class="secno">5.7.5</span> <span class="content">Drag-and-drop processing model</span></a>
        </li><li><a href="editing.html#events-summary"><span class="secno">5.7.6</span> <span class="content">Events summary</span></a>
        </li><li><a href="editing.html#the-draggable-attribute"><span class="secno">5.7.7</span> <span class="content">The <span><code>draggable</code></span> attribute</span></a>
        </li><li><a href="editing.html#the-dropzone-attribute"><span class="secno">5.7.8</span> <span class="content">The <span><code>dropzone</code></span> attribute</span></a>
        </li><li><a href="editing.html#security-risks-in-the-drag-and-drop-model"><span class="secno">5.7.9</span> <span class="content">Security risks in the drag-and-drop model</span></a>
       </li></ol>
     </li></ol>
    </li></ol>
  </nav>
  <main>
   
   
   
   
   <section>
    <h2 class="heading settled" data-level="5" id="editing"><span class="secno">5. </span><span class="content">User interaction</span><a class="self-link" href="editing.html#editing"></a></h2>
    <h3 class="heading settled" data-level="5.1" id="the-hidden-attribute"><span class="secno">5.1. </span><span class="content">The <dfn data-dfn-type="dfn" data-noexport="" id="hidden"><code>hidden</code><a class="self-link" href="editing.html#hidden"></a></dfn> attribute</span><a class="self-link" href="editing.html#the-hidden-attribute"></a></h3>
    <p>All <a data-link-type="dfn" href="infrastructure.html#html-element">html elements</a> may have the <code>hidden</code> content attribute set. The <code>hidden</code> attribute is a <a data-link-type="dfn" href="infrastructure.html#boolean-attribute">boolean attribute</a>. When specified on an element, it
  indicates that the element is not yet, or is no longer, directly relevant to the page’s current
  state, or that it is being used to declare content to be reused by other parts of the page as
  opposed to being directly accessed by the user. <span class="impl">User agents should not render
  elements that have the <code>hidden</code> attribute specified. This requirement may be
  implemented indirectly through the style layer. For example, an HTML+CSS user agent could
  implement these requirements using the rules suggested in <a href="rendering.html#rendering">§10 Rendering</a>.</span></p>
    <p class="note" role="note"> Because this attribute is typically implemented using CSS, it’s also possible to override it
    using CSS. For instance, a rule that applies 'display: block' to all elements will cancel the
    effects of the <code>hidden</code> attribute. Authors therefore have to take care when writing
    their style sheets to make sure that the attribute is still styled as expected. </p>
    <div class="example" id="example-0f32ae7c">
     <a class="self-link" href="editing.html#example-0f32ae7c"></a> In the following skeletal example, the attribute is used to hide the Web game’s main screen
    until the user logs in: 
<pre class="highlight"><span class="nt">&lt;h1&gt;</span>The Example Game<span class="nt">&lt;/h1&gt;</span>
<span class="nt">&lt;section&gt;</span>
  <span class="nt">&lt;h2&gt;</span>Login<span class="nt">&lt;/h2&gt;</span>
  <span class="nt">&lt;form&gt;</span>
  ...
  <span class="c">&lt;!-- calls login() once the user’s credentials have been checked --&gt;</span>
  <span class="nt">&lt;/form&gt;</span>
  <span class="nt">&lt;script&gt;</span>
  <span class="kd">function</span> <span class="nx">login</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// switch screens</span>
    <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'login'</span><span class="p">).</span><span class="nx">hidden</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
    <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'game'</span><span class="p">).</span><span class="nx">hidden</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="nt">&lt;/script&gt;</span>
<span class="nt">&lt;/section&gt;</span>
<span class="nt">&lt;section</span> <span class="na">hidden</span><span class="nt">&gt;</span>
  ...
<span class="nt">&lt;/section&gt;</span></pre>
    </div>
    <p>The <code>hidden</code> attribute must not be used to hide content that
  could legitimately be shown in another presentation. For example, it is incorrect to use <code>hidden</code> to hide panels in a tabbed dialog, because the tabbed interface
  is merely a kind of overflow presentation — one could equally well just show all the form
  controls in one big page with a scrollbar. It is similarly incorrect to use this attribute to hide
  content just from one presentation — if something is marked <code>hidden</code>, it is hidden from all presentations, including, for instance,
  screen readers.</p>
    <p>Elements that are not themselves <code>hidden</code> must not <a data-link-type="dfn" href="semantics.html#hyperlink">hyperlink</a> to elements that are <code>hidden</code>. The <code>for</code> attributes of <code>label</code> and <code><a data-link-type="element" href="semantics.html#elementdef-output">output</a></code> elements that are not
  themselves <code>hidden</code> must similarly not refer to elements that are <code>hidden</code>. In both cases, such references would cause user
  confusion.</p>
    <p>Elements and scripts may, however, refer to elements that are <code>hidden</code> in other contexts.</p>
    <div class="example" id="example-bf0741c4">
     <a class="self-link" href="editing.html#example-bf0741c4"></a> For example, it would be incorrect to use the <code><a data-link-type="element-attr" href="semantics.html#element-attrdef-links-href">href</a></code> attribute to link to a
    section marked with the <code>hidden</code> attribute. If the content is not applicable or relevant, then there
    is no reason to link to it. 
     <p>It would be fine, however, to use the ARIA <code>aria-describedby</code> attribute to
    refer to descriptions that are themselves <code>hidden</code>. While hiding the descriptions
    implies that they are not useful alone, they could be written in
    such a way that they are useful in the specific context of being
    referenced from the images that they describe.</p>
     <p>Similarly, a <code><a data-link-type="element" href="semantics.html#elementdef-canvas">canvas</a></code> element with the <code>hidden</code> attribute could be used by a
    scripted graphics engine as an off-screen buffer, and a form
    control could refer to a hidden <code><a data-link-type="element" href="semantics.html#elementdef-form">form</a></code> element using its <code>form</code> attribute.</p>
    </div>
    <p>Accessibility APIs are encouraged to provide a way to expose
  structured content while marking it as hidden in the default view.
  Such content should not be perceivable to users in the normal document
  flow in any modality, whether using Assistive Technology (AT) or
  mainstream User Agents.</p>
    <p>When such features are available, User Agents may use them to
  expose the full semantics of <code>hidden</code> elements to AT when appropriate, if such content is referenced
  indirectly by an <a data-link-type="dfn" href="http://www.w3.org/TR/dom/#concept-id">ID reference</a> or <a data-link-type="dfn" href="infrastructure.html#valid-hash-name-reference">valid hash-name reference</a>. This allows ATs to access the
  structure of these <code>hidden</code> elements
  upon user request, while keeping the content hidden in all
  presentations of the normal document flow. Authors who wish to prevent
  user-initiated viewing of a <code>hidden</code> element should not reference the element with such a mechanism.</p>
    <p>Because some User Agents have flattened hidden content when
  exposing such content to AT, authors should not reference <code>hidden</code> content which would lose essential
  meaning when flattened.</p>
    <div class="example" id="example-74952907">
     <a class="self-link" href="editing.html#example-74952907"></a> For example, it would be incorrect to use the <code><a data-link-type="element-attr" href="semantics.html#element-attrdef-links-href">href</a></code> attribute to link to a section marked with the <code>hidden</code> attribute.
    If the content is not applicable or relevant, then there is no reason to link to it. 
     <p>It would be fine, however, to use the ARIA <code>aria-describedby</code> attribute to refer to descriptions that are
    themselves <code>hidden</code>. While hiding the descriptions implies that
    they are not useful alone, they could be written in such a way that they are useful in the
    specific context of being referenced from the images that they describe.</p>
     <p>Similarly, a <code><a data-link-type="element" href="semantics.html#elementdef-canvas">canvas</a></code> element with the <code>hidden</code> attribute could be used by a scripted graphics engine as an off-screen buffer, and a form control
    could refer to a hidden <code><a data-link-type="element" href="semantics.html#elementdef-form">form</a></code> element using its <code>form</code> attribute.</p>
    </div>
    <p>Elements in a section hidden by the <code>hidden</code> attribute are still
  active, e.g. scripts and form controls in such sections still execute and submit respectively.
  Only their presentation to the user changes.</p>
    <div class="impl"> The <dfn class="idl-code" data-dfn-for="common" data-dfn-type="attribute" data-export="" id="dom-common-hidden"><code>hidden</code><a class="self-link" href="editing.html#dom-common-hidden"></a></dfn> IDL attribute must <a data-link-type="dfn" href="infrastructure.html#reflection">reflect</a> the
    content attribute of the same name. </div>
    <h3 class="heading settled" data-level="5.2" id="inert-subtrees"><span class="secno">5.2. </span><span class="content">Inert subtrees</span><a class="self-link" href="editing.html#inert-subtrees"></a></h3>
    <p class="note" role="note"> This section <strong>does not</strong> define or create any content attribute
  named "inert". This section merely defines an abstract <em>concept</em> of <a data-link-type="dfn" href="editing.html#inertness">inertness</a>. </p>
    <p>A node (in particular elements and text nodes) can be marked as <dfn data-dfn-type="dfn" data-lt="inertness|inert" data-noexport="" id="inertness">inert<a class="self-link" href="editing.html#inertness"></a></dfn>. When a node
  is <a data-link-type="dfn" href="editing.html#inertness">inert</a>, then the user agent must act as if the node was absent for the purposes of
  targeting user interaction events, may ignore the node for the purposes of text search user
  interfaces (commonly known as "find in page"), and may prevent the user from selecting text in
  that node. User agents should allow the user to override the restrictions on search and text
  selection, however.</p>
    <p class="example" id="example-181959b1"><a class="self-link" href="editing.html#example-181959b1"></a> For example, consider a page that consists of just a single <a data-link-type="dfn" href="editing.html#inertness">inert</a> paragraph positioned in the middle of a <code><a data-link-type="element" href="semantics.html#elementdef-body">body</a></code>. If a user moves their pointing device
  from the <code>body</code> over to the <a data-link-type="dfn" href="editing.html#inertness">inert</a> paragraph and clicks on the paragraph,
  no <code>mouseover</code> event would be fired, and the <code>mousemove</code> and <code>click</code> events would
  be fired on the <code><a data-link-type="element" href="semantics.html#elementdef-body">body</a></code> element rather than the paragraph. </p>
    <p class="note" role="note"> When a node is inert, it generally cannot be focused. Inert nodes that are <a data-link-type="dfn" href="semantics.html#menuitem-defines-a-command">commands</a> will also get disabled. </p>
    <p>While a <a data-link-type="dfn" href="browsers.html#browsing-context-container">browsing context container</a> is marked as <a data-link-type="dfn" href="editing.html#inertness">inert</a>, its <a data-link-type="dfn" href="browsers.html#nested-browsing-contexts">nested browsing context</a>’s <a data-link-type="dfn" href="browsers.html#active-document">active document</a>, and all nodes in that <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document">Document</a></code>, must be marked as <a data-link-type="dfn" href="editing.html#inertness">inert</a>.</p>
    <p>An entire <code>Document</code> can be marked as <dfn data-dfn-type="dfn" data-lt="blocked by the modal dialog|blocked by a modal dialog" data-noexport="" id="blocked-by-the-modal-dialog">blocked by a modal dialog<a class="self-link" href="editing.html#blocked-by-the-modal-dialog"></a></dfn> <var>subject</var>. While a <code>Document</code> is so marked, every node that is <a data-link-type="dfn" href="infrastructure.html#in-the-document">in the <code>Document</code></a>, with the exception of the <var>subject</var> element and its
  descendants, must be marked <a data-link-type="dfn" href="editing.html#inertness">inert</a>. (The elements excepted by this paragraph can
  additionally be marked <a data-link-type="dfn" href="editing.html#inertness">inert</a> through other means; being part of a modal dialog does not
  "protect" a node from being marked <a data-link-type="dfn" href="editing.html#inertness">inert</a>.)</p>
    <p>Only one element at a time can mark a <code>Document</code> as being <a data-link-type="dfn" href="editing.html#blocked-by-the-modal-dialog">blocked by a modal
  dialog</a>. When a new <code><a data-link-type="element" href="semantics.html#elementdef-dialog">dialog</a></code> is made to <a data-link-type="dfn" href="https://drafts.csswg.org/css-display-3/#block">block</a> a <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document">Document</a></code>, the previous element, if any, stops blocking the <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document">Document</a></code>.</p>
    <p class="note" role="note"> The <code><a data-link-type="element" href="semantics.html#elementdef-dialog">dialog</a></code> element’s <code>showModal()</code> method makes use of this mechanism. </p>
    <h3 class="heading settled" data-level="5.3" id="activation"><span class="secno">5.3. </span><span class="content">Activation</span><a class="self-link" href="editing.html#activation"></a></h3>
    <p>Certain elements in HTML have an <a data-link-type="dfn" href="editing.html#activation-behavior">activation behavior</a>, which means that the user
  can activate them. This triggers a sequence of events dependent on the activation mechanism, and
  normally culminating in a <code>click</code> event<span class="impl">, as described below</span>.</p>
    <div class="impl">
     <p>The user agent should allow the user to manually trigger elements that have an <a data-link-type="dfn" href="editing.html#activation-behavior">activation
  behavior</a>, for instance using keyboard or voice input, or through mouse clicks. When the
  user triggers an element with a defined <a data-link-type="dfn" href="editing.html#activation-behavior">activation behavior</a> in a manner other than
  clicking it, the default action of the interaction event must be to <a data-link-type="dfn" href="editing.html#running-synthetic-click-activation-steps">run synthetic click
  activation steps</a> on the element.</p>
     <p>Each element has a <var>click in progress</var> flag, initially set to false.</p>
     <p>When a user agent is to <dfn data-dfn-type="dfn" data-lt="running synthetic click activation steps|run synthetic click activation steps" data-noexport="" id="running-synthetic-click-activation-steps">run synthetic click activation steps<a class="self-link" href="editing.html#running-synthetic-click-activation-steps"></a></dfn> on an element, the user
  agent must run the following steps:</p>
     <ol>
      <li>If the element’s <var>click in progress</var> flag is set to true, then abort
    these steps.
      </li><li>Set the <var>click in progress</var> flag on the element to true.
      </li><li><a data-link-type="dfn" href="editing.html#run-pre-click-activation-steps">Run pre-click activation steps</a> on the element.
      </li><li><a data-link-type="dfn" href="webappapis.html#fire-a-click-event">Fire a <code>click</code> event</a> at the element. If the <a data-link-type="dfn" href="editing.html#running-synthetic-click-activation-steps">run synthetic click activation steps</a> algorithm was invoked because the <code>click()</code> method was invoked, then the <code>isTrusted</code> attribute must be initialized to false.
      </li><li>
       <p>If this <code>click</code> event is not canceled, <a data-link-type="dfn" href="editing.html#run-post-click-activation-steps">run post-click
    activation steps</a> on the element.</p>
       <p>If the event <em>is</em> canceled, the user agent must <a data-link-type="dfn" href="editing.html#run-canceled-activation-steps">run canceled activation
    steps</a> on the element instead.</p>
      </li><li>Set the <var>click in progress</var> flag on the element to false.
     </li></ol>
     <p>When a pointing device is clicked, the user agent must <a data-link-type="dfn" href="editing.html#run-authentic-click-activation-steps">run authentic click activation
  steps</a> instead of firing the <code>click</code> event. When a user agent is to <dfn data-dfn-type="dfn" data-noexport="" id="run-authentic-click-activation-steps">run authentic click activation steps<a class="self-link" href="editing.html#run-authentic-click-activation-steps"></a></dfn> for a given event <var>event</var>, it must
  follow these steps:</p>
     <ol>
      <li>Let <var>target</var> be the element designated by the user (the target of <var>event</var>).
      </li><li>If <var>target</var> is a <code><a data-link-type="element" href="semantics.html#elementdef-canvas">canvas</a></code> element, run the canvas <code>MouseEvent</code> rerouting steps. If this changes <var>event</var>’s
    target, then let <var>target</var> be the new target.
      </li><li>Set the <var>click in progress</var> flag on <var>target</var> to
    true.
      </li><li>Let <var>e</var> be the <a data-link-type="dfn" href="editing.html#nearest-activatable-element">nearest activatable element</a> of <var>target</var> (defined below), if any.
      </li><li>If there is an element <var>e</var>, <a data-link-type="dfn" href="editing.html#run-pre-click-activation-steps">run pre-click activation steps</a> on it.
      </li><li>
       <p><a data-link-type="dfn" href="infrastructure.html#dispatch">Dispatch</a> <var>event</var> (the
    required <code>click</code> event) at <var>target</var>.</p>
       <p>If there is an element <var>e</var> and the <code>click</code> event is not canceled, <a data-link-type="dfn" href="editing.html#run-post-click-activation-steps">run post-click activation steps</a> on element <var>e</var>.</p>
       <p>If there is an element <var>e</var> and the event <em>is</em> canceled, <a data-link-type="dfn" href="editing.html#run-canceled-activation-steps">run
    canceled activation steps</a> on element <var>e</var>.</p>
      </li><li>Set the <var>click in progress</var> flag on <var>target</var> to
    false.
     </li></ol>
     <p class="note" role="note"> The algorithms above don’t run for arbitrary synthetic events dispatched by author script. The <code>click()</code> method can be used to make the <a data-link-type="dfn" href="editing.html#running-synthetic-click-activation-steps">run synthetic click activation steps</a> algorithm happen programmatically. </p>
     <p class="note" role="note"> Click-focusing behavior (e.g. the focusing of a text field when user clicks in one) typically
    happens before the click, when the mouse button is first depressed, and is therefore not
    discussed here. </p>
     <p>Given an element <var>target</var>, the <dfn data-dfn-type="dfn" data-noexport="" id="nearest-activatable-element">nearest activatable element<a class="self-link" href="editing.html#nearest-activatable-element"></a></dfn> is the element
  returned by the following algorithm:</p>
     <ol>
      <li>If <var>target</var> has a defined <a data-link-type="dfn" href="editing.html#activation-behavior">activation behavior</a>, then return <var>target</var> and abort these steps.
      </li><li>If <var>target</var> has a parent element, then set <var>target</var> to
    that parent element and return to the first step.
      </li><li>Otherwise, there is no <a data-link-type="dfn" href="editing.html#nearest-activatable-element">nearest activatable element</a>.
     </li></ol>
     <p>When a user agent is to <dfn data-dfn-type="dfn" data-noexport="" id="run-pre-click-activation-steps">run pre-click activation steps<a class="self-link" href="editing.html#run-pre-click-activation-steps"></a></dfn> on an element, it must run
  the <dfn data-dfn-type="dfn" data-noexport="" id="pre-click-activation-steps">pre-click activation steps<a class="self-link" href="editing.html#pre-click-activation-steps"></a></dfn> defined for that element, if any.</p>
     <p>When a user agent is to <dfn data-dfn-type="dfn" data-noexport="" id="run-canceled-activation-steps">run canceled activation steps<a class="self-link" href="editing.html#run-canceled-activation-steps"></a></dfn> on an element, it must run the <dfn data-dfn-type="dfn" data-noexport="" id="canceled-activation-steps">canceled activation steps<a class="self-link" href="editing.html#canceled-activation-steps"></a></dfn> defined for that element, if any.</p>
     <p>When a user agent is to <dfn data-dfn-type="dfn" data-noexport="" id="run-post-click-activation-steps">run post-click activation steps<a class="self-link" href="editing.html#run-post-click-activation-steps"></a></dfn> on an element, it must run
  the <dfn data-dfn-type="dfn" data-noexport="" id="activation-behavior">activation behavior<a class="self-link" href="editing.html#activation-behavior"></a></dfn> defined for that element, if any. Activation behaviors can
  refer to the <code>click</code> event that was fired by the steps above
  leading up to this point.</p>
    </div>
    <dl class="domintro">
     <dt><var>element</var> . <code>click</code>()
     </dt><dd>Acts as if the element was clicked.
    </dd></dl>
    <div class="impl">
      The <dfn class="idl-code" data-dfn-for="common" data-dfn-type="method" data-export="" id="dom-common-click"><code>click()</code><a class="self-link" href="editing.html#dom-common-click"></a></dfn> method must run the following steps: 
     <ol>
      <li data-md="">
       <p>If the element is a form control that is disabled, abort these steps.</p>
      </li><li data-md="">
       <p><a data-link-type="dfn" href="editing.html#running-synthetic-click-activation-steps">Run synthetic click activation steps</a> on the element.</p>
     </li></ol>
    </div>
    <h3 class="heading settled" data-level="5.4" id="focus"><span class="secno">5.4. </span><span class="content">Focus</span><a class="self-link" href="editing.html#focus"></a></h3>
    <h4 class="heading settled" data-level="5.4.1" id="focus-introduction"><span class="secno">5.4.1. </span><span class="content">Introduction</span><a class="self-link" href="editing.html#focus-introduction"></a></h4>
    <p><em>This section is non-normative.</em></p>
    <p>An HTML user interface typically consists of multiple interactive widgets, such as form
  controls, scrollable regions, links, dialog boxes, browser tabs, and so forth. These widgets form
  a hierarchy, with some (e.g. browser tabs, dialog boxes) containing others (e.g. links, form
  controls).</p>
    <p>When interacting with an interface using a keyboard, key input is channeled from the system,
  through the hierarchy of interactive widgets, to an active widget, which is said to be <a data-link-type="dfn" href="editing.html#focused">focused</a>.</p>
    <div class="example" id="example-592aaa68">
     <a class="self-link" href="editing.html#example-592aaa68"></a> Consider an HTML application running in a browser tab running in a graphical environment.
    Suppose this application had a page with some text fields and links, and was currently showing a
    modal dialog, which itself had a text field and a button. 
     <p>The hierarchy of focusable widgets, in this scenario, would include the browser window, which
    would have, amongst its children, the browser tab containing the HTML application. The tab itself
    would have as its children the various links and text fields, as well as the dialog. The dialog
    itself would have as its children the text field and the button.</p>
     <p><img alt="" height="450" src="images/focus-tree.png" width="800"></p>
     <p>If the widget with <a data-link-type="dfn" href="editing.html#focused">focus</a> in this example was the text field in the dialog box, then key
    input would be channeled from the graphical system to ① the Web browser, then to ②
    the tab, then to ③ the dialog, and finally to ④ the text field.</p>
    </div>
    <p>Keyboard <em>events</em> are always targeted at this <a data-link-type="dfn" href="editing.html#focused">focused</a> element.</p>
    <h4 class="heading settled" data-level="5.4.2" id="data-model"><span class="secno">5.4.2. </span><span class="content">Data model</span><a class="self-link" href="editing.html#data-model"></a></h4>
    <p>The term <dfn data-dfn-type="dfn" data-lt="focusable|focusable area" data-noexport="" id="focusable">focusable area<a class="self-link" href="editing.html#focusable"></a></dfn> is used to refer to regions of the interface that can become
  the target of keyboard input. Focusable areas can be elements, parts of elements, or other regions
  managed by the user agent.</p>
    <p>Each <a data-link-type="dfn" href="editing.html#focusable">focusable area</a> has a <dfn data-dfn-type="dfn" data-noexport="" id="dom-anchor">DOM anchor<a class="self-link" href="editing.html#dom-anchor"></a></dfn>, which is a <code>Node</code> object
  that represents the position of the <a data-link-type="dfn" href="editing.html#focusable">focusable area</a> in the DOM. (When the <a data-link-type="dfn" href="editing.html#focusable">focusable
  area</a> is itself a <code>Node</code>, it is its own <a data-link-type="dfn" href="editing.html#dom-anchor">DOM anchor</a>.) The <a data-link-type="dfn" href="editing.html#dom-anchor">DOM anchor</a> is
  used in some APIs as a substitute for the <a data-link-type="dfn" href="editing.html#focusable">focusable area</a> when there is no other DOM object
  to represent the <a data-link-type="dfn" href="editing.html#focusable">focusable area</a>.</p>
    <p>The following table describes what objects can be <a data-link-type="dfn" href="editing.html#focusable">focusable
  areas</a>. The cells in the left column describe objects that can be <a data-link-type="dfn" href="editing.html#focusable">focusable areas</a>; the cells in the right column describe the <a data-link-type="dfn" href="editing.html#dom-anchor">DOM
  anchors</a> for those elements. (The cells that span both columns are non-normative examples.)</p>
    <table>
     <thead>
      <tr>
       <th><a data-link-type="dfn" href="editing.html#focusable">Focusable area</a> 
       </th><th><a data-link-type="dfn" href="editing.html#dom-anchor">DOM anchor</a> 
      </th></tr><tr>
       <th colspan="2">Examples 
     </th></tr></thead><tbody>
      <tr>
       <th class="data-header" headers="th-fa-area"> Elements that have their <a data-link-type="dfn" href="editing.html#can-be-focused">tabindex focus flag</a> set, that are not <a data-link-type="dfn" href="semantics.html#disabling">actually disabled</a>, that are not <a data-link-type="dfn" href="editing.html#expressly-inert">expressly inert</a>, and that are either <a data-link-type="dfn" href="rendering.html#being-rendered">being
      rendered</a> or <a data-link-type="dfn" href="semantics.html#being-used-as-relevant-canvas-fallback-content">being used as relevant canvas fallback content</a>. 
       </th><td headers="td-fa-1 th-fa-dom-rep"> The element itself. 
      </td></tr><tr>
       <td colspan="2" headers="td-fa-1 th-fa-examples">
        <p class="example" id="example-d41d8cd9"><a class="self-link" href="editing.html#example-d41d8cd9"></a> </p>
        <p><code><a data-link-type="element" href="semantics.html#elementdef-iframe">iframe</a></code>, <code>&lt;input
      type=text&gt;</code>, sometimes <code>&lt;a href=""&gt;</code> (depending on platform
      conventions).</p>
        <p></p>
     </td></tr></tbody><tbody>
      <tr>
       <th class="data-header" headers="th-fa-area"> The shapes of <code><a data-link-type="element" href="semantics.html#elementdef-area">area</a></code> elements in an <a data-link-type="dfn" href="semantics.html#image-map">image map</a> associated with an <code><a data-link-type="element" href="semantics.html#elementdef-img">img</a></code> element that is <a data-link-type="dfn" href="rendering.html#being-rendered">being rendered</a> and is not <a data-link-type="dfn" href="editing.html#expressly-inert">expressly inert</a>. 
       </th><td headers="td-fa-2 th-fa-dom-rep"> The <code><a data-link-type="element" href="semantics.html#elementdef-img">img</a></code> element. 
      </td></tr><tr>
       <td colspan="2" headers="td-fa-2 th-fa-examples">
        <div class="example" id="example-78107be7">
         <a class="self-link" href="editing.html#example-78107be7"></a> In the following example, the <code><a data-link-type="element" href="semantics.html#elementdef-area">area</a></code> element creates two shapes, one on each
      image. The <a data-link-type="dfn" href="editing.html#dom-anchor">DOM anchor</a> of the first shape is the first <code><a data-link-type="element" href="semantics.html#elementdef-img">img</a></code> element, and the <a data-link-type="dfn" href="editing.html#dom-anchor">DOM anchor</a> of the second shape is the second <code><a data-link-type="element" href="semantics.html#elementdef-img">img</a></code> element. 
<pre class="highlight"><span class="nt">&lt;map</span> <span class="na">id=</span><span class="s">wallmap</span><span class="nt">&gt;&lt;area</span> <span class="na">alt=</span><span class="s">"Enter Door"</span> <span class="na">coords=</span><span class="s">"10,10,100,200"</span> <span class="na">href=</span><span class="s">"door.html"</span><span class="nt">&gt;&lt;/map&gt;</span>
...
<span class="nt">&lt;img</span> <span class="na">src=</span><span class="s">"images/innerwall.jpeg"</span> <span class="na">alt=</span><span class="s">"There is a white wall here, with a door."</span> <span class="na">usemap=</span><span class="s">"#wallmap"</span><span class="nt">&gt;</span>
...
<span class="nt">&lt;img</span> <span class="na">src=</span><span class="s">"images/outerwall.jpeg"</span> <span class="na">alt=</span><span class="s">"There is a red wall here, with a door."</span> <span class="na">usemap=</span><span class="s">"#wallmap"</span><span class="nt">&gt;</span></pre>
        </div>
     </td></tr></tbody><tbody>
      <tr>
       <th class="data-header" headers="th-fa-area"> The user-agent provided subwidgets of elements that are <a data-link-type="dfn" href="rendering.html#being-rendered">being rendered</a> and are not <a data-link-type="dfn" href="semantics.html#disabling">actually disabled</a> or <a data-link-type="dfn" href="editing.html#expressly-inert">expressly inert</a>. 
       </th><td headers="td-fa-3 th-fa-dom-rep"> The element for which the <a data-link-type="dfn" href="editing.html#focusable">focusable area</a> is a subwidget. 
      </td></tr><tr>
       <td colspan="2" headers="td-fa-3 th-fa-examples">
        <p class="example" id="example-bf67362b"><a class="self-link" href="editing.html#example-bf67362b"></a>The <a data-link-type="dfn" href="semantics.html#exposing-a-user-interface">controls in the user
      interface that is exposed to the user</a> for a <code><a data-link-type="element" href="semantics.html#elementdef-video">video</a></code> element, the up and down
      buttons in a spin-control version of <code>&lt;input
      type=number&gt;</code>, the two range control widgets in a <code>&lt;input type=range multiple&gt;</code>, the part of a <code><a data-link-type="element" href="semantics.html#elementdef-details">details</a></code> element’s rendering that enabled the element to be opened or closed using
      keyboard input. </p>
     </td></tr></tbody><tbody>
      <tr>
       <th class="data-header" headers="th-fa-area"> The scrollable regions of elements that are <a data-link-type="dfn" href="rendering.html#being-rendered">being rendered</a> and are not <a data-link-type="dfn" href="editing.html#expressly-inert">expressly inert</a>. 
       </th><td headers="td-fa-4 th-fa-dom-rep"> The element for which the box that the scrollable region scrolls was created. 
      </td></tr><tr>
       <td colspan="2" headers="td-fa-4 th-fa-examples">
        <p class="example" id="example-7d1a38d4"><a class="self-link" href="editing.html#example-7d1a38d4"></a> The CSS <a class="property" data-link-type="propdesc" href="http://www.w3.org/TR/css-overflow-3/#overflow">overflow</a> property’s <span class="css">scroll</span> value typically creates a scrollable
      region. </p>
     </td></tr></tbody><tbody>
      <tr>
       <th class="data-header" headers="th-fa-area"> The viewport of a <code>Document</code> that is in a <a data-link-type="dfn" href="browsers.html#browsing-context">browsing context</a> and is not <a data-link-type="dfn" href="editing.html#inertness">inert</a>. 
       </th><td headers="td-fa-5 th-fa-dom-rep"> The <code>Document</code> for which the viewport was created. 
      </td></tr><tr>
       <td colspan="2" headers="td-fa-5 th-fa-examples">
        <p class="example" id="example-d2837fc5"><a class="self-link" href="editing.html#example-d2837fc5"></a> The contents of an <code><a data-link-type="element" href="semantics.html#elementdef-iframe">iframe</a></code>. </p>
     </td></tr></tbody><tbody>
      <tr>
       <th class="data-header" headers="th-fa-area"> Any other element or part of an element, especially to aid with accessibility or to better
      match platform conventions. 
       </th><td headers="td-fa-6 th-fa-dom-rep"> The element. 
      </td></tr><tr>
       <td colspan="2" headers="td-fa-6 th-fa-examples">
        <p class="example" id="example-f0aeeb32"><a class="self-link" href="editing.html#example-f0aeeb32"></a> A user agent could make all list item bullets focusable, so that a user can
      more easily navigate lists. </p>
        <p class="example" id="example-52641c2b"><a class="self-link" href="editing.html#example-52641c2b"></a> Similarly, a user agent could make all elements with <code>title</code> attributes focusable, so that their advisory information can
      be accessed. </p>
    </td></tr></tbody></table>
    <p class="note" role="note"> A <a data-link-type="dfn" href="browsers.html#browsing-context-container">browsing context container</a> (e.g. an <code><a data-link-type="element" href="semantics.html#elementdef-iframe">iframe</a></code>) is a <a data-link-type="dfn" href="editing.html#focusable">focusable area</a>, but key events routed to a <a data-link-type="dfn" href="browsers.html#browsing-context-container">browsing context
    container</a> get immediately routed to the <a data-link-type="dfn" href="browsers.html#nested-browsing-contexts">nested browsing context</a>’s <a data-link-type="dfn" href="browsers.html#active-document">active
    document</a>. Similarly, in sequential focus navigation a <a data-link-type="dfn" href="browsers.html#browsing-context-container">browsing context
    container</a> essentially acts merely as a placeholder for its &lt;<a data-link-type="dfn" href="browsers.html#nested-browsing-contexts">nested browsing context</a>’s <a data-link-type="dfn" href="browsers.html#active-document">active document</a>. </p>
    <p>Each <a data-link-type="dfn" href="editing.html#focusable">focusable area</a> belongs to a <dfn data-dfn-type="dfn" data-noexport="" id="control-group">control group<a class="self-link" href="editing.html#control-group"></a></dfn>. Each <a data-link-type="dfn" href="editing.html#control-group">control group</a> has
  an <dfn data-dfn-type="dfn" data-noexport="" id="owner">owner<a class="self-link" href="editing.html#owner"></a></dfn>. <a data-link-type="dfn" href="editing.html#control-group-owner">Control group
  owners</a> are <dfn data-dfn-type="dfn" data-lt="control group owner|control group owner objects|control group owner object" data-noexport="" id="control-group-owner">control group owner objects<a class="self-link" href="editing.html#control-group-owner"></a></dfn>. The
  following are <a data-link-type="dfn" href="editing.html#control-group-owner">control group owner objects</a>:</p>
    <ul class="brief">
     <li><code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document">Document</a></code> object in <a data-link-type="dfn" href="browsers.html#browsing-context">browsing contexts</a>.
     </li><li><code><a data-link-type="element" href="semantics.html#elementdef-dialog">dialog</a></code> elements that have an <code>open</code> attribute specified and that are <a data-link-type="dfn" href="rendering.html#being-rendered">being rendered</a>.
    </li></ul>
    <p>Each <a data-link-type="dfn" href="editing.html#control-group-owner">control group owner object</a> owns one <a data-link-type="dfn" href="editing.html#control-group">control group</a> (though that group might be
  empty).</p>
    <p>If the <a data-link-type="dfn" href="editing.html#dom-anchor">DOM anchor</a> of a <a data-link-type="dfn" href="editing.html#focusable">focusable area</a> is a <a data-link-type="dfn" href="editing.html#control-group-owner">control group owner
  object</a>, then that <a data-link-type="dfn" href="editing.html#focusable">focusable area</a> belongs to that <a data-link-type="dfn" href="editing.html#control-group-owner">control group owner
  object</a>’s <a data-link-type="dfn" href="editing.html#control-group">control group</a>. Otherwise, the <a data-link-type="dfn" href="editing.html#focusable">focusable area</a> belongs to its <a data-link-type="dfn" href="editing.html#dom-anchor">DOM anchor</a>’s nearest ancestor <a data-link-type="dfn" href="editing.html#control-group-owner">control group owner object</a>.</p>
    <div class="example" id="example-fcc4c156"><a class="self-link" href="editing.html#example-fcc4c156"></a> Thus, a viewport always belongs to the <a data-link-type="dfn" href="editing.html#control-group">control group</a> of the <code>Document</code> for which the viewport was created, an <code><a data-link-type="element" href="semantics.html#elementdef-input">input</a></code> control belongs to the <a data-link-type="dfn" href="editing.html#control-group">control
    group</a> of its nearest ancestor <code><a data-link-type="element" href="semantics.html#elementdef-dialog">dialog</a></code> or <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document">Document</a></code>, and an image
    map’s shapes belong to the nearest ancestor <code>dialog</code> or <code>Document</code> of the <code><a data-link-type="element" href="semantics.html#elementdef-img">img</a></code> elements (not the <code><a data-link-type="element" href="semantics.html#elementdef-area">area</a></code> elements — this means one <code><a data-link-type="element" href="semantics.html#elementdef-area">area</a></code> element might create multiple shapes in different <a data-link-type="dfn" href="editing.html#control-group">control groups</a>). </div>
    <p>An element is <dfn data-dfn-type="dfn" data-noexport="" id="expressly-inert">expressly inert<a class="self-link" href="editing.html#expressly-inert"></a></dfn> if it is <a data-link-type="dfn" href="editing.html#inertness">inert</a> but it is not a <a data-link-type="dfn" href="editing.html#control-group-owner">control group owner object</a> and its nearest
  ancestor <a data-link-type="dfn" href="editing.html#control-group-owner">control group owner object</a> is not <a data-link-type="dfn" href="editing.html#inertness">inert</a>.</p>
    <p>One <a data-link-type="dfn" href="editing.html#focusable">focusable area</a> in each non-empty <a data-link-type="dfn" href="editing.html#control-group">control group</a> is designated the <dfn data-dfn-type="dfn" data-lt="focused area|focused area of the control group|focused dialog|focused area of that focus group|focused area of a control group|focused dialog of a dialog group|focused dialog of its dialog group" data-noexport="" id="focused-area">focused area of the control group<a class="self-link" href="editing.html#focused-area"></a></dfn>. Which control is so designated changes over time,
  based on algorithms in this specification. If a <a data-link-type="dfn" href="editing.html#control-group">control group</a> is empty, it has no <a data-link-type="dfn" href="editing.html#focused-area">focused area</a>.</p>
    <p>Each <a data-link-type="dfn" href="editing.html#control-group-owner">control group owner object</a> can also act as the <dfn data-dfn-type="dfn" data-lt="dialog group manager|manager" data-noexport="" id="dialog-group-manager">manager<a class="self-link" href="editing.html#dialog-group-manager"></a></dfn> of a <dfn data-dfn-type="dfn" data-noexport="" id="dialog-group">dialog group<a class="self-link" href="editing.html#dialog-group"></a></dfn>.</p>
    <p>Each <code><a data-link-type="element" href="semantics.html#elementdef-dialog">dialog</a></code> element that has an <code>open</code> attribute specified and that is <a data-link-type="dfn" href="rendering.html#being-rendered">being rendered</a> (i.e. that is a <a data-link-type="dfn" href="editing.html#control-group-owner">control group
  owner object</a>) and is not <a data-link-type="dfn" href="editing.html#dialog-expressly-inert">expressly inert</a> belongs to the <a data-link-type="dfn" href="editing.html#dialog-group">dialog group</a> whose <a data-link-type="dfn" href="editing.html#dialog-group-manager">manager</a> is
  the <code><a data-link-type="element" href="semantics.html#elementdef-dialog">dialog</a></code> element’s nearest ancestor <a data-link-type="dfn" href="editing.html#control-group-owner">control group owner object</a>.</p>
    <p>A <code>dialog</code> is <dfn data-dfn-for="dialog" data-dfn-type="dfn" data-noexport="" id="dialog-expressly-inert">expressly inert<a class="self-link" href="editing.html#dialog-expressly-inert"></a></dfn> if it is <a data-link-type="dfn" href="editing.html#inertness">inert</a> but its nearest ancestor <a data-link-type="dfn" href="editing.html#control-group-owner">control group owner object</a> is not.</p>
    <p>If no <code><a data-link-type="element" href="semantics.html#elementdef-dialog">dialog</a></code> element has a particular <a data-link-type="dfn" href="editing.html#control-group-owner">control group owner object</a> as
  its nearest ancestor <a data-link-type="dfn" href="editing.html#control-group-owner">control group owner object</a>, then that <a data-link-type="dfn" href="editing.html#control-group-owner">control group owner
  object</a> has no <a data-link-type="dfn" href="editing.html#dialog-group">dialog group</a>.</p>
    <p>Each <a data-link-type="dfn" href="editing.html#dialog-group">dialog group</a> can have a <code>dialog</code> designated as the <dfn data-dfn-type="dfn" data-noexport="" id="focused-dialog-of-the-dialog-group">focused
  dialog of the dialog group<a class="self-link" href="editing.html#focused-dialog-of-the-dialog-group"></a></dfn>. Which <code>dialog</code> is so designated changes over time,
  based on algorithms in this specification.</p>
    <hr>
    <p><a data-link-type="dfn" href="editing.html#focusable">Focusable areas</a> in <a data-link-type="dfn" href="editing.html#control-group">control groups</a> are ordered relative to the <a data-link-type="dfn" href="infrastructure.html#tree-order">tree order</a> of their <a data-link-type="dfn" href="editing.html#dom-anchor">DOM
  anchors</a>. <a data-link-type="dfn" href="editing.html#focusable">Focusable areas</a> with the same <a data-link-type="dfn" href="editing.html#dom-anchor">DOM anchor</a> in a <a data-link-type="dfn" href="editing.html#control-group">control group</a> are ordered relative to their CSS box’s relative positions in a pre-order,
  depth-first traversal of the box tree. <a data-link-type="biblio" href="references.html#biblio-css-2015">[CSS-2015]</a></p>
    <p>Elements in <a data-link-type="dfn" href="editing.html#dialog-group">dialog groups</a> are ordered in <a data-link-type="dfn" href="infrastructure.html#tree-order">tree
  order</a>.</p>
    <hr>
    <p>The <dfn data-dfn-type="dfn" data-lt="currently focused area of the top-level browsing context|currently focused area of a top-level browsing context" data-noexport="" id="currently-focused-area-of-the-top-level-browsing-context">currently focused area of a top-level browsing context<a class="self-link" href="editing.html#currently-focused-area-of-the-top-level-browsing-context"></a></dfn> at any particular time is
  the <a data-link-type="dfn" href="editing.html#focusable">focusable area</a> or <code>dialog</code> returned by this algorithm:</p>
    <ol>
     <li>Let <var>candidate</var> be the <code>Document</code> of the <a data-link-type="dfn" href="browsers.html#top-level-browsing-context">top-level
    browsing context</a>.
     </li><li>
      <p>If <var>candidate</var> has a <a data-link-type="dfn" href="editing.html#dialog-group">dialog group</a> with a designated <a data-link-type="dfn" href="editing.html#focused-dialog-of-the-dialog-group">focused dialog of the dialog group</a>, then let <var>candidate</var> be the
    designated <a data-link-type="dfn" href="editing.html#focused-dialog-of-the-dialog-group">focused dialog of the dialog group</a>, and redo this step.</p>
      <p>Otherwise, if <var>candidate</var> has a non-empty <a data-link-type="dfn" href="editing.html#control-group">control group</a>, and the
    designated <a data-link-type="dfn" href="editing.html#focused-area">focused area of the control group</a> is a <a data-link-type="dfn" href="browsers.html#browsing-context-container">browsing context
    container</a>, then let <var>candidate</var> be the <a data-link-type="dfn" href="browsers.html#active-document">active document</a> of
    that <a data-link-type="dfn" href="browsers.html#browsing-context-container">browsing context container</a>’s <a data-link-type="dfn" href="browsers.html#nested-browsing-contexts">nested browsing context</a>, and redo
    this step.</p>
      <p>Otherwise, if <var>candidate</var> has a non-empty <a data-link-type="dfn" href="editing.html#control-group">control group</a>, let <var>candidate</var> be the designated <a data-link-type="dfn" href="editing.html#focused-area">focused area of the control
    group</a>.</p>
     </li><li>Return <var>candidate</var>.
    </li></ol>
    <p>An element that is the <a data-link-type="dfn" href="editing.html#dom-anchor">DOM anchor</a> of a <a data-link-type="dfn" href="editing.html#focusable">focusable area</a> is said to <dfn data-dfn-type="dfn" data-noexport="" id="gain-focus">gain focus<a class="self-link" href="editing.html#gain-focus"></a></dfn> when that <a data-link-type="dfn" href="editing.html#focusable">focusable area</a> becomes the <a data-link-type="dfn" href="editing.html#currently-focused-area-of-the-top-level-browsing-context">currently focused area of a
  top-level browsing context</a>. When an element is the <a data-link-type="dfn" href="editing.html#dom-anchor">DOM anchor</a> of a <a data-link-type="dfn" href="editing.html#focusable">focusable area</a> of the <a data-link-type="dfn" href="editing.html#currently-focused-area-of-the-top-level-browsing-context">currently focused area of a top-level browsing context</a>, it is <dfn data-dfn-type="dfn" data-noexport="" id="focused">focused<a class="self-link" href="editing.html#focused"></a></dfn>.</p>
    <div class="impl">
      The <dfn data-dfn-type="dfn" data-noexport="" id="focus-chain">focus chain<a class="self-link" href="editing.html#focus-chain"></a></dfn> of a <a data-link-type="dfn" href="editing.html#focusable">focusable area</a> or <a data-link-type="dfn" href="editing.html#control-group-owner">control group owner object</a> <var>subject</var> is the ordered list constructed as follows: 
     <ol>
      <li>Let <var>current object</var> be <var>subject</var>.
      </li><li>Let <var>output</var> be an empty list.
      </li><li><i>Loop</i>: Append <var>current object</var> to <var>output</var>.
      </li><li>
       <p>If <var>current object</var> is an <code><a data-link-type="element" href="semantics.html#elementdef-area">area</a></code> element’s shape, append
    that <code><a data-link-type="element" href="semantics.html#elementdef-area">area</a></code> element to <var>output</var>.</p>
       <p>Otherwise, if <var>current object</var> is a <a data-link-type="dfn" href="editing.html#focusable">focusable area</a> whose <a data-link-type="dfn" href="editing.html#dom-anchor">DOM
    anchor</a> is an element that is not <var>current object</var> itself, append that <a data-link-type="dfn" href="editing.html#dom-anchor">DOM anchor</a> element to <var>output</var>.</p>
      </li><li>
       <p>If <var>current object</var> is a <code>dialog</code> object in a <a data-link-type="dfn" href="editing.html#dialog-group">dialog group</a>,
    let <var>current object</var> be that <a data-link-type="dfn" href="editing.html#dialog-group">dialog group</a>’s <a data-link-type="dfn" href="editing.html#dialog-group-manager">manager</a>, and return to the step labeled <i>loop</i>.</p>
       <p>Otherwise, if <var>current object</var> is a <a data-link-type="dfn" href="editing.html#focusable">focusable area</a>, let <var>current
    object</var> be that <a data-link-type="dfn" href="editing.html#focusable">focusable area</a>’s <a data-link-type="dfn" href="editing.html#control-group">control group</a>’s <a data-link-type="dfn" href="editing.html#owner">owner</a>, and return to the step labeled <i>loop</i>.</p>
       <p>Otherwise, if <var>current object</var> is a <code>Document</code> in a &lt;<a data-link-type="dfn" href="browsers.html#nested-browsing-contexts">nested browsing context</a>, let <var>current object</var> be its <a data-link-type="dfn" href="browsers.html#browsing-context-container">browsing context container</a>,
    and return to the step labeled <i>loop</i>.</p>
      </li><li>
       <p>Return <var>output</var>.</p>
       <p class="note" role="note"> The chain starts with <var>subject</var> and (if <var>subject</var> is or can be the <a data-link-type="dfn" href="editing.html#currently-focused-area-of-the-top-level-browsing-context">currently focused area of a top-level browsing context</a>) continues up the focus
      hierarchy up to the <code>Document</code> of the <a data-link-type="dfn" href="browsers.html#top-level-browsing-context">top-level browsing context</a>. </p>
     </li></ol>
    </div>
    <h4 class="heading settled" data-level="5.4.3" id="the-tabindex-attribute"><span class="secno">5.4.3. </span><span class="content">The <code>tabindex</code> attribute</span><a class="self-link" href="editing.html#the-tabindex-attribute"></a></h4>
    <p>The <dfn data-dfn-for="global" data-dfn-type="element-attr" data-export="" id="element-attrdef-global-tabindex"><code>tabindex</code><a class="self-link" href="editing.html#element-attrdef-global-tabindex"></a></dfn> content attribute allows authors to
  indicate that an element is supposed to be <a data-link-type="dfn" href="editing.html#focusable">focusable</a>, and
  whether it is supposed to be reachable using <a data-link-type="dfn" href="editing.html#sequential-focus-navigation">sequential focus navigation</a> and, if so,
  what is to be the relative order of the element for the purposes of sequential focus navigation.
  The name "tab index" comes from the common use of the "tab" key to navigate through the focusable
  elements. The term "tabbing" refers to moving forward through the focusable elements that can be
  reached using sequential focus navigation.</p>
    <p>When the attribute is omitted, the user agent applies defaults. (There is no way to make an
  element that is <a data-link-type="dfn" href="rendering.html#being-rendered">being rendered</a> be not focusable at all without <a data-link-type="dfn" href="semantics.html#disabling">disabling</a> it or making it <a data-link-type="dfn" href="editing.html#inertness">inert</a>.)</p>
    <p>The <code>tabindex</code> attribute, if specified, must have a value
  that is a <a data-link-type="dfn" href="infrastructure.html#valid-integer">valid integer</a>. Positive numbers specify the relative position of the
  element’s <a data-link-type="dfn" href="editing.html#focusable">focusable areas</a> in the <a data-link-type="dfn" href="editing.html#sequential-focus-navigation">sequential focus
  navigation order</a>, and negative numbers indicate that the control is to be unreachable by <a data-link-type="dfn" href="editing.html#sequential-focus-navigation">sequential focus navigation</a>.</p>
    <div class="impl">
     <p>Each element can have a <dfn data-dfn-type="dfn" data-lt="can be focused|tabindex focus flag" data-noexport="" id="can-be-focused">tabindex focus flag<a class="self-link" href="editing.html#can-be-focused"></a></dfn> set, as defined
  below. This flag is a factor that contributes towards determining whether an element is a <a data-link-type="dfn" href="editing.html#focusable">focusable area</a>, as described in the previous section.</p>
     <p>If the <code>tabindex</code> attribute is specified on an element, it
  must be parsed using the <a data-link-type="dfn" href="infrastructure.html#integers-parses">rules for parsing integers</a>. The attribute’s values, or lack
  thereof, must be interpreted as follows:</p>
     <dl>
      <dt>If the attribute is omitted or parsing the value returns an error
      </dt><dd>
       <p>The user agent should follow platform conventions to determine if the element’s <a data-link-type="dfn" href="editing.html#can-be-focused">tabindex focus flag</a> is set and, if so, whether the element and any <a data-link-type="dfn" href="editing.html#focusable">focusable areas</a> that have the element as their <a data-link-type="dfn" href="editing.html#dom-anchor">DOM anchor</a> can
    be reached using <a data-link-type="dfn" href="editing.html#sequential-focus-navigation">sequential focus navigation</a>, and if so, what their relative
    position in the <a data-link-type="dfn" href="editing.html#sequential-focus-navigation">sequential focus navigation order</a> is to be.</p>
       <p>Modulo platform conventions, it is suggested that for the following elements, the <a data-link-type="dfn" href="editing.html#can-be-focused">tabindex focus flag</a> be set:</p>
       <ul>
        <li><code><a data-link-type="element" href="#a">a</a></code> elements that have an <code><a data-link-type="element-attr" href="semantics.html#element-attrdef-links-href">href</a></code> attribute
        </li><li><code><a data-link-type="element" href="semantics.html#elementdef-link">link</a></code> elements that have an <code><a data-link-type="element-attr" href="semantics.html#element-attrdef-link-href">href</a></code> attribute
        </li><li><code><a data-link-type="element" href="semantics.html#elementdef-button">button</a></code> elements
        </li><li><code><a data-link-type="element" href="semantics.html#elementdef-input">input</a></code> elements whose <code>type</code> attribute are
      not in the <a data-link-type="dfn" href="editing.html#hidden">Hidden</a> state
        </li><li><code><a data-link-type="element" href="semantics.html#elementdef-select">select</a></code> elements
        </li><li><code><a data-link-type="element" href="semantics.html#elementdef-textarea">textarea</a></code> elements
        </li><li><code><a data-link-type="element" href="semantics.html#elementdef-menuitem">menuitem</a></code> elements
        </li><li>Elements with a <code>draggable</code> attribute set, if that would
      enable the user agent to allow the user to begin a drag operations for those elements without
      the use of a pointing device
        </li><li><a data-link-type="dfn" href="editing.html#editing-host">Editing hosts</a>
        </li><li><a data-link-type="dfn" href="browsers.html#browsing-context-container">Browsing context containers</a>
        </li><li><a data-link-type="dfn" href="semantics.html#sorting-interface-th-element">Sorting interface <code>th</code> elements</a>
       </li></ul>
       <p class="note" role="note"> One valid reason to ignore the platform conventions and always allow an element
    to be focused (by setting its <a data-link-type="dfn" href="editing.html#can-be-focused">tabindex focus flag</a>) would be if the user’s only
    mechanism for activating an element is through a keyboard action that triggers the focused
    element. </p>
      </dd><dt>If the value is a negative integer
      </dt><dd>
       <p>The user agent must set the element’s <a data-link-type="dfn" href="editing.html#can-be-focused">tabindex focus flag</a>, but should omit the
    element from the <a data-link-type="dfn" href="editing.html#sequential-focus-navigation">sequential focus navigation order</a>.</p>
       <p class="note" role="note"> One valid reason to ignore the requirement that sequential focus navigation not
    allow the author to lead to the element would be if the user’s only mechanism for moving the
    focus is sequential focus navigation. For instance, a keyboard-only user would be unable to
    click on a text field with a negative <code>tabindex</code>, so that
    user’s user agent would be well justified in allowing the user to tab to the control
    regardless. </p>
      </dd><dt>If the value is a zero
      </dt><dd>
       <p>The user agent must set the element’s <a data-link-type="dfn" href="editing.html#can-be-focused">tabindex focus flag</a>, should allow the
    element and any <a data-link-type="dfn" href="editing.html#focusable">focusable areas</a> that have the element as their <a data-link-type="dfn" href="editing.html#dom-anchor">DOM anchor</a> to be reached using <a data-link-type="dfn" href="editing.html#sequential-focus-navigation">sequential focus navigation</a>, following
    platform conventions to determine the element’s relative position in the <a data-link-type="dfn" href="editing.html#sequential-focus-navigation">sequential focus
    navigation order</a>.</p>
      </dd><dt>If the value is greater than zero
      </dt><dd>
       <p>The user agent must set the element’s <a data-link-type="dfn" href="editing.html#can-be-focused">tabindex focus flag</a>, should allow the
    element and any <a data-link-type="dfn" href="editing.html#focusable">focusable areas</a> that have the element as their <a data-link-type="dfn" href="editing.html#dom-anchor">DOM anchor</a> to be reached using sequential focus navigation, and should place the element
    — referenced as <var>candidate</var> below — and the aforementioned <a data-link-type="dfn" href="editing.html#focusable">focusable areas</a> in the <a data-link-type="dfn" href="editing.html#sequential-focus-navigation">sequential focus navigation</a> order so that, relative to other <a data-link-type="dfn" href="editing.html#focusable">focusable areas</a> in the <a data-link-type="dfn" href="editing.html#sequential-focus-navigation">sequential focus navigation order</a>, they are:</p>
       <ul>
        <li>before any <a data-link-type="dfn" href="editing.html#focusable">focusable area</a> whose <a data-link-type="dfn" href="editing.html#dom-anchor">DOM anchor</a> is an element whose <code>tabindex</code> attribute has been omitted or whose value, when parsed,
      returns an error,
        </li><li>before any <a data-link-type="dfn" href="editing.html#focusable">focusable area</a> whose <a data-link-type="dfn" href="editing.html#dom-anchor">DOM anchor</a> is an element whose <code>tabindex</code> attribute has a value equal to or less than zero,
        </li><li>after any <a data-link-type="dfn" href="editing.html#focusable">focusable area</a> whose <a data-link-type="dfn" href="editing.html#dom-anchor">DOM anchor</a> is an element whose <code>tabindex</code> attribute has a value greater than zero but less than
      the value of the <code>tabindex</code> attribute on <var>candidate</var>,
        </li><li>after any <a data-link-type="dfn" href="editing.html#focusable">focusable area</a> whose <a data-link-type="dfn" href="editing.html#dom-anchor">DOM anchor</a> is an element whose <code>tabindex</code> attribute has a value equal to the value of the <code>tabindex</code> attribute on <var>candidate</var> but that is
      earlier in the document in <a data-link-type="dfn" href="infrastructure.html#tree-order">tree order</a> than <var>candidate</var>,
        </li><li>before any <a data-link-type="dfn" href="editing.html#focusable">focusable area</a> whose <a data-link-type="dfn" href="editing.html#dom-anchor">DOM anchor</a> is an element whose <code>tabindex</code> attribute has a value equal to the value of the <code>tabindex</code> attribute on <var>candidate</var> but that is
      later in the document in <a data-link-type="dfn" href="infrastructure.html#tree-order">tree order</a> than <var>candidate</var>, and
        </li><li>before any <a data-link-type="dfn" href="editing.html#focusable">focusable area</a> whose <a data-link-type="dfn" href="editing.html#dom-anchor">DOM anchor</a> is an element whose <code>tabindex</code> attribute has a value greater than the value of the <code>tabindex</code> attribute on <var>candidate</var>.
       </li></ul>
     </dd></dl>
     <p>An element that has its <a data-link-type="dfn" href="editing.html#can-be-focused">tabindex focus flag</a> set but does not otherwise have an <a data-link-type="dfn" href="editing.html#activation-behavior">activation behavior</a> defined has an <a data-link-type="dfn" href="editing.html#activation-behavior">activation behavior</a> that does
  nothing.</p>
     <p class="note" role="note"> This means that an element that is only focusable because of its <code>tabindex</code> attribute will fire a <code>click</code> event in response to a non-mouse activation (e.g. hitting the
  "enter" key while the element is <a data-link-type="dfn" href="editing.html#focused">focused</a>). </p>
     <p>An element with the <code>tabindex</code> attribute specified is <a data-link-type="dfn" href="dom.html#interactive-content">interactive content</a>.</p>
     <p>The <dfn class="idl-code" data-dfn-for="global" data-dfn-type="attribute" data-export="" id="dom-global-tabindex"><code>tabIndex</code><a class="self-link" href="editing.html#dom-global-tabindex"></a></dfn> IDL attribute must <a data-link-type="dfn" href="infrastructure.html#reflection">reflect</a> the value of the <code>tabindex</code> content
  attribute. Its default value is 0 for elements that are focusable and -1 for elements that
  are not focusable.</p>
    </div>
    <div class="impl">
     <h4 class="heading settled" data-level="5.4.4" id="focus-processing-model"><span class="secno">5.4.4. </span><span class="content">Processing model</span><a class="self-link" href="editing.html#focus-processing-model"></a></h4>
     <p>The <dfn data-dfn-type="dfn" data-noexport="" id="focusing-steps">focusing steps<a class="self-link" href="editing.html#focusing-steps"></a></dfn> for an object <var>new focus target</var> that is
  either a <a data-link-type="dfn" href="editing.html#focusable">focusable area</a>, or an element that is not a <a data-link-type="dfn" href="editing.html#focusable">focusable area</a>, or a <a data-link-type="dfn" href="browsers.html#browsing-context">browsing context</a>, are as follows. They can optionally be run with a <i>fallback target</i>.</p>
     <ol>
      <li>
       <p>If <var>new focus target</var> is neither a <code><a data-link-type="element" href="semantics.html#elementdef-dialog">dialog</a></code> element that has an <code>open</code> attribute specified and that is <a data-link-type="dfn" href="rendering.html#being-rendered">being
    rendered</a> (i.e. that is a <a data-link-type="dfn" href="editing.html#control-group-owner">control group owner object</a>), nor a <a data-link-type="dfn" href="editing.html#focusable">focusable
    area</a>, then run the first matching set of steps from the following list:</p>
       <dl class="switch">
        <dt>If <var>new focus target</var> is an <code><a data-link-type="element" href="semantics.html#elementdef-area">area</a></code> element with one or more
      shapes that are <a data-link-type="dfn" href="editing.html#focusable">focusable areas</a>
        </dt><dd>
         <p>Let <var>new focus target</var> be the shape corresponding to the first <code><a data-link-type="element" href="semantics.html#elementdef-img">img</a></code> element in <a data-link-type="dfn" href="infrastructure.html#tree-order">tree order</a> that uses the image map to which the <code>area</code> element belongs.</p>
        </dd><dt>If <var>new focus target</var> is an element with one or more scrollable regions
      that are <a data-link-type="dfn" href="editing.html#focusable">focusable areas</a>
        </dt><dd>
         <p>Let <var>new focus target</var> be the element’s first scrollable region,
      according to a pre-order, depth-first traversal of the box tree. <a data-link-type="biblio" href="references.html#biblio-css-2015">[CSS-2015]</a></p>
        </dd><dt>If <var>new focus target</var> is the <a data-link-type="dfn" href="infrastructure.html#root-element">root element</a> of its <code>Document</code>
        </dt><dd>
         <p>Let <var>new focus target</var> be the <code>Document</code>’s viewport.</p>
        </dd><dt>If <var>new focus target</var> is a <a data-link-type="dfn" href="browsers.html#browsing-context">browsing context</a>
        </dt><dd>
         <p>Let <var>new focus target</var> be the <a data-link-type="dfn" href="browsers.html#browsing-context">browsing context</a>’s <a data-link-type="dfn" href="browsers.html#active-document">active document</a>.</p>
        </dd><dt>If <var>new focus target</var> is a <a data-link-type="dfn" href="browsers.html#browsing-context-container">browsing context container</a>
        </dt><dd>
         <p>Let <var>new focus target</var> be the <a data-link-type="dfn" href="browsers.html#browsing-context-container">browsing context container</a>’s <a data-link-type="dfn" href="browsers.html#nested-browsing-contexts">nested browsing context</a>’s <a data-link-type="dfn" href="browsers.html#active-document">active document</a>.</p>
        </dd><dt>Otherwise
        </dt><dd>
         <p>If no <i>fallback target</i> was specified, abort the <a data-link-type="dfn" href="editing.html#focusing-steps">focusing steps</a>.</p>
         <p>Otherwise, let <var>new focus target</var> be the <i>fallback target</i>.</p>
       </dd></dl>
      </li><li>
       <p>If <var>new focus target</var> is a <a data-link-type="dfn" href="editing.html#control-group-owner">control group owner object</a> that is
    not a <a data-link-type="dfn" href="editing.html#focusable">focusable area</a>, but does have a <a data-link-type="dfn" href="editing.html#dialog-group">dialog group</a>, and that <a data-link-type="dfn" href="editing.html#dialog-group">dialog group</a> has a designated <a data-link-type="dfn" href="editing.html#focused-area">focused dialog</a>, then
    let <var>new focus target</var> be the <a data-link-type="dfn" href="editing.html#focused-dialog-of-the-dialog-group">focused dialog of the dialog
    group</a>, and redo this step.</p>
       <p>Otherwise, if <var>new focus target</var> is a <a data-link-type="dfn" href="editing.html#control-group-owner">control group owner
    object</a> that is not a <a data-link-type="dfn" href="editing.html#focusable">focusable area</a>, and its <a data-link-type="dfn" href="editing.html#control-group">control group</a> is not empty,
    then designate <var>new focus target</var> as the <a data-link-type="dfn" href="editing.html#focused-area">focused area of the control
    group</a>, and redo this step.</p>
       <p>Otherwise, if <var>new focus target</var> is a <a data-link-type="dfn" href="browsers.html#browsing-context-container">browsing context
    container</a>, then let <var>new focus target</var> be the &lt;<a data-link-type="dfn" href="browsers.html#nested-browsing-contexts">nested browsing context</a>’s <a data-link-type="dfn" href="browsers.html#active-document">active document</a>, and redo this step.</p>
       <p class="note" role="note"> A <code><a data-link-type="element" href="semantics.html#elementdef-dialog">dialog</a></code> element can be both a <a data-link-type="dfn" href="editing.html#control-group-owner">control group owner
    object</a> and a <a data-link-type="dfn" href="editing.html#focusable">focusable area</a>, if it has both an <code>open</code> attribute specified and a <code>tabindex</code> attribute specified and is <a data-link-type="dfn" href="rendering.html#being-rendered">being
    rendered</a>. </p>
      </li><li>If <var>new focus target</var> is a <a data-link-type="dfn" href="editing.html#focusable">focusable area</a> and its <a data-link-type="dfn" href="editing.html#dom-anchor">DOM
    anchor</a> is <a data-link-type="dfn" href="editing.html#inertness">inert</a>, then abort these steps.
      </li><li>If <var>new focus target</var> is the <a data-link-type="dfn" href="editing.html#currently-focused-area-of-the-top-level-browsing-context">currently focused area of a
    top-level browsing context</a>, then abort these steps.
      </li><li>Let <var>old chain</var> be the <a data-link-type="dfn" href="editing.html#focus-chain">focus chain</a> of the <a data-link-type="dfn" href="editing.html#currently-focused-area-of-the-top-level-browsing-context">currently focused area of the
    top-level browsing context</a> in which <var>new focus target</var> finds
    itself.
      </li><li>Let <var>new chain</var> be the <a data-link-type="dfn" href="editing.html#focus-chain">focus chain</a> of <var>new
    focus target</var>.
      </li><li>Run the <a data-link-type="dfn" href="editing.html#loses-focus">focus update steps</a> with <var>old chain</var>, <var>new chain</var>, and <var>new focus target</var> respectively.
     </li></ol>
     <p>User agents must <a data-link-type="dfn" href="infrastructure.html#immediately">immediately</a> run the <a data-link-type="dfn" href="editing.html#focusing-steps">focusing steps</a> for a <a data-link-type="dfn" href="editing.html#focusable">focusable area</a>, <code><a data-link-type="element" href="semantics.html#elementdef-dialog">dialog</a></code>, or <a data-link-type="dfn" href="browsers.html#browsing-context">browsing context</a> <var>candidate</var> whenever the
  user attempts to move the focus to <var>candidate</var>.</p>
     <p>The <dfn data-dfn-type="dfn" data-noexport="" id="unfocusing-steps">unfocusing steps<a class="self-link" href="editing.html#unfocusing-steps"></a></dfn> for an object <var>old focus target</var> that is
  either a <a data-link-type="dfn" href="editing.html#focusable">focusable area</a> or an element that is not a <a data-link-type="dfn" href="editing.html#focusable">focusable area</a> are as
  follows:</p>
     <ol>
      <li>If <var>old focus target</var> is <a data-link-type="dfn" href="editing.html#inertness">inert</a>, then abort these
    steps.
      </li><li>
       <p>If <var>old focus target</var> is an <code><a data-link-type="element" href="semantics.html#elementdef-area">area</a></code> element and one of its shapes is the <a data-link-type="dfn" href="editing.html#currently-focused-area-of-the-top-level-browsing-context">currently focused area of a top-level browsing context</a>, or, if <var>old focus
    target</var> is an element with one or more scrollable regions, and one of them is the <a data-link-type="dfn" href="editing.html#currently-focused-area-of-the-top-level-browsing-context">currently focused area of a top-level browsing context</a>, then let <var>old focus
    target</var> be that <a data-link-type="dfn" href="editing.html#currently-focused-area-of-the-top-level-browsing-context">currently focused area of a top-level browsing context</a>.</p>
      </li><li>Let <var>old chain</var> be the <a data-link-type="dfn" href="editing.html#focus-chain">focus chain</a> of the <a data-link-type="dfn" href="editing.html#currently-focused-area-of-the-top-level-browsing-context">currently
    focused area of a top-level browsing context</a>.
      </li><li>If <var>old focus target</var> is not one of the entries in <var>old
    chain</var>, then abort these steps.
      </li><li>
       <p>If <var>old focus target</var> is a <code>dialog</code> in a <a data-link-type="dfn" href="editing.html#dialog-group">dialog group</a>, and
    the <a data-link-type="dfn" href="editing.html#dialog-group-manager">dialog group manager</a> has a non-empty <a data-link-type="dfn" href="editing.html#control-group">control group</a>, then let <var>new focus target</var> be the designated <a data-link-type="dfn" href="editing.html#focused-area">focused area of that focus group</a>.</p>
       <p>Otherwise, if <var>old focus target</var> is a <a data-link-type="dfn" href="editing.html#focusable">focusable area</a>, then let <var>new
    focus target</var> be the first <a data-link-type="dfn" href="editing.html#focusable">focusable area</a> of its <a data-link-type="dfn" href="editing.html#control-group">control group</a> (if the <a data-link-type="dfn" href="editing.html#control-group-owner">control group owner</a> is a <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document">Document</a></code>, this will always be a
    viewport).</p>
       <p>Otherwise, let <var>new focus target</var> be null.</p>
      </li><li>If <var>new focus target</var> is not null, then run the <a data-link-type="dfn" href="editing.html#focusing-steps">focusing
    steps</a> for <var>new focus target</var>.
     </li></ol>
     <p>When the <a data-link-type="dfn" href="editing.html#currently-focused-area-of-the-top-level-browsing-context">currently focused area of a top-level browsing context</a> is somehow
  unfocused without another element being explicitly focused in its stead, the user agent must <a data-link-type="dfn" href="infrastructure.html#immediately">immediately</a> run the <a data-link-type="dfn" href="editing.html#unfocusing-steps">unfocusing steps</a> for that object.</p>
     <p class="note" role="note"> The <a data-link-type="dfn" href="editing.html#unfocusing-steps">unfocusing steps</a> do not always result in the focus changing, even
  when applied to the <a data-link-type="dfn" href="editing.html#currently-focused-area-of-the-top-level-browsing-context">currently focused area of a top-level browsing context</a>. For
  example, if the <a data-link-type="dfn" href="editing.html#currently-focused-area-of-the-top-level-browsing-context">currently focused area of a top-level browsing context</a> is a viewport,
  then it will usually keep its focus regardless until another <a data-link-type="dfn" href="editing.html#focusable">focusable area</a> is explicitly
  focused with the <a data-link-type="dfn" href="editing.html#focusing-steps">focusing steps</a>. </p>
     <hr>
     <p>When a <a data-link-type="dfn" href="editing.html#focusable">focusable area</a> is added to an empty <a data-link-type="dfn" href="editing.html#control-group">control group</a>, it must be designated
  the <a data-link-type="dfn" href="editing.html#focused-area">focused area of the control group</a>.</p>
     <p>When a <a data-link-type="dfn" href="editing.html#dialog-group">dialog group</a> is formed, if the <a data-link-type="dfn" href="editing.html#dialog-group-manager">dialog group manager</a> has an empty <a data-link-type="dfn" href="editing.html#control-group">control group</a>, the first non-<a data-link-type="dfn" href="editing.html#inertness">inert</a> <code>dialog</code> in the <a data-link-type="dfn" href="editing.html#dialog-group">dialog
  group</a>, if any, or else the first <code>dialog</code> in the <a data-link-type="dfn" href="editing.html#dialog-group">dialog group</a> regardless of <a data-link-type="dfn" href="editing.html#inertness">inertness</a>, must be designated the <a data-link-type="dfn" href="editing.html#focused-dialog-of-the-dialog-group">focused dialog of the dialog
  group</a>.</p>
     <p><dfn data-dfn-type="dfn" data-noexport="" id="focus-fixup-rule-one">Focus fixup rule one<a class="self-link" href="editing.html#focus-fixup-rule-one"></a></dfn>: When the designated <a data-link-type="dfn" href="editing.html#focused-area">focused area of a control group</a> is removed from that <a data-link-type="dfn" href="editing.html#control-group">control group</a> in
  some way (e.g. it stops being a <a data-link-type="dfn" href="editing.html#focusable">focusable area</a>, it is removed from the DOM, it
  becomes <a data-link-type="dfn" href="editing.html#expressly-inert">expressly inert</a>, etc), and the <a data-link-type="dfn" href="editing.html#control-group">control
  group</a> is still not empty: designate the first non-<a data-link-type="dfn" href="editing.html#inertness">inert</a> <a data-link-type="dfn" href="editing.html#focused-area">focused area</a> in that <a data-link-type="dfn" href="editing.html#control-group">control group</a> to be the new <a data-link-type="dfn" href="editing.html#focused-area">focused area of the control group</a>, if any; if they are all <a data-link-type="dfn" href="editing.html#inertness">inert</a>, then
  designate the first <a data-link-type="dfn" href="editing.html#focused-area">focused area</a> in that <a data-link-type="dfn" href="editing.html#control-group">control group</a> to be the new <a data-link-type="dfn" href="editing.html#focused-area">focused area of the control group</a> regardless
  of <a data-link-type="dfn" href="editing.html#inertness">inertness</a>. If such a removal instead results in the <a data-link-type="dfn" href="editing.html#control-group">control
  group</a> being empty, then there is simply no longer a <a data-link-type="dfn" href="editing.html#focused-area">focused area of the control
  group</a>.</p>
     <p class="example" id="example-5ec11306"><a class="self-link" href="editing.html#example-5ec11306"></a> For example, this might happen because an element is removed from its <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document">Document</a></code>, or has a <code>hidden</code> attribute added. It might
  also happen to an <code><a data-link-type="element" href="semantics.html#elementdef-input">input</a></code> element when the element gets disabled. </p>
     <p><dfn data-dfn-type="dfn" data-noexport="" id="focus-fixup-rule-two">Focus fixup rule two<a class="self-link" href="editing.html#focus-fixup-rule-two"></a></dfn>: When a <a data-link-type="dfn" href="editing.html#dialog-group">dialog group</a> has no designed <a data-link-type="dfn" href="editing.html#focused-dialog-of-the-dialog-group">focused
  dialog of the dialog group</a>, and its <a data-link-type="dfn" href="editing.html#dialog-group-manager">dialog group manager</a>’s <a data-link-type="dfn" href="editing.html#control-group">control
  group</a> changes from being non-empty to being empty, the first non-<a data-link-type="dfn" href="editing.html#inertness">inert</a> <code>dialog</code> in the <a data-link-type="dfn" href="editing.html#dialog-group">dialog group</a>, if any, or else the first <code>dialog</code> in
  the <a data-link-type="dfn" href="editing.html#dialog-group">dialog group</a> regardless of <a data-link-type="dfn" href="editing.html#inertness">inertness</a>, must be designated
  the <a data-link-type="dfn" href="editing.html#focused-dialog-of-the-dialog-group">focused dialog of the dialog group</a>.</p>
     <p><dfn data-dfn-type="dfn" data-noexport="" id="focus-fixup-rule-three">Focus fixup rule three<a class="self-link" href="editing.html#focus-fixup-rule-three"></a></dfn>: When the designated <a data-link-type="dfn" href="editing.html#focused-area">focused dialog of a dialog group</a> is removed from that <a data-link-type="dfn" href="editing.html#dialog-group">dialog group</a> in
  some way (e.g. it stops <a data-link-type="dfn" href="rendering.html#being-rendered">being rendered</a>, it loses its <code>open</code> attribute, it becomes <a data-link-type="dfn" href="editing.html#expressly-inert">expressly inert</a>, etc), and there is still a <a data-link-type="dfn" href="editing.html#dialog-group">dialog group</a> (because the <code>dialog</code> in question was not the last <code>dialog</code> in that <a data-link-type="dfn" href="editing.html#dialog-group">dialog group</a>):
  if the <a data-link-type="dfn" href="editing.html#dialog-group">dialog group</a>’s <a data-link-type="dfn" href="editing.html#dialog-group-manager">manager</a>’s <a data-link-type="dfn" href="editing.html#control-group">control
  group</a> is non-empty, let there be no designated <a data-link-type="dfn" href="editing.html#focused-dialog-of-the-dialog-group">focused dialog of the dialog group</a> any more; otherwise (in the case that the <a data-link-type="dfn" href="editing.html#control-group">control group</a> is empty), designate the first
  non-<a data-link-type="dfn" href="editing.html#inertness">inert</a> <code>dialog</code> in the <a data-link-type="dfn" href="editing.html#dialog-group">dialog group</a> to be the <a data-link-type="dfn" href="editing.html#focused-dialog-of-the-dialog-group">focused
  dialog of the dialog group</a>, or, if they are all <a data-link-type="dfn" href="editing.html#inertness">inert</a>, designate the first <code>dialog</code> in the <a data-link-type="dfn" href="editing.html#dialog-group">dialog group</a> to be the <a data-link-type="dfn" href="editing.html#focused-dialog-of-the-dialog-group">focused dialog of the dialog
  group</a> regardless of <a data-link-type="dfn" href="editing.html#inertness">inertness</a>.</p>
     <p>When the <a data-link-type="dfn" href="editing.html#currently-focused-area-of-the-top-level-browsing-context">currently focused area of a top-level browsing context</a> was a <a data-link-type="dfn" href="editing.html#focusable">focusable
  area</a> but stops being a <a data-link-type="dfn" href="editing.html#focusable">focusable area</a>, or when it was a <code>dialog</code> in a <a data-link-type="dfn" href="editing.html#dialog-group">dialog group</a> and stops being part of that <a data-link-type="dfn" href="editing.html#dialog-group">dialog group</a>, or when it
  starts being <a data-link-type="dfn" href="editing.html#inertness">inert</a>, the user agent must run the following steps:</p>
     <ol>
      <li>Let <var>old focus target</var> be whatever the <a data-link-type="dfn" href="editing.html#currently-focused-area-of-the-top-level-browsing-context">currently focused area of the top-level browsing
    context</a> was immediately before this algorithm became applicable (e.g. before the element
    was disabled, or the dialog was closed, or whatever caused this algorithm to run).
      </li><li>Let <var>old chain</var> be the <a data-link-type="dfn" href="editing.html#focus-chain">focus chain</a> of the <a data-link-type="dfn" href="editing.html#currently-focused-area-of-the-top-level-browsing-context">currently focused area of the
    top-level browsing context</a> at the same time.
      </li><li>Make sure that the changes implied by the focus fixup rules <span>one</span>, <span>two</span>, and <span>three</span> above are applied.
      </li><li>Let <var>new focus target</var> be the <a data-link-type="dfn" href="editing.html#currently-focused-area-of-the-top-level-browsing-context">currently focused area of a
    top-level browsing context</a>.
      </li><li>If <var>old focus target</var> and <var>new focus target</var> are the
    same, abort these steps.
      </li><li>Let <var>new chain</var> be the <a data-link-type="dfn" href="editing.html#focus-chain">focus chain</a> of <var>new
    focus target</var>.
      </li><li>Run the <a data-link-type="dfn" href="editing.html#loses-focus">focus update steps</a> with <var>old chain</var>, <var>new chain</var>, and <var>new focus target</var> respectively.
     </li></ol>
     <hr>
     <p>The <dfn data-dfn-type="dfn" data-lt="loses focus|focus update steps" data-noexport="" id="loses-focus">focus update steps<a class="self-link" href="editing.html#loses-focus"></a></dfn>, given an <var>old chain</var>, a <var>new chain</var>, and a <var>new focus target</var> respectively, are as
  follows:</p>
     <ol>
      <li>Unset the <a data-link-type="dfn" href="editing.html#sequential-focus-navigation-starting-point">sequential focus navigation starting point</a>.
      </li><li>If the last entry in <var>old chain</var> and the last entry in <var>new chain</var> are the same, pop the last entry from <var>old chain</var> and the last entry from <var>new chain</var> and redo this step.
      </li><li>
       <p>For each entry <var>entry</var> in <var>old chain</var>, in order, run
    these substeps:</p>
       <ol>
        <li>If <var>entry</var> is an <code>input</code> element, and the <code>change</code> event <a data-link-type="dfn" href="semantics.html#apply">applies</a> to the element, and the element does not have a
      defined <a data-link-type="dfn" href="editing.html#activation-behavior">activation behavior</a>, and the user has changed the element’s <a data-link-type="dfn" href="semantics.html#forms-value">value</a> or its list of <a data-link-type="dfn" href="semantics.html#selected-files">selected files</a> while the control was focused
      without committing that change, then <a data-link-type="dfn" href="infrastructure.html#fire">fire a simple event</a> that bubbles named <code>change</code> at the element. 
        </li><li>
         <p>If <var>entry</var> is an element, let <var>blur event target</var> be <var>entry</var>.</p>
         <p>If <var>entry</var> is a <code>Document</code> object, let <var>blur
      event target</var> be that <code>Document</code> object’s <code>Window</code> object.</p>
         <p>Otherwise, let <var>blur event target</var> be null.</p>
        </li><li>If <var>entry</var> is the last entry in <var>old chain</var>, and <var>entry</var> is an <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#element">Element</a></code>, and the last entry in <var>new
      chain</var> is also an <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#element">Element</a></code>, then let <var>related blur target</var> be the last entry in <var>new chain</var>. Otherwise, let <var>related blur
      target</var> be null.
        </li><li>
         <p>If <var>blur event target</var> is not null, <a data-link-type="dfn" href="editing.html#fire-a-focus-event">fire a focus event</a> named <code>blur</code> at <var>blur event target</var>, with <var>related blur target</var> as the related target.</p>
         <p class="note" role="note"> In some cases, e.g. if <var>entry</var> is an <code>area</code> element’s shape, a scrollable region, or a viewport, no event is fired. </p>
       </li></ol>
      </li><li>Apply any relevant platform-specific conventions for focusing <var>new focus
    target</var>. (For example, some platforms select the contents of a text field when that field is
    focused.)
      </li><li>
       <p>For each entry <var>entry</var> in <var>new chain</var>, in reverse
    order, run these substeps:</p>
       <ol>
        <li>If <var>entry</var> is a <code><a data-link-type="element" href="semantics.html#elementdef-dialog">dialog</a></code> element: Let <var>entry</var> be the designated <a data-link-type="dfn" href="editing.html#focused-area">focused dialog of its dialog group</a>.
        </li><li>
         <p>If <var>entry</var> is a <a data-link-type="dfn" href="editing.html#focusable">focusable area</a>: Designate <var>entry</var> as the <a data-link-type="dfn" href="editing.html#focused-area">focused area of the control group</a>. If its <a data-link-type="dfn" href="editing.html#control-group">control
      group</a>’s <a data-link-type="dfn" href="editing.html#owner">owner</a> is also a <a data-link-type="dfn" href="editing.html#dialog-group-manager">dialog group
      manager</a>, then let there be no designated <a data-link-type="dfn" href="editing.html#focused-area">focused dialog</a> in that <a data-link-type="dfn" href="editing.html#dialog-group">dialog group</a>.</p>
         <p class="note" role="note"> It is possible for <var>entry</var> to be both a <code>dialog</code> element and a <a data-link-type="dfn" href="editing.html#focusable">focusable area</a>, in which case it is its own <a data-link-type="dfn" href="editing.html#control-group-owner">control group
      owner</a>. </p>
        </li><li>
         <p>If <var>entry</var> is an element, let <var>focus event target</var> be <var>entry</var>.</p>
         <p>If <var>entry</var> is a <code>Document</code> object, let <var>focus
      event target</var> be that <code>Document</code> object’s <code>Window</code> object.</p>
         <p>Otherwise, let <var>focus event target</var> be null.</p>
        </li><li>If <var>entry</var> is the last entry in <var>new chain</var>, and <var>entry</var> is an <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#element">Element</a></code>, and the last entry in <var>old
      chain</var> is also an <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#element">Element</a></code>, then let <var>related focus target</var> be the last entry in <var>old chain</var>. Otherwise, let <var>related
      focus target</var> be null.
        </li><li>
         <p>If <var>focus event target</var> is not null, <a data-link-type="dfn" href="editing.html#fire-a-focus-event">fire a focus event</a> named <code>focus</code> at <var>focus event target</var>, with <var>related focus target</var> as the related target.</p>
         <p class="note" role="note"> In some cases, e.g. if <var>entry</var> is an <code>area</code> element’s shape, a scrollable region, or a viewport, no event is fired. </p>
       </li></ol>
     </li></ol>
     <p>When a user agent is required to <dfn data-dfn-type="dfn" data-noexport="" id="fire-a-focus-event">fire a focus event<a class="self-link" href="editing.html#fire-a-focus-event"></a></dfn> named <var>e</var> at
  an element <var>t</var> and with a given related target <var>r</var>, the user
  agent must create a <a data-link-type="dfn" href="infrastructure.html#trusted">trusted</a> <code>FocusEvent</code> object, initialize it to have the given name <var>e</var>, to not bubble, to not be
  cancelable, and to have the <code>relatedTarget</code> attribute initialized to <var>r</var>, the <code>view</code> attribute initialized to the <code>Window</code> object of the <code>Document</code> object of <var>t</var>, and the <code>detail</code> attribute initialized to 0, and must then <a data-link-type="dfn" href="infrastructure.html#dispatch">dispatch</a> the newly created <code>FocusEvent</code> object
  at the specified target element <var>t</var>.</p>
     <hr>
     <p>When a key event is to be routed in a <a data-link-type="dfn" href="browsers.html#top-level-browsing-context">top-level browsing context</a>, the user agent
  must run the following steps:</p>
     <ol>
      <li>Let <var>target area</var> be the <a data-link-type="dfn" href="editing.html#currently-focused-area-of-the-top-level-browsing-context">currently focused area of the top-level browsing
    context</a>.
      </li><li>If <var>target area</var> is a <a data-link-type="dfn" href="editing.html#focusable">focusable area</a>, let <var>target
    node</var> be <var>target area</var>’s <a data-link-type="dfn" href="editing.html#dom-anchor">DOM anchor</a>. Otherwise, <var>target area</var> is a <code>dialog</code>; let <var>target node</var> be <var>target area</var>.
      </li><li>
       <p>If <var>target node</var> is a <code>Document</code> that has a <code><a data-link-type="element" href="semantics.html#elementdef-body">body</a></code> element, then let <var>target node</var> be <a href="semantics.html#the-body-element">the <code>body</code> element</a> of that <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document">Document</a></code>.</p>
       <p>Otherwise, if <var>target node</var> is a <code>Document</code> that has a <a data-link-type="dfn" href="infrastructure.html#root-element">root element</a>, then let <var>target node</var> be the <a data-link-type="dfn" href="infrastructure.html#root-element">root
    element</a> of that <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document">Document</a></code>.</p>
      </li><li>
       <p>If <var>target node</var> is not <a data-link-type="dfn" href="editing.html#inertness">inert</a>, fire the event at <var>target node</var>.</p>
       <p class="note" role="note"> It is possible for the <a data-link-type="dfn" href="editing.html#currently-focused-area-of-the-top-level-browsing-context">currently focused area of a top-level browsing
    context</a> to be <a data-link-type="dfn" href="editing.html#inertness">inert</a>, for example if a <a data-link-type="dfn" href="semantics.html#modal-dialog-is-shown">modal dialog is shown</a>, and then that <code>dialog</code> element is made <a data-link-type="dfn" href="editing.html#inertness">inert</a>. It is likely to be the result of a logic error in the
    application, though. </p>
      </li><li>If the event was not canceled, then let <var>target area</var> handle the key
    event. This might include <a data-link-type="dfn" href="editing.html#running-synthetic-click-activation-steps">running synthetic
    click activation steps</a> for <var>target node</var>.
     </li></ol>
     <hr>
     <p>The <dfn data-dfn-type="dfn" data-noexport="" id="has-focus-steps">has focus steps<a class="self-link" href="editing.html#has-focus-steps"></a></dfn>, given a <code>Document</code> object <var>target</var>, are
  as follows:</p>
     <ol>
      <li>Let <var>candidate</var> be the <code>Document</code> of the <a data-link-type="dfn" href="browsers.html#top-level-browsing-context">top-level browsing
    context</a>.
      </li><li>If <var>candidate</var> is <var>target</var>, return true and abort these steps.
      </li><li>
       <p>If <var>candidate</var> has a <a data-link-type="dfn" href="editing.html#dialog-group">dialog group</a> with a designated <a data-link-type="dfn" href="editing.html#focused-dialog-of-the-dialog-group">focused
    dialog of the dialog group</a>, then let <var>candidate</var> be the designated <a data-link-type="dfn" href="editing.html#focused-dialog-of-the-dialog-group">focused dialog of the dialog group</a>, and redo this step.</p>
       <p>Otherwise, if <var>candidate</var> has a non-empty <a data-link-type="dfn" href="editing.html#control-group">control group</a>, and the
    designated <a data-link-type="dfn" href="editing.html#focused-area">focused area of the control group</a> is a <a data-link-type="dfn" href="browsers.html#browsing-context-container">browsing context
    container</a>, and the <a data-link-type="dfn" href="browsers.html#active-document">active document</a> of that <a data-link-type="dfn" href="browsers.html#browsing-context-container">browsing context
    container</a>’s <a data-link-type="dfn" href="browsers.html#nested-browsing-contexts">nested browsing context</a> is <var>target</var>, then
    return true and abort these steps.</p>
       <p>Otherwise, if <var>candidate</var> has a non-empty <a data-link-type="dfn" href="editing.html#control-group">control group</a>, and the
    designated <a data-link-type="dfn" href="editing.html#focused-area">focused area of the control group</a> is a <a data-link-type="dfn" href="browsers.html#browsing-context-container">browsing context
    container</a>, then let <var>candidate</var> be the <a data-link-type="dfn" href="browsers.html#active-document">active document</a> of
    that <a data-link-type="dfn" href="browsers.html#browsing-context-container">browsing context container</a>’s <a data-link-type="dfn" href="browsers.html#nested-browsing-contexts">nested browsing context</a>, and redo
    this step.</p>
       <p>Otherwise, return false and abort these steps.</p>
     </li></ol>
     <h4 class="heading settled" data-level="5.4.5" id="sec-sequential-focus-navigation"><span class="secno">5.4.5. </span><span class="content">Sequential focus navigation</span><a class="self-link" href="editing.html#sec-sequential-focus-navigation"></a></h4>
     <p>Each <a data-link-type="dfn" href="editing.html#control-group">control group</a> has a <dfn data-dfn-type="dfn" data-lt="sequential focus navigation|sequential focus navigation order" data-noexport="" id="sequential-focus-navigation">sequential focus navigation order<a class="self-link" href="editing.html#sequential-focus-navigation"></a></dfn>, which orders some
  or all of the <a data-link-type="dfn" href="editing.html#focusable">focusable areas</a> in the <a data-link-type="dfn" href="editing.html#control-group">control group</a> relative to each other. The order in the <a data-link-type="dfn" href="editing.html#sequential-focus-navigation">sequential focus navigation order</a> does not
  have to be related to the order in the <a data-link-type="dfn" href="editing.html#control-group">control group</a> itself. If a <a data-link-type="dfn" href="editing.html#focusable">focusable area</a> is
  omitted from the <a data-link-type="dfn" href="editing.html#sequential-focus-navigation">sequential focus navigation order</a> of its <a data-link-type="dfn" href="editing.html#control-group">control group</a>, then
  it is unreachable via <a data-link-type="dfn" href="editing.html#sequential-focus-navigation">sequential focus navigation</a>.</p>
     <p>There can also be a <dfn data-dfn-type="dfn" data-noexport="" id="sequential-focus-navigation-starting-point">sequential focus navigation starting point<a class="self-link" href="editing.html#sequential-focus-navigation-starting-point"></a></dfn>. It is initially
  unset. The user agent may set it when the user indicates that it should be moved.</p>
     <p class="example" id="example-7f4ad2ac"><a class="self-link" href="editing.html#example-7f4ad2ac"></a> For example, the user agent could set it to the position of the user’s click if
  the user clicks on the document contents. </p>
     <p>When the user requests that focus move from the <a data-link-type="dfn" href="editing.html#currently-focused-area-of-the-top-level-browsing-context">currently focused area of a top-level
  browsing context</a> to the next or previous <a data-link-type="dfn" href="editing.html#focusable">focusable area</a> (e.g. as the default action
  of pressing the <kbd>tab</kbd> key), or when the user requests that focus sequentially move to a <a data-link-type="dfn" href="browsers.html#top-level-browsing-context">top-level browsing context</a> in the first place (e.g. from the browser’s location bar),
  the user agent must use the following algorithm:</p>
     <ol>
      <li>Let <var>starting point</var> be the <a data-link-type="dfn" href="editing.html#currently-focused-area-of-the-top-level-browsing-context">currently focused area of a top-level
    browsing context</a>, if the user requested to move focus sequentially from there, or else the <a data-link-type="dfn" href="browsers.html#top-level-browsing-context">top-level browsing context</a> itself, if the user instead requested to move focus from
    outside the <a data-link-type="dfn" href="browsers.html#top-level-browsing-context">top-level browsing context</a>.
      </li><li>If there is a <a data-link-type="dfn" href="editing.html#sequential-focus-navigation-starting-point">sequential focus navigation starting point</a> defined and it is
    inside <var>starting point</var>, then let <var>starting point</var> be the <a data-link-type="dfn" href="editing.html#sequential-focus-navigation-starting-point">sequential
    focus navigation starting point</a> instead.
      </li><li>
       <p>Let <var>direction</var> be <i>forward</i> if the user requested the <em>next</em> control, and <i>backward</i> if the user requested the previous control.</p>
       <p class="note" role="note"> Typically, pressing <kbd>tab</kbd> requests the next control, and pressing <kbd><kbd>shift</kbd>+<kbd>tab</kbd></kbd> requests the previous control. </p>
      </li><li>
       <p><i>Loop</i>: Let <var>selection mechanism</var> be <i>sequential</i> if the <var>starting
    point</var> is a <a data-link-type="dfn" href="browsers.html#browsing-context">browsing context</a> or if <var>starting point</var> is in its <a data-link-type="dfn" href="editing.html#control-group">control group</a>’s <a data-link-type="dfn" href="editing.html#sequential-focus-navigation">sequential focus navigation order</a>.</p>
       <p>Otherwise, <var>starting point</var> is not in its <a data-link-type="dfn" href="editing.html#control-group">control group</a>’s <a data-link-type="dfn" href="editing.html#sequential-focus-navigation">sequential focus navigation order</a>; let <var>selection mechanism</var> be <i>DOM</i>.</p>
      </li><li>Let <var>candidate</var> be the result of running the <a data-link-type="dfn" href="editing.html#sequential-navigation-search-algorithm">sequential navigation search
    algorithm</a> with <var>starting point</var>, <var>direction</var>, and <var>selection
    mechanism</var> as the arguments.
      </li><li>If <var>candidate</var> is not null, then run the <a data-link-type="dfn" href="editing.html#focusing-steps">focusing steps</a> for <var>candidate</var> and abort these steps.
      </li><li>Otherwise, unset the <a data-link-type="dfn" href="editing.html#sequential-focus-navigation-starting-point">sequential focus navigation starting point</a>.
      </li><li>
       <p>If <var>starting point</var> is the <a data-link-type="dfn" href="browsers.html#top-level-browsing-context">top-level browsing context</a>, or a <a data-link-type="dfn" href="editing.html#focusable">focusable area</a> in the <a data-link-type="dfn" href="browsers.html#top-level-browsing-context">top-level browsing context</a>, the user agent
    should transfer focus to its own controls appropriately (if any), honouring <var>direction</var>, and then abort these steps.</p>
       <p class="example" id="example-7611db4a"><a class="self-link" href="editing.html#example-7611db4a"></a> For example, if <var>direction</var> is <i>backward</i>, then the last
    focusable control before the browser’s rendering area would be the control to focus. </p>
       <p>If the user agent has no focusable controls — a kiosk-mode browser, for instance
    —
    then the user agent may instead restart these steps with the <var>starting point</var> being the <a data-link-type="dfn" href="browsers.html#top-level-browsing-context">top-level browsing context</a> itself.</p>
      </li><li>Otherwise, <var>starting point</var> is a <a data-link-type="dfn" href="editing.html#focusable">focusable area</a> in a <a data-link-type="dfn" href="browsers.html#nested-browsing-contexts">nested browsing context</a>. Let <var>starting point</var> be that <a data-link-type="dfn" href="browsers.html#nested-browsing-contexts">nested browsing context</a>’s <a data-link-type="dfn" href="browsers.html#browsing-context-container">browsing context container</a>, and return to the
    step labeled <i>loop</i>. 
     </li></ol>
     <p>The <dfn data-dfn-type="dfn" data-noexport="" id="sequential-navigation-search-algorithm">sequential navigation search algorithm<a class="self-link" href="editing.html#sequential-navigation-search-algorithm"></a></dfn> consists of the following steps. This
  algorithm takes three arguments: <var>starting point</var>, <var>direction</var>,
  and <var>selection mechanism</var>.</p>
     <ol>
      <li>
       <p>Pick the appropriate cell from the following table, and follow the instructions in that cell.</p>
       <p>The appropriate cell is the one that is from the column whose header describes <var>direction</var> and from the first row whose header describes <var>starting point</var> and <var>selection mechanism</var>.</p>
       <table>
        <thead>
         <tr>
          <th>
          </th><th><var>direction</var> is <i>forward</i>
          </th><th><var>direction</var> is <i>backward</i>
        </th></tr></thead><tbody>
         <tr>
          <th><var>starting point</var> is a <a data-link-type="dfn" href="browsers.html#browsing-context">browsing context</a>
          </th><td> Let <var>candidate</var> be the first <a data-link-type="dfn" href="editing.html#suitable-sequentially-focusable-area">suitable sequentially focusable area</a> in <var>starting point</var>’s <a data-link-type="dfn" href="browsers.html#active-document">active document</a>’s <a data-link-type="dfn" href="editing.html#primary-control-group">primary control group</a>, if
            any; or else null 
          </td><td> Let <var>candidate</var> be the last <a data-link-type="dfn" href="editing.html#suitable-sequentially-focusable-area">suitable sequentially focusable area</a> in <var>starting point</var>’s <a data-link-type="dfn" href="browsers.html#active-document">active document</a>’s <a data-link-type="dfn" href="editing.html#primary-control-group">primary control group</a>, if
            any; or else null 
         </td></tr><tr>
          <th><var>selection mechanism</var> is <i>DOM</i>
          </th><td> Let <var>candidate</var> be the first <a data-link-type="dfn" href="editing.html#suitable-sequentially-focusable-area">suitable sequentially focusable area</a> in the <a data-link-type="dfn" href="editing.html#home-control-group">home control group</a> following <var>starting point</var>, if any; or else null 
          </td><td> Let <var>candidate</var> be the last <a data-link-type="dfn" href="editing.html#suitable-sequentially-focusable-area">suitable sequentially focusable area</a> in the <a data-link-type="dfn" href="editing.html#home-control-group">home control group</a> preceding <var>starting point</var>, if any; or else null 
         </td></tr><tr>
          <th><var>selection mechanism</var> is <i>sequential</i>
          </th><td> Let <var>candidate</var> be the first <a data-link-type="dfn" href="editing.html#suitable-sequentially-focusable-area">suitable sequentially focusable area</a> in the <a data-link-type="dfn" href="editing.html#home-sequential-focus-navigation-order">home sequential focus navigation order</a> following <var>starting point</var>, if
            any; or else null 
          </td><td> Let <var>candidate</var> be the last <a data-link-type="dfn" href="editing.html#suitable-sequentially-focusable-area">suitable sequentially focusable area</a> in the <a data-link-type="dfn" href="editing.html#home-sequential-focus-navigation-order">home sequential focus navigation order</a> preceding <var>starting point</var>, if
            any; or else null 
       </td></tr></tbody></table>
       <p>A <dfn data-dfn-type="dfn" data-noexport="" id="suitable-sequentially-focusable-area">suitable sequentially focusable area<a class="self-link" href="editing.html#suitable-sequentially-focusable-area"></a></dfn> is a <a data-link-type="dfn" href="editing.html#focusable">focusable area</a> whose <a data-link-type="dfn" href="editing.html#dom-anchor">DOM
    anchor</a> is not <a data-link-type="dfn" href="editing.html#inertness">inert</a> and that is in its <a data-link-type="dfn" href="editing.html#control-group">control group</a>’s <a data-link-type="dfn" href="editing.html#sequential-focus-navigation">sequential
    focus navigation order</a>.</p>
       <p>The <dfn data-dfn-type="dfn" data-noexport="" id="primary-control-group">primary control group<a class="self-link" href="editing.html#primary-control-group"></a></dfn> of a <a data-link-type="dfn" href="editing.html#control-group-owner">control group owner object</a> <var>X</var> is the <a data-link-type="dfn" href="editing.html#control-group">control group</a> of <var>X</var> if <var>X</var> has no <a data-link-type="dfn" href="editing.html#dialog-group">dialog group</a> or if its <a data-link-type="dfn" href="editing.html#dialog-group">dialog group</a> has no
    designated <a data-link-type="dfn" href="editing.html#focused-dialog-of-the-dialog-group">focused dialog of the dialog group</a>, otherwise, it is the <a data-link-type="dfn" href="editing.html#primary-control-group">primary
    control group</a> of <var>X</var>’s <a data-link-type="dfn" href="editing.html#dialog-group">dialog group</a>’s designated <a data-link-type="dfn" href="editing.html#focused-dialog-of-the-dialog-group">focused dialog of the dialog group</a>.</p>
       <p>The <dfn data-dfn-type="dfn" data-noexport="" id="home-control-group">home control group<a class="self-link" href="editing.html#home-control-group"></a></dfn> is the <a data-link-type="dfn" href="editing.html#control-group">control group</a> to which <var>starting point</var> belongs.</p>
       <p>The <dfn data-dfn-type="dfn" data-noexport="" id="home-sequential-focus-navigation-order">home sequential focus navigation order<a class="self-link" href="editing.html#home-sequential-focus-navigation-order"></a></dfn> is the <a data-link-type="dfn" href="editing.html#sequential-focus-navigation">sequential focus
    navigation order</a> to which <var>starting point</var> belongs.</p>
       <p class="note" role="note"> The <a data-link-type="dfn" href="editing.html#home-sequential-focus-navigation-order">home sequential focus navigation order</a> is the <a data-link-type="dfn" href="editing.html#home-control-group">home
    control group</a>’s <a data-link-type="dfn" href="editing.html#sequential-focus-navigation">sequential focus navigation order</a>, but is only used when the <var>starting point</var> is in that <a data-link-type="dfn" href="editing.html#sequential-focus-navigation">sequential focus navigation order</a> (when it’s not, <var>selection mechanism</var> will be <i>DOM</i>). </p>
      </li><li>
       <p>If <var>candidate</var> is a <a data-link-type="dfn" href="browsers.html#browsing-context-container">browsing context container</a>, then let <var>new candidate</var> be the result of running the <a data-link-type="dfn" href="editing.html#sequential-navigation-search-algorithm">sequential navigation search
    algorithm</a> with <var>candidate</var>’s <a data-link-type="dfn" href="browsers.html#nested-browsing-contexts">nested browsing context</a> as
    the first argument, <var>direction</var> as the second, and <i>sequential</i> as the third.</p>
       <p>If <var>new candidate</var> is null, then let <var>starting point</var> be <var>candidate</var>, and return to the top of this algorithm. Otherwise, let <var>candidate</var> be <var>new candidate</var>.</p>
      </li><li>Return <var>candidate</var>.
     </li></ol>
    </div>
    <h4 class="heading settled" data-level="5.4.6" id="focus-management-apis"><span class="secno">5.4.6. </span><span class="content">Focus management APIs</span><a class="self-link" href="editing.html#focus-management-apis"></a></h4>
    <dl class="domintro">
     <dt><var>document</var> . <code>activeElement</code>
     </dt><dd>
      <p>Returns the deepest element in the document through which or to which key events are being
    routed. This is, roughly speaking, the focused element in the document.</p>
      <p>For the purposes of this API, when a <a data-link-type="dfn" href="browsers.html#child-browsing-context">child browsing context</a> is focused, its <a data-link-type="dfn" href="browsers.html#browsing-context-container">browsing context container</a> is <a data-link-type="dfn" href="editing.html#focused">focused</a> in the <a data-link-type="dfn" href="browsers.html#parent-browsing-context">parent browsing context</a>. For example, if the user moves the focus to a text field
    in an <code><a data-link-type="element" href="semantics.html#elementdef-iframe">iframe</a></code>, the <code>iframe</code> is the element returned by the <code>activeElement</code> API in the <code>iframe</code>’s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-node-document">node document</a>.</p>
     </dd><dt><var>document</var> . <code>hasFocus</code>()
     </dt><dd>
      <p>Returns true if key events are being routed through or to the document; otherwise, returns
    false. Roughly speaking, this corresponds to the document, or a document nested inside this
    one, being focused.</p>
     </dd><dt><var>window</var> . <code>focus</code>()
     </dt><dd>
      <p>Moves the focus to the window’s <a data-link-type="dfn" href="browsers.html#browsing-context">browsing context</a>, if any.</p>
     </dd><dt><var>element</var> . <code>focus</code>()
     </dt><dd>
      <p>Moves the focus to the element.</p>
      <p>If the element is a <a data-link-type="dfn" href="browsers.html#browsing-context-container">browsing context container</a>, moves the focus to the <a data-link-type="dfn" href="browsers.html#nested-browsing-contexts">nested browsing context</a> instead.</p>
     </dd><dt><var>element</var> . <code>blur</code>()
     </dt><dd>
      <p>Moves the focus to the viewport. Use of this method is discouraged; if you want to focus the
    viewport, call the <code>focus()</code> method on the <code>Document</code>’s root element.</p>
      <p>Do not use this method to hide the focus ring if you find the focus ring unsightly. Instead,
    use a CSS rule to override the <a class="property" data-link-type="propdesc" href="http://www.w3.org/TR/css3-ui/#propdef-outline">outline</a> property, and provide a different way to show what
    element is focused. Be aware that if an alternative focusing style isn’t made available, the
    page will be significantly less usable for people who primarily navigate pages using a keyboard,
    or those with reduced vision who use focus outlines to help them navigate the page.</p>
      <div class="example" id="example-267407fd">
       <a class="self-link" href="editing.html#example-267407fd"></a> For example, to hide the outline from links and instead use a yellow background to indicate
      focus, you could use: 
<pre class="highlight"><span class="nt">:link:focus, :visited:focus </span><span class="p">{</span> <span class="k">outline</span><span class="p">:</span> none<span class="p">;</span> <span class="k">background</span><span class="p">:</span> yellow<span class="p">;</span> <span class="k">color</span><span class="p">:</span> black<span class="p">;</span> <span class="p">}</span></pre>
      </div>
      <p>Do not use this method to hide the focus ring. Do not use any
    other method that hides the focus ring from keyboard users, in
    particular do not use a CSS rule to override the <a class="property" data-link-type="propdesc" href="http://www.w3.org/TR/css3-ui/#propdef-outline">outline</a> property. Removal of the focus ring leads to serious accessibility
    issues for users who navigate and interact with interactive
    content using the keyboard.</p>
    </dd></dl>
    <div class="impl">
     <p>The <dfn data-dfn-type="dfn" data-noexport="" id="activeelement"><code>activeElement</code><a class="self-link" href="editing.html#activeelement"></a></dfn> attribute on <code>Document</code> objects must return the value returned by the following steps:</p>
     <ol>
      <li>Let <var>candidate</var> be the <code>Document</code> on which the method was
    invoked.
      </li><li>If <var>candidate</var> has a <a data-link-type="dfn" href="editing.html#dialog-group">dialog group</a> with a designated <a data-link-type="dfn" href="editing.html#focused-dialog-of-the-dialog-group">focused dialog of the dialog group</a>, then let <var>candidate</var> be the
    designated <a data-link-type="dfn" href="editing.html#focused-dialog-of-the-dialog-group">focused dialog of the dialog group</a>, and redo this step.
      </li><li>If <var>candidate</var> has a non-empty <a data-link-type="dfn" href="editing.html#control-group">control group</a>, let <var>candidate</var> be the designated <a data-link-type="dfn" href="editing.html#focused-area">focused area of the control
    group</a>. 
      </li><li>If <var>candidate</var> is a <a data-link-type="dfn" href="editing.html#focusable">focusable area</a>, let <var>candidate</var> be <var>candidate</var>’s <a data-link-type="dfn" href="editing.html#dom-anchor">DOM anchor</a>.
      </li><li>
       <p>If <var>candidate</var> is a <code>Document</code> that has a <code><a data-link-type="element" href="semantics.html#elementdef-body">body</a></code> element, then let <var>candidate</var> be <a href="semantics.html#the-body-element">the <code>body</code> element</a> of that <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document">Document</a></code>.</p>
       <p>Otherwise, if <var>candidate</var> is a <code>Document</code> that has a <a data-link-type="dfn" href="infrastructure.html#root-element">root
    element</a>, then let <var>candidate</var> be the <a data-link-type="dfn" href="infrastructure.html#root-element">root element</a> of that <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document">Document</a></code>.</p>
       <p>Otherwise, if <var>candidate</var> is a <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document">Document</a></code>, then let <var>candidate</var> be null.</p>
      </li><li>Return <var>candidate</var>.
     </li></ol>
     <p>The <dfn class="idl-code" data-dfn-for="Document" data-dfn-type="method" data-export="" id="dom-document-hasfocus"><code>hasFocus()</code><a class="self-link" href="editing.html#dom-document-hasfocus"></a></dfn> method on the <code>Document</code> object, when invoked, must return the result of running the <a data-link-type="dfn" href="editing.html#has-focus-steps">has focus
  steps</a> with the <code>Document</code> object as the argument.</p>
     <p>The <dfn class="idl-code" data-dfn-for="Window" data-dfn-type="method" data-export="" id="dom-window-focus"><code>focus()</code><a class="self-link" href="editing.html#dom-window-focus"></a></dfn> method on the <code>Window</code> object, when invoked, must run the <a data-link-type="dfn" href="editing.html#focusing-steps">focusing steps</a> with the <code>Window</code> object’s <a data-link-type="dfn" href="browsers.html#browsing-context">browsing context</a>. Additionally, if this <a data-link-type="dfn" href="browsers.html#browsing-context">browsing context</a> is a <a data-link-type="dfn" href="browsers.html#top-level-browsing-context">top-level browsing context</a>, user agents are encouraged to trigger some sort of
  notification to indicate to the user that the page is attempting to gain focus.</p>
     <p>The <dfn class="idl-code" data-dfn-for="Window" data-dfn-type="method" data-export="" id="dom-window-blur"><code>blur()</code><a class="self-link" href="editing.html#dom-window-blur"></a></dfn> method on the <code>Window</code> object, when invoked, provides a hint to the user agent that the script believes the user probably
  is not currently interested in the contents of the <a data-link-type="dfn" href="browsers.html#browsing-context">browsing context</a> of the <code>Window</code> object on which the method was invoked, but that the contents might become
  interesting again in the future.</p>
     <p>User agents are encouraged to ignore calls to this <code>blur()</code> method entirely.</p>
     <p class="note" role="note"> Historically, the <code>focus()</code> and <code>blur()</code> methods actually affected the system-level focus of the
  system widget (e.g. tab or window) that contained the <a data-link-type="dfn" href="browsers.html#browsing-context">browsing context</a>, but hostile
  sites widely abuse this behavior to the user’s detriment. </p>
     <p>The <code>focus()</code> method on elements, when invoked, must
  run the following algorithm:</p>
     <ol>
      <li>If the element is marked as <i>locked for focus</i>, then abort these steps.
      </li><li>Mark the element as <dfn data-dfn-type="dfn" data-noexport="" id="locked-for-focus">locked for focus<a class="self-link" href="editing.html#locked-for-focus"></a></dfn>.
      </li><li>Run the <a data-link-type="dfn" href="editing.html#focusing-steps">focusing steps</a> for the element.
      </li><li>Unmark the element as <i>locked for focus</i>.
     </li></ol>
     <p>The <code>blur()</code> method, when invoked, should run the <a data-link-type="dfn" href="editing.html#unfocusing-steps">unfocusing steps</a> for the element on which the method was called. User agents may
  selectively or uniformly ignore calls to this method for usability reasons.</p>
     <p class="example" id="example-14514a00"><a class="self-link" href="editing.html#example-14514a00"></a> For example, if the <code>blur()</code> method is unwisely
  being used to remove the focus ring for aesthetics reasons, the page would become unusable by
  keyboard users. Ignoring calls to this method would thus allow keyboard users to interact with the
  page. </p>
    </div>
    <h3 class="heading settled" data-level="5.5" id="assigning-keyboard-shortcuts"><span class="secno">5.5. </span><span class="content">Assigning keyboard shortcuts</span><a class="self-link" href="editing.html#assigning-keyboard-shortcuts"></a></h3>
    <h4 class="heading settled" data-level="5.5.1" id="assigning-keyboard-shortcuts-introduction"><span class="secno">5.5.1. </span><span class="content">Introduction</span><a class="self-link" href="editing.html#assigning-keyboard-shortcuts-introduction"></a></h4>
    <p><em>This section is non-normative.</em></p>
    <p>Each element that can be activated or focused can be assigned a single key combination to
  activate it, using the <code>accesskey</code> attribute.</p>
    <p>The exact shortcut is determined by the user agent, based on information about the user’s
  keyboard, what keyboard shortcuts already exist on the platform, and what other shortcuts have
  been specified on the page, using the information provided in the <code>accesskey</code> attribute as a guide.</p>
    <p>In order to ensure that a relevant keyboard shortcut is available on a wide variety of input
  devices, the author can provide a number of alternatives in the <code>accesskey</code> attribute.</p>
    <p>Each alternative consists of a single character, such as a letter or digit.</p>
    <p>User agents can provide users with a list of the keyboard shortcuts, but authors are encouraged
  to do so also. The <code>accessKeyLabel</code> IDL attribute returns a
  string representing the actual key combination assigned by the user agent.</p>
    <div class="example" id="example-c4f69b21">
     <a class="self-link" href="editing.html#example-c4f69b21"></a> In this example, an author has provided a button that can be invoked using a shortcut key. To
    support full keyboards, the author has provided "C" as a possible key. To support devices
    equipped only with numeric keypads, the author has provided "1" as another possibly key. 
<pre class="highlight"><span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">button</span> <span class="na">value=</span><span class="s">Collect</span> <span class="na">onclick=</span><span class="s">"collect()"</span> <span class="na">accesskey=</span><span class="s">"C 1"</span> <span class="na">id=</span><span class="s">c</span><span class="nt">&gt;</span></pre>
    </div>
    <div class="example" id="example-430408c6">
     <a class="self-link" href="editing.html#example-430408c6"></a> To tell the user what the shortcut key is, the author has this script here opted to explicitly
    add the key combination to the button’s label: 
<pre class="highlight"><span class="kd">function</span> <span class="nx">addShortcutKeyLabel</span><span class="p">(</span><span class="nx">button</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">button</span><span class="p">.</span><span class="nx">accessKeyLabel</span> <span class="o">!=</span> <span class="s1">''</span><span class="p">)</span>
    <span class="nx">button</span><span class="p">.</span><span class="nx">value</span> <span class="o">+=</span> <span class="s1">' ('</span> <span class="o">+</span> <span class="nx">button</span><span class="p">.</span><span class="nx">accessKeyLabel</span> <span class="o">+</span> <span class="s1">')'</span><span class="p">;</span>
<span class="p">}</span>

<span class="nx">addShortcutKeyLabel</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'c'</span><span class="p">));</span></pre>
     <p>Browsers on different platforms will show different labels, even for the same key combination,
    based on the convention prevalent on that platform. For example, if the key combination is the
    Control key, the Shift key, and the letter C, a Windows browser might display
    "<samp>Ctrl+Shift+C</samp>", whereas a Mac browser might display "<samp>^⇧C</samp>", while
    an Emacs browser might just display "<samp>C-C</samp>". Similarly, if the key combination is the
    Alt key and the Escape key, Windows might use "<samp>Alt+Esc</samp>", Mac might use
    "<samp>⌥⎋</samp>", and an Emacs browser might use "<samp>M-ESC</samp>" or
    "<samp>ESC ESC</samp>".</p>
     <p>In general, therefore, it is unwise to attempt to parse the value returned from the <code>accessKeyLabel</code> IDL attribute.</p>
    </div>
    <h4 class="heading settled" data-level="5.5.2" id="the-accesskey-attribute"><span class="secno">5.5.2. </span><span class="content">The <dfn data-dfn-for="global" data-dfn-type="element-attr" data-export="" id="element-attrdef-global-accesskey"><code>accesskey</code><a class="self-link" href="editing.html#element-attrdef-global-accesskey"></a></dfn> attribute</span><a class="self-link" href="editing.html#the-accesskey-attribute"></a></h4>
    <p>All <a data-link-type="dfn" href="infrastructure.html#html-element">html elements</a> may have the <code>accesskey</code> content attribute set. The <code>accesskey</code> attribute’s value is used
  by the user agent as a guide for creating a keyboard shortcut that activates or focuses the
  element.</p>
    <p>If specified, the value must be an <a data-link-type="dfn" href="infrastructure.html#ordered-set-of-unique-space-separated-tokens">ordered set of unique space-separated tokens</a> that are <a data-link-type="dfn" href="infrastructure.html#case-sensitive">case-sensitive</a>, each of which must be exactly one Unicode code point in
  length.</p>
    <div class="example" id="example-2d8e7edd">
     <a class="self-link" href="editing.html#example-2d8e7edd"></a> In the following example, a variety of links are given with access keys so that keyboard users
    familiar with the site can more quickly navigate to the relevant pages: 
<pre class="highlight"><span class="nt">&lt;nav&gt;</span>
  <span class="nt">&lt;p&gt;</span>
    <span class="nt">&lt;a</span> <span class="na">title=</span><span class="s">"Consortium Activities"</span> <span class="na">accesskey=</span><span class="s">"A"</span> <span class="na">href=</span><span class="s">"/Consortium/activities"</span><span class="nt">&gt;</span>Activities<span class="nt">&lt;/a&gt;</span> |
    <span class="nt">&lt;a</span> <span class="na">title=</span><span class="s">"Technical Reports and Recommendations"</span> <span class="na">accesskey=</span><span class="s">"T"</span> <span class="na">href=</span><span class="s">"/TR/"</span><span class="nt">&gt;</span>Technical Reports<span class="nt">&lt;/a&gt;</span> |
    <span class="nt">&lt;a</span> <span class="na">title=</span><span class="s">"Alphabetical Site Index"</span> <span class="na">accesskey=</span><span class="s">"S"</span> <span class="na">href=</span><span class="s">"/Consortium/siteindex"</span><span class="nt">&gt;</span>Site Index<span class="nt">&lt;/a&gt;</span> |
    <span class="nt">&lt;a</span> <span class="na">title=</span><span class="s">"About This Site"</span> <span class="na">accesskey=</span><span class="s">"B"</span> <span class="na">href=</span><span class="s">"/Consortium/"</span><span class="nt">&gt;</span>About Consortium<span class="nt">&lt;/a&gt;</span> |
    <span class="nt">&lt;a</span> <span class="na">title=</span><span class="s">"Contact Consortium"</span> <span class="na">accesskey=</span><span class="s">"C"</span> <span class="na">href=</span><span class="s">"/Consortium/contact"</span><span class="nt">&gt;</span>Contact<span class="nt">&lt;/a&gt;</span>
  <span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;/nav&gt;</span></pre>
    </div>
    <div class="example" id="example-ca53f94d">
     <a class="self-link" href="editing.html#example-ca53f94d"></a> In the following example, the search field is given two possible access keys, "s" and "0" (in
    that order). A user agent on a device with a full keyboard might pick <kbd><kbd>Ctrl</kbd>+<kbd>Alt</kbd>+<kbd>S</kbd></kbd> as the shortcut key,
    while a user agent on a small device with just a numeric keypad might pick just the plain
    unadorned key <kbd><kbd>0</kbd></kbd>: 
<pre class="highlight"><span class="nt">&lt;form</span> <span class="na">action=</span><span class="s">"/search"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;label&gt;</span>Search: <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"search"</span> <span class="na">name=</span><span class="s">"q"</span> <span class="na">accesskey=</span><span class="s">"s 0"</span><span class="nt">&gt;&lt;/label&gt;</span>
  <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"submit"</span><span class="nt">&gt;</span>
<span class="nt">&lt;/form&gt;</span></pre>
    </div>
    <div class="example" id="example-52be8e9d">
     <a class="self-link" href="editing.html#example-52be8e9d"></a> In the following example, a button has possible access keys described. A script then tries to
    update the button’s label to advertise the key combination the user agent selected. 
<pre class="highlight"><span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">submit</span> <span class="na">accesskey=</span><span class="s">"N @ 1"</span> <span class="na">value=</span><span class="s">"Compose"</span><span class="nt">&gt;</span>
...
<span class="nt">&lt;script&gt;</span>
<span class="kd">function</span> <span class="nx">labelButton</span><span class="p">(</span><span class="nx">button</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">button</span><span class="p">.</span><span class="nx">accessKeyLabel</span><span class="p">)</span>
    <span class="nx">button</span><span class="p">.</span><span class="nx">value</span> <span class="o">+=</span> <span class="s1">' ('</span> <span class="o">+</span> <span class="nx">button</span><span class="p">.</span><span class="nx">accessKeyLabel</span> <span class="o">+</span> <span class="s1">')'</span><span class="p">;</span>
<span class="p">}</span>
<span class="kd">var</span> <span class="nx">inputs</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="s1">'input'</span><span class="p">);</span>
<span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">inputs</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">inputs</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">type</span> <span class="o">==</span> <span class="s2">"submit"</span><span class="p">)</span>
    <span class="nx">labelButton</span><span class="p">(</span><span class="nx">inputs</span><span class="p">[</span><span class="nx">i</span><span class="p">]);</span>
<span class="p">}</span>
<span class="nt">&lt;/script&gt;</span></pre>
     <p>On one user agent, the button’s label might become "<samp>Compose (⌘N)</samp>". On
    another, it might become "<samp>Compose (Alt+⇧+1)</samp>". If the user agent doesn’t
    assign a key, it will be just "<samp>Compose</samp>". The exact string depends on what the <a data-link-type="dfn" href="editing.html#assigned-access-key">assigned access key</a> is, and on how the user agent represents that key
    combination.</p>
    </div>
    <div class="impl">
     <h4 class="heading settled" data-level="5.5.3" id="assigning-keyboard-shortcuts-processing-model"><span class="secno">5.5.3. </span><span class="content">Processing model</span><a class="self-link" href="editing.html#assigning-keyboard-shortcuts-processing-model"></a></h4>
     <p>An element’s <dfn data-dfn-type="dfn" data-noexport="" id="assigned-access-key">assigned access key<a class="self-link" href="editing.html#assigned-access-key"></a></dfn> is a key combination derived from the element’s <code>accesskey</code> content attribute. Initially, an element must not
  have an <a data-link-type="dfn" href="editing.html#assigned-access-key">assigned access key</a>.</p>
     <p>Whenever an element’s <code>accesskey</code> attribute is set, changed,
  or removed, the user agent must update the element’s <a data-link-type="dfn" href="editing.html#assigned-access-key">assigned access key</a> by running
  the following steps:</p>
     <ol>
      <li>If the element has no <code>accesskey</code> attribute, then skip
    to the <i>fallback</i> step below.
      </li><li>Otherwise, <a data-link-type="dfn" href="infrastructure.html#split-a-string-on-spaces">split the attribute’s value on
    spaces</a>, and let <var>keys</var> be the resulting tokens.
      </li><li>
       <p>For each value in <var>keys</var> in turn, in the order the tokens appeared in the
    attribute’s value, run the following substeps:</p>
       <ol>
        <li>If the value is not a string exactly one Unicode code point in length, then skip the
      remainder of these steps for this value.
        </li><li>If the value does not correspond to a key on the system’s keyboard, then skip the
      remainder of these steps for this value.
        </li><li>If the user agent can find a mix of zero or more modifier keys that, combined with the
      key that corresponds to the value given in the attribute, can be used as the access key, then
      the user agent may assign that combination of keys as the element’s <a data-link-type="dfn" href="editing.html#assigned-access-key">assigned access
      key</a> and abort these steps. 
       </li></ol>
      </li><li><i>Fallback</i>: Optionally, the user agent may assign a key combination of its choosing
    as the element’s <a data-link-type="dfn" href="editing.html#assigned-access-key">assigned access key</a> and then abort these steps.
      </li><li>If this step is reached, the element has no <a data-link-type="dfn" href="editing.html#assigned-access-key">assigned access key</a>.
     </li></ol>
     <p>Once a user agent has selected and assigned an access key for an element, the user agent should
  not change the element’s <a data-link-type="dfn" href="editing.html#assigned-access-key">assigned access key</a> unless the <code>accesskey</code> content attribute is changed or the element is moved to
  another <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document">Document</a></code>.</p>
     <p>When the user presses the key combination corresponding to the <a data-link-type="dfn" href="editing.html#assigned-access-key">assigned access key</a> for an element, if the element defines a command, the
  command’s <a data-link-type="facet" href="semantics.html#facetdef-menuitem-hidden-state">Hidden State</a> facet is false (visible),
  the command’s <a data-link-type="facet" href="semantics.html#facetdef-menuitem-disabled-state">Disabled State</a> facet is also false
  (enabled), the element is <a data-link-type="dfn" href="infrastructure.html#in-the-document">in a <code>Document</code></a> that has an associated <a data-link-type="dfn" href="browsers.html#browsing-context">browsing context</a>, and neither the element nor any of its ancestors has a <code>hidden</code> attribute specified, then the user agent must trigger the <a data-link-type="dfn" href="semantics.html#action">Action</a> of the command.</p>
     <p class="note" role="note"> User agents might expose elements that have
  an <code>accesskey</code> attribute in other ways as well, e.g. in a menu
  displayed in response to a specific key combination. </p>
     <hr>
     <p>The <dfn class="idl-code" data-dfn-for="HTMLElement" data-dfn-type="attribute" data-export="" id="dom-htmlelement-accesskey"><code>accessKey</code><a class="self-link" href="editing.html#dom-htmlelement-accesskey"></a></dfn> IDL attribute must <a data-link-type="dfn" href="infrastructure.html#reflection">reflect</a> the <code>accesskey</code> content attribute.</p>
     <p>The <dfn class="idl-code" data-dfn-for="HTMLElement" data-dfn-type="attribute" data-export="" id="dom-htmlelement-accesskeylabel"><code>accessKeyLabel</code><a class="self-link" href="editing.html#dom-htmlelement-accesskeylabel"></a></dfn> IDL attribute must return
  a string that represents the element’s <a data-link-type="dfn" href="editing.html#assigned-access-key">assigned access key</a>, if any. If the element
  does not have one, then the IDL attribute must return the empty string.</p>
    </div>
    <h3 class="heading settled" data-level="5.6" id="user-interaction-editing"><span class="secno">5.6. </span><span class="content">Editing</span><a class="self-link" href="editing.html#user-interaction-editing"></a></h3>
    <h4 class="heading settled" data-level="5.6.1" id="making-document-regions-editable-the-contenteditable-content-attribute"><span class="secno">5.6.1. </span><span class="content">Making document regions editable: The <code>contenteditable</code> content attribute</span><a class="self-link" href="editing.html#making-document-regions-editable-the-contenteditable-content-attribute"></a></h4>
<pre class="idl" data-highlight="webidl">[NoInterfaceObject]
interface <dfn class="idl-code" data-dfn-for="ElementContentEditable" data-dfn-type="interface" data-export="" id="elementcontenteditable-elementcontenteditable">ElementContentEditable<a class="self-link" href="editing.html#elementcontenteditable-elementcontenteditable"></a></dfn> {
  attribute DOMString <a class="idl-code" data-link-type="attribute" data-type="DOMString " href="editing.html#dom-elementcontenteditable-contenteditable">contentEditable</a>;
  readonly attribute boolean <a class="idl-code" data-link-type="attribute" data-readonly="" data-type="boolean " href="editing.html#dom-elementcontenteditable-iscontenteditable">isContentEditable</a>;
};
</pre>
    <p>The <dfn data-dfn-type="dfn" data-noexport="" id="contenteditable"><code>contenteditable</code><a class="self-link" href="editing.html#contenteditable"></a></dfn> content attribute is an <a data-link-type="dfn" href="infrastructure.html#enumerated-attributes">enumerated attribute</a> whose keywords are the empty string, <code>true</code>,
  and <code>false</code>. The empty string and the <code>true</code> keyword map
  to the <i>true</i> state. The <code>false</code> keyword maps to the <i>false</i> state.
  In addition, there is a third state, the <i>inherit</i> state, which is the <i>missing value default</i> (and the <i>invalid value default</i>).</p>
    <p>The <i>true</i> state indicates that the element is editable. The <i>inherit</i> state
  indicates that the element is editable if its parent is. The <i>false</i> state indicates that the
  element is not editable.</p>
    <dl class="domintro">
     <dt><var>element</var> . <code>contentEditable</code> [ = <var>value</var> ]
     </dt><dd>
      <p>Returns "<code>true</code>", "<code>false</code>", or "<code>inherit</code>", based on the state of the <code>contenteditable</code> attribute.</p>
      <p>Can be set, to change that state.</p>
      <p>Throws a <code>SyntaxError</code> exception if the new value isn’t one of those strings.</p>
     </dd><dt><var>element</var> . <code>isContentEditable</code>
     </dt><dd>
      <p>Returns true if the element is editable; otherwise, returns false.</p>
    </dd></dl>
    <div class="impl">
     <p>The <dfn class="idl-code" data-dfn-for="ElementContentEditable" data-dfn-type="attribute" data-export="" id="dom-elementcontenteditable-contenteditable"><code>contentEditable</code><a class="self-link" href="editing.html#dom-elementcontenteditable-contenteditable"></a></dfn> IDL attribute, on
  getting, must return the string "<code>true</code>" if the content attribute is set to
  the true state, "<code>false</code>" if the content attribute is set to the false state,
  and "<code>inherit</code>" otherwise. On setting, if the new value is an <a data-link-type="dfn" href="infrastructure.html#ascii-case-insensitive">ASCII
  case-insensitive</a> match for the string "<code>inherit</code>" then the content
  attribute must be removed, if the new value is an <a data-link-type="dfn" href="infrastructure.html#ascii-case-insensitive">ASCII case-insensitive</a> match for
  the string "<code>true</code>" then the content attribute must be set to the string
  "<code>true</code>", if the new value is an <a data-link-type="dfn" href="infrastructure.html#ascii-case-insensitive">ASCII case-insensitive</a> match for
  the string "<code>false</code>" then the content attribute must be set to the string
  "<code>false</code>", and otherwise the attribute setter must throw a <code>SyntaxError</code> exception.</p>
     <p>The <dfn class="idl-code" data-dfn-for="ElementContentEditable" data-dfn-type="attribute" data-export="" id="dom-elementcontenteditable-iscontenteditable"><code>isContentEditable</code><a class="self-link" href="editing.html#dom-elementcontenteditable-iscontenteditable"></a></dfn> IDL attribute, on
  getting, must return true if the element is either an <a data-link-type="dfn" href="editing.html#editing-host">editing host</a> or <a data-link-type="dfn" href="editing.html#editable">editable</a>, and false otherwise.</p>
    </div>
    <h4 class="heading settled" data-level="5.6.2" id="making-entire-documents-editable-the-designmode-idl-attribute"><span class="secno">5.6.2. </span><span class="content">Making entire documents editable: The <code>designMode</code> IDL attribute</span><a class="self-link" href="editing.html#making-entire-documents-editable-the-designmode-idl-attribute"></a></h4>
    <div class="impl">
     <p>Documents have a <dfn data-dfn-type="dfn" data-noexport="" id="designmode"><code>designMode</code><a class="self-link" href="editing.html#designmode"></a></dfn>, which can be either enabled or
  disabled.</p>
    </div>
    <dl class="domintro">
     <dt><var>document</var> . <code>designMode</code> [ = <var>value</var> ]
     </dt><dd>
      <p>Returns "<code>on</code>" if the document is editable, and "<code>off</code>" if it isn’t.</p>
      <p>Can be set, to change the document’s current state. This focuses the document and resets the
    selection in that document.</p>
    </dd></dl>
    <div class="impl">
     <p>The <code>designMode</code> IDL attribute on the <code>Document</code> object takes two values, "<code>on</code>" and "<code>off</code>". On setting, the new value must be compared in an <a data-link-type="dfn" href="infrastructure.html#ascii-case-insensitive">ASCII
  case-insensitive</a> manner to these two values; if it matches the "<code>on</code>"
  value, then <code>designMode</code> must be enabled, and if it
  matches the "<code>off</code>" value, then <code>designMode</code> must be disabled. Other values must be
  ignored.</p>
     <p>On getting, if <code>designMode</code> is enabled, the IDL
  attribute must return the value "<code>on</code>"; otherwise it is disabled, and the
  attribute must return the value "<code>off</code>".</p>
     <p>The last state set must persist until the document is destroyed or the state is changed.
  Initially, documents must have their <code>designMode</code> disabled.</p>
     <p>When the <code>designMode</code> changes from being disabled to
  being enabled, the user agent must <a data-link-type="dfn" href="infrastructure.html#immediately">immediately</a> reset the document’s <a data-link-type="dfn" href="editing.html#active-range">active range</a>’s
  start and end boundary points to be at the start of the <code>Document</code> and then run the <a data-link-type="dfn" href="editing.html#focusing-steps">focusing steps</a> for the root element of the <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document">Document</a></code>, if any.</p>
    </div>
    <h4 class="heading settled" data-level="5.6.3" id="best-practices-for-in-page-editors"><span class="secno">5.6.3. </span><span class="content">Best practices for in-page editors</span><a class="self-link" href="editing.html#best-practices-for-in-page-editors"></a></h4>
    <p>Authors are encouraged to set the <a class="property" data-link-type="propdesc" href="http://www.w3.org/TR/css-text-3/#white-space">white-space</a> property on <a data-link-type="dfn" href="editing.html#editing-host">editing
  hosts</a> and on markup that was originally created through these editing mechanisms to the
  value <a class="css" data-link-type="maybe" href="https://drafts.csswg.org/css-text-3/#valdef-white-space-pre-wrap">pre-wrap</a>. Default HTML whitespace handling is not well suited to WYSIWYG editing, and line
  wrapping will not work correctly in some corner cases if <a class="property" data-link-type="propdesc" href="http://www.w3.org/TR/css-text-3/#white-space">white-space</a> is left at its default
  value.</p>
    <div class="example" id="example-3d07c1c7">
     <a class="self-link" href="editing.html#example-3d07c1c7"></a> As an example of problems that occur if the default <span class="css">normal</span> value is used instead, consider
    the case of the user typing "<kbd>yellow␣␣ball</kbd>", with two spaces (here
    represented by "␣") between the words. With the editing rules in place for the default
    value of <a class="property" data-link-type="propdesc" href="http://www.w3.org/TR/css-text-3/#white-space">white-space</a> (<span class="css">normal</span>), the resulting markup will either consist of
    "<samp>yellow&amp;nbsp;&nbsp;ball</samp>" or "<samp>yellow&nbsp;&amp;nbsp;ball</samp>"; i.e.,
    there will be a non-breaking space between the two words in addition to the regular space. This
    is necessary because the <span class="css">normal</span> value for <a class="property" data-link-type="propdesc" href="http://www.w3.org/TR/css-text-3/#white-space">white-space</a> requires adjacent regular spaces to be
    collapsed together. 
     <p>In the former case, "<samp>yellow⍽</samp>" might wrap to the next line ("⍽"
    being used here to represent a non-breaking space) even though "<samp>yellow</samp>" alone might
    fit at the end of the line; in the latter case, "<samp>⍽ball</samp>", if wrapped to the
    start of the line, would have visible indentation from the non-breaking space.</p>
     <p>When <a class="property" data-link-type="propdesc" href="http://www.w3.org/TR/css-text-3/#white-space">white-space</a> is set to <a class="css" data-link-type="maybe" href="https://drafts.csswg.org/css-text-3/#valdef-white-space-pre-wrap">pre-wrap</a>, however, the editing rules will instead simply put
    two regular spaces between the words, and should the two words be split at the end of a line, the
    spaces would be neatly removed from the rendering.</p>
    </div>
    <h4 class="heading settled" data-level="5.6.4" id="editing-apis"><span class="secno">5.6.4. </span><span class="content">Editing APIs</span><a class="self-link" href="editing.html#editing-apis"></a></h4>
    <p>The definition of the terms <dfn data-dfn-type="dfn" data-noexport="" id="active-range">active range<a class="self-link" href="editing.html#active-range"></a></dfn>, <dfn data-dfn-type="dfn" data-noexport="" id="editing-host">editing host<a class="self-link" href="editing.html#editing-host"></a></dfn>, and <dfn data-dfn-type="dfn" data-noexport="" id="editable">editable<a class="self-link" href="editing.html#editable"></a></dfn>, the user interface requirements of elements that are <a data-link-type="dfn" href="editing.html#editing-host">editing hosts</a> or <a data-link-type="dfn" href="editing.html#editable">editable</a>, the</p>
    <p><dfn class="css" data-dfn-type="function" data-export="" id="funcdef-execcommand"><code>execCommand()</code><a class="self-link" href="editing.html#funcdef-execcommand"></a></dfn>, <dfn class="css" data-dfn-type="function" data-export="" id="funcdef-querycommandenabled"><code>queryCommandEnabled()</code><a class="self-link" href="editing.html#funcdef-querycommandenabled"></a></dfn>, <dfn class="css" data-dfn-type="function" data-export="" id="funcdef-querycommandindeterm"><code>queryCommandIndeterm()</code><a class="self-link" href="editing.html#funcdef-querycommandindeterm"></a></dfn>, <dfn class="css" data-dfn-type="function" data-export="" id="funcdef-querycommandstate"><code>queryCommandState()</code><a class="self-link" href="editing.html#funcdef-querycommandstate"></a></dfn>, <dfn class="css" data-dfn-type="function" data-export="" id="funcdef-querycommandsupported"><code>queryCommandSupported()</code><a class="self-link" href="editing.html#funcdef-querycommandsupported"></a></dfn>, and <dfn class="css" data-dfn-type="function" data-export="" id="funcdef-querycommandvalue"><code>queryCommandValue()</code><a class="self-link" href="editing.html#funcdef-querycommandvalue"></a></dfn></p>
    <p>methods, text selections, and the <dfn data-dfn-type="dfn" data-noexport="" id="delete-the-selection">delete the selection<a class="self-link" href="editing.html#delete-the-selection"></a></dfn> algorithm are defined in the
  HTML Editing APIs specification. The interaction of editing and the undo/redo features in user
  agents is defined by the UndoManager and DOM Transaction specification. <a data-link-type="biblio" href="references.html#biblio-editing">[EDITING]</a> <a data-link-type="biblio" href="references.html#biblio-undo">[UNDO]</a></p>
    <h4 class="heading settled" data-level="5.6.5" id="spelling-and-grammar-checking"><span class="secno">5.6.5. </span><span class="content">Spelling and grammar checking</span><a class="self-link" href="editing.html#spelling-and-grammar-checking"></a></h4>
    <div class="impl">
     <p>User agents can support the checking of spelling and grammar of editable text, either in form
  controls (such as the value of <code><a data-link-type="element" href="semantics.html#elementdef-textarea">textarea</a></code> elements), or in elements in an <a data-link-type="dfn" href="editing.html#editing-host">editing
  host</a> (e.g. using <code>contenteditable</code>).</p>
     <p>For each element, user agents must establish a <dfn data-dfn-type="dfn" data-noexport="" id="default-behavior">default behavior<a class="self-link" href="editing.html#default-behavior"></a></dfn>, either through
  defaults or through preferences expressed by the user. There are
  three possible default behaviors for each element:</p>
     <dl>
      <dt><dfn data-dfn-type="dfn" data-noexport="" id="true-by-default">true-by-default<a class="self-link" href="editing.html#true-by-default"></a></dfn> 
      </dt><dd>The element will be checked for spelling and grammar if its contents are editable. 
      </dd><dt><dfn data-dfn-type="dfn" data-noexport="" id="false-by-default">false-by-default<a class="self-link" href="editing.html#false-by-default"></a></dfn> 
      </dt><dd>The element will never be checked for spelling and grammar. 
      </dd><dt><dfn data-dfn-type="dfn" data-noexport="" id="inherit-by-default">inherit-by-default<a class="self-link" href="editing.html#inherit-by-default"></a></dfn> 
      </dt><dd>The element’s default behavior is the same as its parent element’s. Elements that have no
    parent element cannot have this as their default behavior. 
     </dd></dl>
     <hr>
    </div>
    <p>The <dfn data-dfn-for="global" data-dfn-type="element-attr" data-export="" id="element-attrdef-global-spellcheck"><code>spellcheck</code><a class="self-link" href="editing.html#element-attrdef-global-spellcheck"></a></dfn> attribute is an <a data-link-type="dfn" href="infrastructure.html#enumerated-attributes">enumerated
  attribute</a> whose keywords are the empty string, <code>true</code> and <code>false</code>. The empty string and the <code>true</code> keyword map to the <i>true</i> state. The <code>false</code> keyword maps to the <i>false</i> state. In
  addition, there is a third state, the <i>default</i> state, which is the <i>missing value default</i> (and the <i>invalid value default</i>).</p>
    <p class="note" role="note"> The <i>true</i> state indicates that the element is to have its spelling and
  grammar checked. The <i>default</i> state indicates that the element is to act according to a
  default behavior, possibly based on the parent element’s own <code>spellcheck</code> state, as defined below. The <i>false</i> state
  indicates that the element is not to be checked. </p>
    <div class="impl">
     <hr>
    </div>
    <dl class="domintro">
     <dt><var>element</var> . <code>spellcheck</code> [ = <var>value</var> ]
     </dt><dd>
      <p>Returns true if the element is to have its spelling and grammar checked; otherwise, returns
    false.</p>
      <p>Can be set, to override the default and set the <code>spellcheck</code> content attribute.</p>
     </dd><dt><var>element</var> . <code>forceSpellCheck</code>()
     </dt><dd>
      <p>Forces the user agent to report spelling and grammar errors on the element (if checking is
    enabled), even if the user has never focused the element. (If the method is not invoked, user
    agents can hide errors in text that wasn’t just entered by the user.)</p>
    </dd></dl>
    <div class="impl">
     <p>The <code class="idl"><a data-link-type="idl" href="dom.html#dom-htmlelement-spellcheck">spellcheck</a></code> IDL attribute, on getting, must
  return true if the element’s <code><a data-link-type="element-attr" href="editing.html#element-attrdef-global-spellcheck">spellcheck</a></code> content attribute is
  in the <i>true</i> state, or if the element’s <code><a data-link-type="element-attr" href="editing.html#element-attrdef-global-spellcheck">spellcheck</a></code> content attribute is in the <i>default</i> state and the element’s <a data-link-type="dfn" href="editing.html#default-behavior">default behavior</a> is <a data-link-type="dfn" href="editing.html#true-by-default">true-by-default</a>, or if the element’s <code><a data-link-type="element-attr" href="editing.html#element-attrdef-global-spellcheck">spellcheck</a></code> content attribute is in the <i>default</i> state and the
  element’s <a data-link-type="dfn" href="editing.html#default-behavior">default behavior</a> is <a data-link-type="dfn" href="editing.html#inherit-by-default">inherit-by-default</a> and the element’s parent
  element’s <code class="idl"><a data-link-type="idl" href="dom.html#dom-htmlelement-spellcheck">spellcheck</a></code> IDL attribute would return true;
  otherwise, if none of those conditions applies, then the attribute must instead return false.</p>
     <p class="note" role="note"> The <code class="idl"><a data-link-type="idl" href="dom.html#dom-htmlelement-spellcheck">spellcheck</a></code> IDL attribute is not affected
  by user preferences that override the <code><a data-link-type="element-attr" href="editing.html#element-attrdef-global-spellcheck">spellcheck</a></code> content
  attribute, and therefore might not reflect the actual spellchecking state. </p>
     <p>On setting, if the new value is true, then the element’s <code><a data-link-type="element-attr" href="editing.html#element-attrdef-global-spellcheck">spellcheck</a></code> content attribute must be set to the literal string
  "<code>true</code>", otherwise it must be set to the literal string "<code>false</code>".</p>
     <hr>
     <p>User agents must only consider the following pieces of text as checkable for the purposes of
  this feature:</p>
     <ul>
      <li>The <a data-link-type="dfn" href="semantics.html#forms-value">value</a> of <code><a data-link-type="element" href="semantics.html#elementdef-input">input</a></code> elements whose <code>type</code> attributes are in the <a data-link-type="element-state" href="semantics.html#element-statedef-input-text">Text</a>, <a data-link-type="element-state" href="semantics.html#element-statedef-input-search">Search</a>, <a data-link-type="element-state" href="semantics.html#element-statedef-input-url">URL</a>, or <a data-link-type="element-state" href="semantics.html#element-statedef-input-e-mail">E-mail</a> states and that are <i>mutable</i> (i.e. that do not have the <code>readonly</code> attribute specified and that are not disabled).
      </li><li>The <a data-link-type="dfn" href="semantics.html#forms-value">value</a> of <code><a data-link-type="element" href="semantics.html#elementdef-textarea">textarea</a></code> elements that do not
    have a <code>readonly</code> attribute and that are not disabled.
      </li><li>Text in <code>Text</code> nodes that are children of <a data-link-type="dfn" href="editing.html#editing-host">editing
    hosts</a> or <a data-link-type="dfn" href="editing.html#editable">editable</a> elements.
      </li><li>Text in attributes of <a data-link-type="dfn" href="editing.html#editable">editable</a> elements.
     </li></ul>
     <p>For text that is part of a <code>Text</code> node, the element with which the text is
  associated is the element that is the immediate parent of the first character of the word,
  sentence, or other piece of text. For text in attributes, it is the attribute’s element. For the
  values of <code>input</code> and <code><a data-link-type="element" href="semantics.html#elementdef-textarea">textarea</a></code> elements, it is the element itself.</p>
     <p>To determine if a word, sentence, or other piece of text in an applicable element (as defined
  above) is to have spelling- and grammar-checking enabled, the user agent must use the following
  algorithm:</p>
     <ol>
      <li>If the user has disabled the checking for this text, then the checking is disabled.
      </li><li>Otherwise, if the user has forced the checking for this text to always be enabled, then the
    checking is enabled.
      </li><li>Otherwise, if the element with which the text is associated has a <code>spellcheck</code> content attribute, then: if that attribute is in the <i>true</i> state, then checking is enabled; otherwise, if that attribute is in the <i>false</i> state, then checking is disabled.
      </li><li>Otherwise, if there is an ancestor element with a <code>spellcheck</code> content attribute that is not in the <i>default</i> state, then: if the nearest such ancestor’s <code>spellcheck</code> content attribute is in the <i>true</i> state, then checking is enabled; otherwise, checking is
    disabled.
      </li><li>Otherwise, if the element’s <a data-link-type="dfn" href="editing.html#default-behavior">default behavior</a> is <a data-link-type="dfn" href="editing.html#true-by-default">true-by-default</a>, then checking is
    enabled.
      </li><li>Otherwise, if the element’s <a data-link-type="dfn" href="editing.html#default-behavior">default behavior</a> is <a data-link-type="dfn" href="editing.html#false-by-default">false-by-default</a>, then checking is
    disabled.
      </li><li>Otherwise, if the element’s parent element has <em>its</em> checking enabled, then checking
    is enabled.
      </li><li>Otherwise, checking is disabled.
     </li></ol>
     <p>If the checking is enabled for a word/sentence/text, the user agent should indicate spelling
  and grammar errors in that text. User agents should take into account the other semantics given in
  the document when suggesting spelling and grammar corrections. User agents may use the language of
  the element to determine what spelling and grammar rules to use, or may use the user’s preferred
  language settings. user agents should use <code><a data-link-type="element" href="semantics.html#elementdef-input">input</a></code> element attributes such as <code>pattern</code> to ensure that the resulting value is valid, where
  possible.</p>
     <p>If checking is disabled, the user agent should not indicate spelling or grammar errors for that
  text.</p>
     <p>Even when checking is enabled, user agents may opt to not report spelling or grammar errors in
  text that the user agent deems the user has no interest in having checked (e.g. text that was
  already present when the page was loaded, or that the user did not type, or text in controls that
  the user has not focused, or in parts of e-mail addresses that the user agent is not confident
  were misspelt). The <dfn class="css" data-dfn-type="function" data-export="" id="funcdef-forcespellcheck"><code>forceSpellCheck()</code><a class="self-link" href="editing.html#funcdef-forcespellcheck"></a></dfn> method,
  when invoked on an element, must override this behavior, forcing the user agent to consider all
  spelling and grammar errors in text in that element for which checking is enabled to be of
  interest to the user.</p>
     <div class="example" id="example-abc6df72">
      <a class="self-link" href="editing.html#example-abc6df72"></a> The element with ID "a" in the following example would be the one used to determine if the
    word "Hello" is checked for spelling errors. In this example, it would not be. 
<pre class="highlight"><span class="nt">&lt;div</span> <span class="na">contenteditable=</span><span class="s">"true"</span><span class="nt">&gt;</span>
<span class="nt">&lt;span</span> <span class="na">spellcheck=</span><span class="s">"false"</span><span class="nt">&gt;</span>Hell<span class="nt">&lt;/span&gt;&lt;em&gt;</span>o!<span class="nt">&lt;/em&gt;</span>
<span class="nt">&lt;/div&gt;</span></pre>
      <p>The element with ID "b" in the following example would have checking enabled (the leading
    space character in the attribute’s value on the <code><a data-link-type="element" href="semantics.html#elementdef-input">input</a></code> element causes the attribute
    to be ignored, so the ancestor’s value is used instead, regardless of the default).</p>
<pre class="bad">&lt;p spellcheck="true"&gt;&lt;label&gt;Name: &lt;input spellcheck=" false"&gt;&lt;/label&gt;
&lt;/p&gt;</pre>
     </div>
    </div>
    <p class="note" role="note"> This specification does not define the user interface for spelling and grammar
  checkers. A user agent could offer on-demand checking, could perform continuous checking while the
  checking is enabled, or could use other interfaces. </p>
    <h3 class="heading settled" data-level="5.7" id="drag-and-drop"><span class="secno">5.7. </span><span class="content">Drag and drop</span><a class="self-link" href="editing.html#drag-and-drop"></a></h3>
    <p>This section defines an event-based drag-and-drop mechanism.</p>
    <p>This specification does not define exactly what a <em>drag-and-drop operation</em> actually
  is.</p>
    <p>On a visual medium with a pointing device, a drag operation could be the default action of a <code>mousedown</code> event that is followed by a series of <code>mousemove</code> events, and the drop could be triggered by the mouse
  being released.</p>
    <p>When using an input modality other than a pointing device, users would probably have to
  explicitly indicate their intention to perform a drag-and-drop operation, stating what they wish
  to drag and where they wish to drop it, respectively.</p>
    <div class="impl">
     <p>However it is implemented, drag-and-drop operations must have a starting point (e.g. where the
  mouse was clicked, or the start of the selection or element that was selected for the drag), may
  have any number of intermediate steps (elements that the mouse moves over during a drag, or
  elements that the user picks as possible drop points as he cycles through possibilities), and must
  either have an end point (the element above which the mouse button was released, or the element
  that was finally selected), or be canceled. The end point must be the last element selected as a
  possible drop point before the drop occurs (so if the operation is not canceled, there must be at
  least one element in the middle step).</p>
    </div>
    <h4 class="heading settled" data-level="5.7.1" id="drag-and-drop-introduction"><span class="secno">5.7.1. </span><span class="content">Introduction</span><a class="self-link" href="editing.html#drag-and-drop-introduction"></a></h4>
    <p><em>This section is non-normative.</em></p>
    <p>To make an element draggable is simple: give the element a <code>draggable</code> attribute, and set an event listener for <code>dragstart</code> that stores the data being dragged.</p>
    <p>The event handler typically needs to check that it’s not a text selection that is being
  dragged, and then needs to store data into the <code>DataTransfer</code> object and set the
  allowed effects (copy, move, link, or some combination).</p>
    <p>For example:</p>
<pre class="highlight"><span class="nt">&lt;p&gt;</span>What fruits do you like?<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;ol</span> <span class="na">ondragstart=</span><span class="s">"dragStartHandler(event)"</span><span class="nt">&gt;</span>
<span class="nt">&lt;li</span> <span class="na">draggable=</span><span class="s">"true"</span><span class="nt">&gt;</span>Apples<span class="nt">&lt;/li&gt;</span>
<span class="nt">&lt;li</span> <span class="na">draggable=</span><span class="s">"true"</span><span class="nt">&gt;</span>Oranges<span class="nt">&lt;/li&gt;</span>
<span class="nt">&lt;li</span> <span class="na">draggable=</span><span class="s">"true"</span><span class="nt">&gt;</span>Pears<span class="nt">&lt;/li&gt;</span>
<span class="nt">&lt;/ol&gt;</span>
<span class="nt">&lt;script&gt;</span>
var internalDNDType = 'text/x-example'; // set this to something specific to your site
function dragStartHandler(event) {
  if (event.target instanceof HTMLLIElement) {
    // use the element’s&gt;</pre>
    <hr>
    <p>To accept a drop, the drop target has to have a <code>dropzone</code> attribute and listen to the <code>drop</code> event.</p>
    <p>The value of the <code>dropzone</code> attribute specifies what kind of
  data to accept (e.g. "<code>string:text/plain</code>" to accept any text strings, or
  "<code>file:image/png</code>" to accept a PNG image file) and what kind of feedback to
  give (e.g. "<code>move</code>" to indicate that the data will be moved).</p>
    <p class="note" role="note"> Instead of using the <code>dropzone</code> attribute, a drop
  target can handle the <code>dragenter</code> event (to report whether or
  not the drop target is to accept the drop) and the <code>dragover</code> event (to specify what feedback is to be shown to the user). </p>
    <p>The <code>drop</code> event allows the actual drop to be performed. This
  event needs to be canceled, so that the <code>dropEffect</code> attribute’s value can be used by the source
  (otherwise it’s reset).</p>
    <p>For example:</p>
<pre class="highlight"><span class="nt">&lt;p&gt;</span>Drop your favorite fruits below:<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;ol</span> <span class="na">dropzone=</span><span class="s">"move string:text/x-example"</span> <span class="na">ondrop=</span><span class="s">"dropHandler(event)"</span><span class="nt">&gt;</span>
<span class="c">&lt;!-- don’t forget to change the "text/x-example" type to something</span>
<span class="c">specific to your site --&gt;</span>
<span class="nt">&lt;/ol&gt;</span>
<span class="nt">&lt;script&gt;</span>
<span class="kd">var</span> <span class="nx">internalDNDType</span> <span class="o">=</span> <span class="s1">'text/x-example'</span><span class="p">;</span> <span class="c1">// set this to something specific to your site</span>
<span class="kd">function</span> <span class="nx">dropHandler</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">li</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">'li'</span><span class="p">);</span>
  <span class="kd">var</span> <span class="nx">data</span> <span class="o">=</span> <span class="nx">event</span><span class="p">.</span><span class="nx">dataTransfer</span><span class="p">.</span><span class="nx">getData</span><span class="p">(</span><span class="nx">internalDNDType</span><span class="p">);</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">data</span> <span class="o">==</span> <span class="s1">'fruit-apple'</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">li</span><span class="p">.</span><span class="nx">textContent</span> <span class="o">=</span> <span class="s1">'Apples'</span><span class="p">;</span>
  <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">data</span> <span class="o">==</span> <span class="s1">'fruit-orange'</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">li</span><span class="p">.</span><span class="nx">textContent</span> <span class="o">=</span> <span class="s1">'Oranges'</span><span class="p">;</span>
  <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">data</span> <span class="o">==</span> <span class="s1">'fruit-pear'</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">li</span><span class="p">.</span><span class="nx">textContent</span> <span class="o">=</span> <span class="s1">'Pears'</span><span class="p">;</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="nx">li</span><span class="p">.</span><span class="nx">textContent</span> <span class="o">=</span> <span class="s1">'Unknown Fruit'</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="nx">event</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">li</span><span class="p">);</span>
<span class="p">}</span>
<span class="nt">&lt;/script&gt;</span></pre>
    <hr>
    <p>To remove the original element (the one that was dragged) from the display, the <code>dragend</code> event can be used.</p>
    <p>For our example here, that means updating the original markup to handle that event:</p>
<pre>&lt;p&gt;What fruits do you like?&lt;/p&gt;
&lt;ol ondragstart="dragStartHandler(event)" ondragend="dragEndHandler(event)"&gt;
<em>...as before...</em>
&lt;/ol&gt;
&lt;script&gt;
function dragStartHandler(event) {
  // <em>...as before...</em>
}
function dragEndHandler(event) {
  if (event.dataTransfer.dropEffect == 'move') {
    // remove the dragged element
    event.target.parentNode.removeChild(event.target);
  }
}
&lt;/script&gt;
</pre>
    <h4 class="heading settled" data-level="5.7.2" id="the-drag-data-store"><span class="secno">5.7.2. </span><span class="content">The drag data store</span><a class="self-link" href="editing.html#the-drag-data-store"></a></h4>
    <p>The data that underlies a drag-and-drop operation, known as the <dfn data-dfn-type="dfn" data-noexport="" id="drag-data-store">drag data store<a class="self-link" href="editing.html#drag-data-store"></a></dfn>,
  consists of the following information:</p>
    <ul>
     <li>
      A <dfn data-dfn-type="dfn" data-noexport="" id="drag-data-store-item-list">drag data store item list<a class="self-link" href="editing.html#drag-data-store-item-list"></a></dfn>, which is a list of items representing the dragged
    data, each consisting of the following information: 
      <dl>
       <dt><dfn data-dfn-type="dfn" data-lt="a drag data item kind|The drag data item kind|drag data item kind" data-noexport="" id="a-drag-data-item-kind">The drag data item kind<a class="self-link" href="editing.html#a-drag-data-item-kind"></a></dfn>
       </dt><dd>
        <p>The kind of data:</p>
        <dl>
         <dt><i>Plain Unicode string</i>
         </dt><dd> Text. 
         </dd><dt><i>File</i>
         </dt><dd> Binary data with a file name. 
        </dd></dl>
       </dd><dt><dfn data-dfn-type="dfn" data-lt="item type string|The drag data item type string|type string|a drag data item type string|drag data item type strings|drag data item type string" data-noexport="" id="item-type-string">The drag data item type string<a class="self-link" href="editing.html#item-type-string"></a></dfn>
       </dt><dd>
        <p>A Unicode string giving the type or format of the data, generally given by a <a data-link-type="dfn" href="infrastructure.html#mime-type">MIME
      type</a>. Some values that are not <a data-link-type="dfn" href="infrastructure.html#mime-type">MIME types</a> are
      special-cased for legacy reasons. The API does not enforce the use of <a data-link-type="dfn" href="infrastructure.html#mime-type">MIME types</a>; other values can be used as well. In all cases, however, the values
      are all <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#converted-to-ascii-lowercase">converted to ASCII lowercase</a> by the API.</p>
        <p class="note" role="note"> Strings that contain <a data-link-type="dfn" href="infrastructure.html#space-characters">space characters</a> cannot be used with the <code>dropzone</code> attribute, so authors are
      encouraged to use only <a data-link-type="dfn" href="infrastructure.html#mime-type">MIME types</a> or custom strings (without
      spaces). </p>
        <p>There is a limit of one <i>Plain Unicode string</i> item per <a data-link-type="dfn" href="editing.html#item-type-string">item type string</a>.</p>
       </dd><dt>The actual data
       </dt><dd>A Unicode or binary string, in some cases with a file name (itself a Unicode string),
      as per <a data-link-type="dfn" href="editing.html#a-drag-data-item-kind">the drag data item kind</a>.
      </dd></dl>
      <p>The <a data-link-type="dfn" href="editing.html#drag-data-store-item-list">drag data store item list</a> is ordered in the order that the items were added
    to the list; most recently added last.</p>
     </li><li>
      <p>The following information, used to generate the UI feedback during the drag:</p>
      <ul>
       <li>User-agent-defined default feedback information, known as the <dfn data-dfn-type="dfn" data-noexport="" id="drag-data-store-default-feedback">drag data store default
      feedback<a class="self-link" href="editing.html#drag-data-store-default-feedback"></a></dfn>.
       </li><li>Optionally, a bitmap image and the coordinate of a point within that image, known as the <dfn data-dfn-type="dfn" data-noexport="" id="drag-data-store-bitmap">drag data store bitmap<a class="self-link" href="editing.html#drag-data-store-bitmap"></a></dfn> and <dfn data-dfn-type="dfn" data-noexport="" id="drag-data-store-hot-spot-coordinate">drag data store hot spot coordinate<a class="self-link" href="editing.html#drag-data-store-hot-spot-coordinate"></a></dfn>.
      </li></ul>
     </li><li>
      <p>A <dfn data-dfn-type="dfn" data-noexport="" id="drag-data-store-mode">drag data store mode<a class="self-link" href="editing.html#drag-data-store-mode"></a></dfn>, which is one of the following:</p>
      <dl>
       <dt><dfn data-dfn-type="dfn" data-noexport="" id="read-write-mode">Read/write mode<a class="self-link" href="editing.html#read-write-mode"></a></dfn>
       </dt><dd>
        <p>For the <code>dragstart</code> event. New data can be added to the <a data-link-type="dfn" href="editing.html#drag-data-store">drag data store</a>.</p>
       </dd><dt><dfn data-dfn-type="dfn" data-noexport="" id="read-only-mode">Read-only mode<a class="self-link" href="editing.html#read-only-mode"></a></dfn>
       </dt><dd>
        <p>For the <code>drop</code> event. The list of items representing dragged
      data can be read, including the data. No new data can be added.</p>
       </dd><dt><dfn data-dfn-type="dfn" data-noexport="" id="protected-mode">Protected mode<a class="self-link" href="editing.html#protected-mode"></a></dfn>
       </dt><dd>
        <p>For all other events. The formats and kinds in the <a data-link-type="dfn" href="editing.html#drag-data-store">drag data store</a> list of
      items representing dragged data can be enumerated, but the data itself is unavailable and no
      new data can be added.</p>
      </dd></dl>
     </li><li>
      <p>A <dfn data-dfn-type="dfn" data-noexport="" id="drag-data-store-allowed-effects-state">drag data store allowed effects state<a class="self-link" href="editing.html#drag-data-store-allowed-effects-state"></a></dfn>, which is a string.</p>
    </li></ul>
    <p>When a <a data-link-type="dfn" href="editing.html#drag-data-store">drag data store</a> is <dfn data-dfn-type="dfn" data-lt="create a drag data store" data-noexport="" id="create-a-drag-data-store">created<a class="self-link" href="editing.html#create-a-drag-data-store"></a></dfn>, it
  must be initialized such that its <a data-link-type="dfn" href="editing.html#drag-data-store-item-list">drag data store item list</a> is empty, it has no <a data-link-type="dfn" href="editing.html#drag-data-store-default-feedback">drag data store default feedback</a>, it has no <a data-link-type="dfn" href="editing.html#drag-data-store-bitmap">drag data store bitmap</a> and <a data-link-type="dfn" href="editing.html#drag-data-store-hot-spot-coordinate">drag data store hot spot coordinate</a>, its <a data-link-type="dfn" href="editing.html#drag-data-store-mode">drag data store mode</a> is <a data-link-type="dfn" href="editing.html#protected-mode">protected mode</a>, and its <a data-link-type="dfn" href="editing.html#drag-data-store-allowed-effects-state">drag data store allowed effects
  state</a> is the string "<code>uninitialized</code>".</p>
    <h4 class="heading settled" data-level="5.7.3" id="the-datatransfer-interface"><span class="secno">5.7.3. </span><span class="content">The <code>DataTransfer</code> interface</span><a class="self-link" href="editing.html#the-datatransfer-interface"></a></h4>
    <p><code>DataTransfer</code> objects are used to expose the <a data-link-type="dfn" href="editing.html#drag-data-store">drag data store</a> that
  underlies a drag-and-drop operation.</p>
<pre class="idl" data-highlight="webidl">interface <dfn class="idl-code" data-dfn-for="DataTransfer" data-dfn-type="interface" data-export="" id="datatransfer-datatransfer">DataTransfer<a class="self-link" href="editing.html#datatransfer-datatransfer"></a></dfn> {
  attribute DOMString <a class="idl-code" data-link-type="attribute" data-type="DOMString " href="editing.html#dom-datatransfer-dropeffect">dropEffect</a>;
  attribute DOMString <a class="idl-code" data-link-type="attribute" data-type="DOMString " href="editing.html#dom-datatransfer-effectallowed">effectAllowed</a>;

  [SameObject] readonly attribute <a data-link-type="idl-name" href="editing.html#datatransferitemlist-datatransferitemlist">DataTransferItemList</a> <a class="idl-code" data-link-type="attribute" data-readonly="" data-type="DataTransferItemList " href="editing.html#dom-datatransfer-items">items</a>;

  void <a class="idl-code" data-link-type="method" href="editing.html#dom-datatransfer-setdragimage">setDragImage</a>(<a data-link-type="idl-name" href="https://dom.spec.whatwg.org/#element">Element</a> <dfn class="idl-code" data-dfn-for="DataTransfer/setDragImage(image, x, y)" data-dfn-type="argument" data-export="" id="dom-datatransfer-setdragimage-image-x-y-image">image<a class="self-link" href="editing.html#dom-datatransfer-setdragimage-image-x-y-image"></a></dfn>, long <dfn class="idl-code" data-dfn-for="DataTransfer/setDragImage(image, x, y)" data-dfn-type="argument" data-export="" id="dom-datatransfer-setdragimage-image-x-y-x">x<a class="self-link" href="editing.html#dom-datatransfer-setdragimage-image-x-y-x"></a></dfn>, long <dfn class="idl-code" data-dfn-for="DataTransfer/setDragImage(image, x, y)" data-dfn-type="argument" data-export="" id="dom-datatransfer-setdragimage-image-x-y-y">y<a class="self-link" href="editing.html#dom-datatransfer-setdragimage-image-x-y-y"></a></dfn>);

  /* old interface */
  [SameObject] readonly attribute DOMString[] <a class="idl-code" data-link-type="attribute" data-readonly="" data-type="DOMString[] " href="editing.html#dom-datatransfer-types">types</a>;
  DOMString <a class="idl-code" data-link-type="method" href="editing.html#dom-datatransfer-getdata">getData</a>(DOMString <dfn class="idl-code" data-dfn-for="DataTransfer/getData(format)" data-dfn-type="argument" data-export="" id="dom-datatransfer-getdata-format-format">format<a class="self-link" href="editing.html#dom-datatransfer-getdata-format-format"></a></dfn>);
  void <a class="idl-code" data-link-type="method" href="editing.html#dom-datatransfer-setdata">setData</a>(DOMString <dfn class="idl-code" data-dfn-for="DataTransfer/setData(format, data)" data-dfn-type="argument" data-export="" id="dom-datatransfer-setdata-format-data-format">format<a class="self-link" href="editing.html#dom-datatransfer-setdata-format-data-format"></a></dfn>, DOMString <dfn class="idl-code" data-dfn-for="DataTransfer/setData(format, data)" data-dfn-type="argument" data-export="" id="dom-datatransfer-setdata-format-data-data">data<a class="self-link" href="editing.html#dom-datatransfer-setdata-format-data-data"></a></dfn>);
  void <a class="idl-code" data-link-type="method" href="editing.html#dom-datatransfer-cleardata">clearData</a>(optional DOMString <dfn class="idl-code" data-dfn-for="DataTransfer/clearData(format), DataTransfer/clearData()" data-dfn-type="argument" data-export="" id="dom-datatransfer-cleardata-format-format">format<a class="self-link" href="editing.html#dom-datatransfer-cleardata-format-format"></a></dfn>);
  [SameObject] readonly attribute <a data-link-type="idl-name" href="http://www.w3.org/TR/FileAPI/#dfn-filelist">FileList</a> <a class="idl-code" data-link-type="attribute" data-readonly="" data-type="FileList " href="editing.html#dom-datatransfer-files">files</a>;
};
</pre>
    <dl class="domintro">
     <dt><var>dataTransfer</var> . <code>dropEffect</code> [ = <var>value</var> ]
     </dt><dd>
      <p>Returns the kind of operation that is currently selected. If the kind of operation isn’t one
    of those that is allowed by the <code>effectAllowed</code> attribute, then the operation will
    fail.</p>
      <p>Can be set, to change the selected operation.</p>
      <p>The possible values are "<code>none</code>", "<code>copy</code>", "<code>link</code>", and "<code>move</code>".</p>
     </dd><dt><var>dataTransfer</var> . <code>effectAllowed</code> [ = <var>value</var> ]
     </dt><dd>
      <p>Returns the kinds of operations that are to be allowed.</p>
      <p>Can be set (during the <code>dragstart</code> event), to change
    the allowed operations.</p>
      <p>The possible values are "<code>none</code>",
    "<code>copy</code>", "<code>copyLink</code>", "<code>copyMove</code>", "<code>link</code>", "<code>linkMove</code>", "<code>move</code>", "<code>all</code>", and "<code>uninitialized</code>",</p>
     </dd><dt><var>dataTransfer</var> . <code>items</code>
     </dt><dd>
      <p>Returns a <code>DataTransferItemList</code> object, with the drag data.</p>
     </dd><dt><var>dataTransfer</var> . <code>setDragImage</code>(<var>element</var>, <var>x</var>, <var>y</var>)
     </dt><dd>
      <p>Uses the given element to update the drag feedback, replacing any previously specified
    feedback.</p>
     </dd><dt><var>dataTransfer</var> . <code>types</code>
     </dt><dd>
      <p>Returns an array listing the formats that were set in the <code>dragstart</code> event. In addition, if any files are being dragged,
    then one of the types will be the string "<code>Files</code>".</p>
     </dd><dt><var>data</var> = <var>dataTransfer</var> . <code>getData</code>(<var>format</var>)
     </dt><dd>
      <p>Returns the specified data. If there is no such data, returns the empty string.</p>
     </dd><dt><var>dataTransfer</var> . <code>setData</code>(<var>format</var>, <var>data</var>)
     </dt><dd>
      <p>Adds the specified data.</p>
     </dd><dt><var>dataTransfer</var> . <code>clearData</code>( [ <var>format</var> ] )
     </dt><dd>
      <p>Removes the data of the specified formats. Removes all data if the argument is omitted.</p>
     </dd><dt><var>dataTransfer</var> . <code>files</code>
     </dt><dd>
      <p>Returns a <code>FileList</code> of the files being dragged, if any.</p>
    </dd></dl>
    <p><code>DataTransfer</code> objects are used during the <a data-link-type="dfn" href="browsers.html#drag-and-drop-events">drag-and-drop
  events</a>, and are only valid while those events are being fired.</p>
    <div class="impl">
     <p>A <code>DataTransfer</code> object is associated with a <a data-link-type="dfn" href="editing.html#drag-data-store">drag data store</a> while it
  is valid.</p>
     <p>The <dfn class="idl-code" data-dfn-for="DataTransfer" data-dfn-type="attribute" data-export="" id="dom-datatransfer-dropeffect"><code>dropEffect</code><a class="self-link" href="editing.html#dom-datatransfer-dropeffect"></a></dfn> attribute controls
  the drag-and-drop feedback that the user is given during a drag-and-drop operation. When the <code>DataTransfer</code> object is created, the <code>dropEffect</code> attribute is set to a string value. On
  getting, it must return its current value. On setting, if the new value is one of "<dfn class="css" data-dfn-for="dropEffect" data-dfn-type="value" data-export="" id="valdef-dropeffect-none"><code>none</code><a class="self-link" href="editing.html#valdef-dropeffect-none"></a></dfn>", "<dfn class="css" data-dfn-for="dropEffect" data-dfn-type="value" data-export="" id="valdef-dropeffect-copy"><code>copy</code><a class="self-link" href="editing.html#valdef-dropeffect-copy"></a></dfn>", "<dfn class="css" data-dfn-for="dropEffect" data-dfn-type="value" data-export="" id="valdef-dropeffect-link"><code>link</code><a class="self-link" href="editing.html#valdef-dropeffect-link"></a></dfn>", or "<dfn class="css" data-dfn-for="dropEffect" data-dfn-type="value" data-export="" id="valdef-dropeffect-move"><code>move</code><a class="self-link" href="editing.html#valdef-dropeffect-move"></a></dfn>", then the attribute’s current value must be
  set to the new value. Other values must be ignored.</p>
     <p>The <dfn class="idl-code" data-dfn-for="DataTransfer" data-dfn-type="attribute" data-export="" id="dom-datatransfer-effectallowed"><code>effectAllowed</code><a class="self-link" href="editing.html#dom-datatransfer-effectallowed"></a></dfn> attribute is
  used in the drag-and-drop processing model to initialize the <code>dropEffect</code> attribute during the <code>dragenter</code> and <code>dragover</code> events. When the <code>DataTransfer</code> object is
  created, the <code>effectAllowed</code> attribute is set
  to a string value. On getting, it must return its current value. On setting, if <a data-link-type="dfn" href="editing.html#drag-data-store">drag data
  store</a>’s mode is the <a data-link-type="dfn" href="editing.html#read-write-mode">read/write mode</a> and the new value is one of "<dfn class="css" data-dfn-for="effectAllowed" data-dfn-type="value" data-export="" id="valdef-effectallowed-none"><code>none</code><a class="self-link" href="editing.html#valdef-effectallowed-none"></a></dfn>", "<dfn class="css" data-dfn-for="effectAllowed" data-dfn-type="value" data-export="" id="valdef-effectallowed-copy"><code>copy</code><a class="self-link" href="editing.html#valdef-effectallowed-copy"></a></dfn>", "<dfn class="css" data-dfn-for="effectAllowed" data-dfn-type="value" data-export="" id="valdef-effectallowed-copylink"><code>copyLink</code><a class="self-link" href="editing.html#valdef-effectallowed-copylink"></a></dfn>", "<dfn class="css" data-dfn-for="effectAllowed" data-dfn-type="value" data-export="" id="valdef-effectallowed-copymove"><code>copyMove</code><a class="self-link" href="editing.html#valdef-effectallowed-copymove"></a></dfn>", "<dfn class="css" data-dfn-for="effectAllowed" data-dfn-type="value" data-export="" id="valdef-effectallowed-link"><code>link</code><a class="self-link" href="editing.html#valdef-effectallowed-link"></a></dfn>", "<dfn class="css" data-dfn-for="effectAllowed" data-dfn-type="value" data-export="" id="valdef-effectallowed-linkmove"><code>linkMove</code><a class="self-link" href="editing.html#valdef-effectallowed-linkmove"></a></dfn>", "<dfn class="css" data-dfn-for="effectAllowed" data-dfn-type="value" data-export="" id="valdef-effectallowed-move"><code>move</code><a class="self-link" href="editing.html#valdef-effectallowed-move"></a></dfn>", "<dfn class="css" data-dfn-for="effectAllowed" data-dfn-type="value" data-export="" id="valdef-effectallowed-all"><code>all</code><a class="self-link" href="editing.html#valdef-effectallowed-all"></a></dfn>", or "<dfn class="css" data-dfn-for="effectAllowed" data-dfn-type="value" data-export="" id="valdef-effectallowed-uninitialized"><code>uninitialized</code><a class="self-link" href="editing.html#valdef-effectallowed-uninitialized"></a></dfn>", then the attribute’s
  current value must be set to the new value. Otherwise it must be left unchanged.</p>
     <p>The <dfn class="idl-code" data-dfn-for="DataTransfer" data-dfn-type="attribute" data-export="" id="dom-datatransfer-items"><code>items</code><a class="self-link" href="editing.html#dom-datatransfer-items"></a></dfn> attribute must return a <code>DataTransferItemList</code> object associated with the <code>DataTransfer</code> object.</p>
     <p>The <dfn class="idl-code" data-dfn-for="DataTransfer" data-dfn-type="method" data-export="" data-lt="setDragImage(image, x, y)" id="dom-datatransfer-setdragimage"><code>setDragImage(<var>element</var>, <var>x</var>, <var>y</var>)</code><a class="self-link" href="editing.html#dom-datatransfer-setdragimage"></a></dfn> method must run the following steps:</p>
     <ol>
      <li>If the <code>DataTransfer</code> object is no longer associated with a <a data-link-type="dfn" href="editing.html#drag-data-store">drag data
    store</a>, abort these steps. Nothing happens.
      </li><li>If the <a data-link-type="dfn" href="editing.html#drag-data-store">drag data store</a>’s mode is
    not the <a data-link-type="dfn" href="editing.html#read-write-mode">read/write mode</a>, abort these steps. Nothing
    happens.
      </li><li>If the <var>element</var> argument is an <code><a data-link-type="element" href="semantics.html#elementdef-img">img</a></code> element, then set the <a data-link-type="dfn" href="editing.html#drag-data-store-bitmap">drag
    data store bitmap</a> to the element’s image (at its <a data-link-type="dfn" href="https://drafts.csswg.org/css-sizing-3/#intrinsic-sizing">intrinsic size</a>); otherwise, set the <a data-link-type="dfn" href="editing.html#drag-data-store-bitmap">drag data store bitmap</a> to an image generated from the given element (the exact
    mechanism for doing so is not currently specified).
      </li><li>Set the <a data-link-type="dfn" href="editing.html#drag-data-store-hot-spot-coordinate">drag data store hot spot coordinate</a> to the given <var>x</var>, <var>y</var> coordinate.
     </li></ol>
     <p>The <dfn class="idl-code" data-dfn-for="DataTransfer" data-dfn-type="attribute" data-export="" id="dom-datatransfer-types"><code>types</code><a class="self-link" href="editing.html#dom-datatransfer-types"></a></dfn> attribute must return a <a data-link-type="dfn" href="infrastructure.html#live">live</a> <a data-link-type="dfn" href="http://www.w3.org/TR/WebIDL/#dfn-read-only">read only</a> array giving the strings
  that the following steps would produce.</p>
     <ol>
      <li>Start with an empty list <var>L</var>.
      </li><li>If the <code>DataTransfer</code> object is no longer associated with a <a data-link-type="dfn" href="editing.html#drag-data-store">drag data
    store</a>, the array is empty. Abort these steps; return the empty list <var>L</var>.
      </li><li>For each item in the <a data-link-type="dfn" href="editing.html#drag-data-store-item-list">drag data store item list</a> whose <a data-link-type="dfn" href="semantics.html#kind-of-track">kind</a> is <i>Plain Unicode string</i>, add an
    entry to the list <var>L</var> consisting of the item’s <a data-link-type="dfn" href="editing.html#item-type-string">type string</a>.
      </li><li>If there are any items in the <a data-link-type="dfn" href="editing.html#drag-data-store-item-list">drag data store item list</a> whose <a data-link-type="dfn" href="semantics.html#kind-of-track">kind</a> is <i>File</i>, then add an entry to the list <var>L</var> consisting of the string "<code>Files</code>". (This value can be
    distinguished from the other values because it is not lowercase.)
      </li><li>The strings produced by these steps are those in the list <var>L</var>.
     </li></ol>
     <p>The <dfn class="idl-code" data-dfn-for="DataTransfer" data-dfn-type="method" data-export="" id="dom-datatransfer-getdata"><code>getData(<var>format</var>)</code><a class="self-link" href="editing.html#dom-datatransfer-getdata"></a></dfn> method
  must run the following steps:</p>
     <ol>
      <li>If the <code>DataTransfer</code> object is no longer associated with a <a data-link-type="dfn" href="editing.html#drag-data-store">drag data
    store</a>, return the empty string and abort these steps.
      </li><li>If the <a data-link-type="dfn" href="editing.html#drag-data-store">drag data store</a>’s mode is
    the <a data-link-type="dfn" href="editing.html#protected-mode">protected mode</a>, return the empty string and abort these
    steps.
      </li><li>Let <var>format</var> be the first argument, <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#converted-to-ascii-lowercase">converted to ASCII
    lowercase</a>.
      </li><li>Let <var>convert-to-URL</var> be false.
      </li><li>If <var>format</var> equals "<code>text</code>", change it to "<code>text/plain</code>".
      </li><li>If <var>format</var> equals "<code>url</code>", change it to "<code>text/uri-list</code>" and set <var>convert-to-URL</var> to true.
      </li><li>If there is no item in the <a data-link-type="dfn" href="editing.html#drag-data-store-item-list">drag data store item list</a> whose <a data-link-type="dfn" href="semantics.html#kind-of-track">kind</a> is <i>Plain Unicode string</i> and whose <a data-link-type="dfn" href="editing.html#item-type-string">type string</a> is equal to <var>format</var>, return the empty string
    and abort these steps.
      </li><li>Let <var>result</var> be the data of the item in the <a data-link-type="dfn" href="editing.html#drag-data-store-item-list">drag data store item
    list</a> whose <a data-link-type="dfn" href="semantics.html#kind-of-track">kind</a> is <i>Plain Unicode
    string</i> and whose <a data-link-type="dfn" href="editing.html#item-type-string">type string</a> is equal to <var>format</var>.
      </li><li>If <var>convert-to-URL</var> is true, then parse <var>result</var> as appropriate for <code>text/uri-list</code> data, and then set <var>result</var> to the first URL from
    the list, if any, or the empty string otherwise. <a data-link-type="biblio" href="references.html#biblio-rfc2483">[RFC2483]</a>
      </li><li>Return <var>result</var>.
     </li></ol>
     <p>The <dfn class="idl-code" data-dfn-for="DataTransfer" data-dfn-type="method" data-export="" id="dom-datatransfer-setdata"><code>setData(<var>format</var>, <var>data</var>)</code><a class="self-link" href="editing.html#dom-datatransfer-setdata"></a></dfn> method must run the following steps:</p>
     <ol>
      <li>If the <code>DataTransfer</code> object is no longer associated with a <a data-link-type="dfn" href="editing.html#drag-data-store">drag data
    store</a>, abort these steps. Nothing happens.
      </li><li>If the <a data-link-type="dfn" href="editing.html#drag-data-store">drag data store</a>’s mode is
    not the <a data-link-type="dfn" href="editing.html#read-write-mode">read/write mode</a>, abort these steps. Nothing
    happens.
      </li><li>Let <var>format</var> be the first argument, <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#converted-to-ascii-lowercase">converted to ASCII
    lowercase</a>.
      </li><li>
       <p>If <var>format</var> equals "<code>text</code>", change it to "<code>text/plain</code>".</p>
       <p>If <var>format</var> equals "<code>url</code>", change it to "<code>text/uri-list</code>".</p>
      </li><li>Remove the item in the <a data-link-type="dfn" href="editing.html#drag-data-store-item-list">drag data store item list</a> whose <a data-link-type="dfn" href="semantics.html#kind-of-track">kind</a> is <i>Plain Unicode string</i> and whose <a data-link-type="dfn" href="editing.html#item-type-string">type string</a> is equal to <var>format</var>, if there is
    one.
      </li><li>Add an item to the <a data-link-type="dfn" href="editing.html#drag-data-store-item-list">drag data store item list</a> whose <a data-link-type="dfn" href="semantics.html#kind-of-track">kind</a> is <i>Plain Unicode string</i>, whose <a data-link-type="dfn" href="editing.html#item-type-string">type string</a> is equal to <var>format</var>, and whose data is the string
    given by the method’s second argument.
     </li></ol>
     <p>The <dfn class="idl-code" data-dfn-for="DataTransfer" data-dfn-type="method" data-export="" data-lt="clearData(format)|clearData()" id="dom-datatransfer-cleardata"><code>clearData()</code><a class="self-link" href="editing.html#dom-datatransfer-cleardata"></a></dfn> method must run the
  following steps:</p>
     <ol>
      <li>If the <code>DataTransfer</code> object is no longer associated with a <a data-link-type="dfn" href="editing.html#drag-data-store">drag data
    store</a>, abort these steps. Nothing happens.
      </li><li>If the <a data-link-type="dfn" href="editing.html#drag-data-store">drag data store</a>’s mode is
    not the <a data-link-type="dfn" href="editing.html#read-write-mode">read/write mode</a>, abort these steps. Nothing
    happens.
      </li><li>If the method was called with no arguments, remove each item in the <a data-link-type="dfn" href="editing.html#drag-data-store-item-list">drag data store
    item list</a> whose <a data-link-type="dfn" href="semantics.html#kind-of-track">kind</a> is <i>Plain Unicode
    string</i>, and abort these steps.
      </li><li>Let <var>format</var> be the first argument, <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#converted-to-ascii-lowercase">converted to ASCII
    lowercase</a>.
      </li><li>
       <p>If <var>format</var> equals "<code>text</code>", change it to "<code>text/plain</code>".</p>
       <p>If <var>format</var> equals "<code>url</code>", change it to "<code>text/uri-list</code>".</p>
      </li><li>Remove the item in the <a data-link-type="dfn" href="editing.html#drag-data-store-item-list">drag data store item list</a> whose <a data-link-type="dfn" href="semantics.html#kind-of-track">kind</a> is <i>Plain Unicode string</i> and whose <a data-link-type="dfn" href="editing.html#item-type-string">type string</a> is equal to <var>format</var>, if there is
    one.
     </li></ol>
     <p class="note" role="note"> The <code>clearData()</code> method does not
  affect whether any files were included in the drag, so the <code>types</code> attribute’s list might still not be empty after
  calling <code>clearData()</code> (it would still contain the
  "<code>Files</code>" string if any files were included in the drag). </p>
     <p>The <dfn class="idl-code" data-dfn-for="DataTransfer" data-dfn-type="attribute" data-export="" id="dom-datatransfer-files"><code>files</code><a class="self-link" href="editing.html#dom-datatransfer-files"></a></dfn> attribute must return a <a data-link-type="dfn" href="infrastructure.html#live">live</a> <code>FileList</code> sequence consisting of <code>File</code> objects
  representing the files found by the following steps.
  Furthermore, for a given <code>FileList</code> object and a given underlying file, the same <code>File</code> object must be used each time.</p>
     <ol>
      <li>Start with an empty list <var>L</var>.
      </li><li>If the <code>DataTransfer</code> object is no longer associated with a <a data-link-type="dfn" href="editing.html#drag-data-store">drag data
    store</a>, the <code>FileList</code> is empty. Abort these steps; return the empty list <var>L</var>.
      </li><li>If the <a data-link-type="dfn" href="editing.html#drag-data-store">drag data store</a>’s mode is
    the <a data-link-type="dfn" href="editing.html#protected-mode">protected mode</a>, abort these steps; return the empty list <var>L</var>.
      </li><li>For each item in the <a data-link-type="dfn" href="editing.html#drag-data-store-item-list">drag data store item list</a> whose <a data-link-type="dfn" href="semantics.html#kind-of-track">kind</a> is <i>File</i> , add the item’s data (the file, in particular its name and contents, as well as
    its <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request-type">type</a>) to the list <var>L</var>.
      </li><li>The files found by these steps are those in the list <var>L</var>.
     </li></ol>
     <p class="note" role="note"> This version of the API does not expose the types of the files during the
  drag. </p>
    </div>
    <h5 class="heading settled" data-level="5.7.3.1" id="the-datatransferitemlist-interface"><span class="secno">5.7.3.1. </span><span class="content">The <code>DataTransferItemList</code> interface</span><a class="self-link" href="editing.html#the-datatransferitemlist-interface"></a></h5>
    <p>Each <code>DataTransfer</code> object is associated with a <code>DataTransferItemList</code> object.</p>
<pre class="idl" data-highlight="webidl">interface <dfn class="idl-code" data-dfn-for="DataTransferItemList" data-dfn-type="interface" data-export="" id="datatransferitemlist-datatransferitemlist">DataTransferItemList<a class="self-link" href="editing.html#datatransferitemlist-datatransferitemlist"></a></dfn> {
  readonly attribute unsigned long <a class="idl-code" data-link-type="attribute" data-readonly="" data-type="unsigned long " href="editing.html#dom-datatransferitemlist-length">length</a>;
  getter <a data-link-type="idl-name" href="editing.html#datatransferitem-datatransferitem">DataTransferItem</a> (unsigned long <dfn class="idl-code" data-dfn-for="DataTransferItemList/__getter__(index)" data-dfn-type="argument" data-export="" id="dom-datatransferitemlist-__getter__-index-index">index<a class="self-link" href="editing.html#dom-datatransferitemlist-__getter__-index-index"></a></dfn>);
  <a data-link-type="idl-name" href="editing.html#datatransferitem-datatransferitem">DataTransferItem</a>? <dfn class="idl-code" data-dfn-for="DataTransferItemList" data-dfn-type="method" data-export="" data-lt="add(data, type)" id="dom-datatransferitemlist-add">add<a class="self-link" href="editing.html#dom-datatransferitemlist-add"></a></dfn>(DOMString <dfn class="idl-code" data-dfn-for="DataTransferItemList/add(data, type)" data-dfn-type="argument" data-export="" id="dom-datatransferitemlist-add-data-type-data">data<a class="self-link" href="editing.html#dom-datatransferitemlist-add-data-type-data"></a></dfn>, DOMString <dfn class="idl-code" data-dfn-for="DataTransferItemList/add(data, type)" data-dfn-type="argument" data-export="" id="dom-datatransferitemlist-add-data-type-type">type<a class="self-link" href="editing.html#dom-datatransferitemlist-add-data-type-type"></a></dfn>);
  <a data-link-type="idl-name" href="editing.html#datatransferitem-datatransferitem">DataTransferItem</a>? <a class="idl-code" data-link-type="method" href="editing.html#dom-datatransferitemlist-add">add</a>(<a data-link-type="idl-name" href="http://www.w3.org/TR/FileAPI/#dfn-file">File</a> <dfn class="idl-code" data-dfn-for="DataTransferItemList/add(data)" data-dfn-type="argument" data-export="" id="dom-datatransferitemlist-add-data-data">data<a class="self-link" href="editing.html#dom-datatransferitemlist-add-data-data"></a></dfn>);
  void <a class="idl-code" data-link-type="method" href="editing.html#dom-datatransferitemlist-remove">remove</a>(unsigned long <dfn class="idl-code" data-dfn-for="DataTransferItemList/remove(index)" data-dfn-type="argument" data-export="" id="dom-datatransferitemlist-remove-index-index">index<a class="self-link" href="editing.html#dom-datatransferitemlist-remove-index-index"></a></dfn>);
  void <a class="idl-code" data-link-type="method" href="editing.html#dom-datatransferitemlist-clear">clear</a>();
};
</pre>
    <dl class="domintro">
     <dt><var>items</var> . <code>length</code>
     </dt><dd>Returns the number of items in the <a data-link-type="dfn" href="editing.html#drag-data-store">drag data store</a>.
     </dd><dt><var>items</var>[<var>index</var>]
     </dt><dd>
      <p>Returns the <code>DataTransferItem</code> object representing the <var>index</var>th
    entry in the <a data-link-type="dfn" href="editing.html#drag-data-store">drag data store</a>.</p>
     </dd><dt><var>items</var> . <code>remove</code>(<var>index</var>)
     </dt><dd>
      <p>Removes the <var>index</var>th entry in the <a data-link-type="dfn" href="editing.html#drag-data-store">drag data store</a>.</p>
     </dd><dt><var>items</var> . <code>clear</code>()
     </dt><dd>
      <p>Removes all the entries in the <a data-link-type="dfn" href="editing.html#drag-data-store">drag data store</a>.</p>
     </dd><dt><var>items</var> . <code>add</code>(<var>data</var>)
     </dt><dt><var>items</var> . <code>add</code>(<var>data</var>, <var>type</var>)
     </dt><dd>
      <p>Adds a new entry for the given data to the <a data-link-type="dfn" href="editing.html#drag-data-store">drag data store</a>. If the data is plain
    text  then a <var>type</var> string has to be provided
    also.</p>
    </dd></dl>
    <div class="impl">
     <p>While the <code>DataTransferItemList</code> object’s <code>DataTransfer</code> object is
  associated with a <a data-link-type="dfn" href="editing.html#drag-data-store">drag data store</a>, the <code>DataTransferItemList</code> object’s <i>mode</i> is the same as the <a data-link-type="dfn" href="editing.html#drag-data-store-mode">drag data store mode</a>. When the <code>DataTransferItemList</code> object’s <code>DataTransfer</code> object is <em>not</em> associated with a <a data-link-type="dfn" href="editing.html#drag-data-store">drag data store</a>, the <code>DataTransferItemList</code> object’s <i>mode</i> is the <i>disabled mode</i>. The <a data-link-type="dfn" href="editing.html#drag-data-store">drag data store</a> referenced in this
  section (which is used only when the <code>DataTransferItemList</code> object is not in the <i>disabled mode</i>) is the <a data-link-type="dfn" href="editing.html#drag-data-store">drag data store</a> with which the <code>DataTransferItemList</code> object’s <code>DataTransfer</code> object is associated.</p>
     <p>The <dfn class="idl-code" data-dfn-for="DataTransferItemList" data-dfn-type="attribute" data-export="" id="dom-datatransferitemlist-length"><code>length</code><a class="self-link" href="editing.html#dom-datatransferitemlist-length"></a></dfn> attribute must
  return zero if the object is in the <i>disabled mode</i>; otherwise it must return the number of
  items in the <a data-link-type="dfn" href="editing.html#drag-data-store-item-list">drag data store item list</a>.</p>
     <p>When a <code>DataTransferItemList</code> object is not in the <i>disabled mode</i>, its <a data-link-type="dfn" href="http://www.w3.org/TR/WebIDL/#dfn-supported-property-indices">supported property indices</a> are the numbers in the range</p>
     <p>0 .. <var>n</var>-1,</p>
     <p>where <var>n</var> is the number of items in the <a data-link-type="dfn" href="editing.html#drag-data-store-item-list">drag data store item list</a>.</p>
     <p>To <a data-link-type="dfn" href="http://www.w3.org/TR/WebIDL/#dfn-determine-the-value-of-an-indexed-property">determine the value of an indexed property</a> <var>i</var> of a <code>DataTransferItemList</code> object, the user agent must return a <code>DataTransferItem</code> object representing the <var>i</var>th item in the <a data-link-type="dfn" href="editing.html#drag-data-store">drag data store</a>. The same object must be returned each time a particular item is
  obtained from this <code>DataTransferItemList</code> object. The <code>DataTransferItem</code> object must be associated with the same <code>DataTransfer</code> object as the <code>DataTransferItemList</code> object when it is first created.</p>
     <p>The <dfn class="idl-code" data-dfn-for="DataTransferItemList" data-dfn-type="method" data-export="" data-lt="add(data)" id="dom-datatransferitemlist-add-data"><code>add()</code><a class="self-link" href="editing.html#dom-datatransferitemlist-add-data"></a></dfn> method must run the
  following steps:</p>
     <ol>
      <li>If the <code>DataTransferItemList</code> object is not in the <i>read/write mode</i>, return null and abort these steps.
      </li><li>
       <p>Jump to the appropriate set of steps from the following list:</p>
       <dl class="switch">
        <dt>If the first argument to the method is a string
        </dt><dd>
         <p>If there is already an item in the <a data-link-type="dfn" href="editing.html#drag-data-store-item-list">drag data store item list</a> whose <a data-link-type="dfn" href="semantics.html#kind-of-track">kind</a> is <i>Plain Unicode string</i> and whose <a data-link-type="dfn" href="editing.html#item-type-string">type string</a> is equal to the value of the
      method’s second argument, <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#converted-to-ascii-lowercase">converted to ASCII lowercase</a>, then throw a <code>NotSupportedError</code> exception and abort these steps.</p>
         <p>Otherwise, add an item to the <a data-link-type="dfn" href="editing.html#drag-data-store-item-list">drag data store item list</a> whose <a data-link-type="dfn" href="semantics.html#kind-of-track">kind</a> is <i>Plain Unicode string</i>, whose <a data-link-type="dfn" href="editing.html#item-type-string">type string</a> is equal to the value of the method’s second
      argument, <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#converted-to-ascii-lowercase">converted to ASCII lowercase</a>, and whose data is the string given by the
      method’s first argument.</p>
        </dd><dt>If the first argument to the method is a <code>File</code>
        </dt><dd>
         <p>Add an item to the <a data-link-type="dfn" href="editing.html#drag-data-store-item-list">drag data store item list</a> whose <a data-link-type="dfn" href="semantics.html#kind-of-track">kind</a> is <i>File</i>, whose <a data-link-type="dfn" href="editing.html#item-type-string">type
      string</a> is the <code>type</code> of the <code>File</code>, <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#converted-to-ascii-lowercase">converted to ASCII lowercase</a>, and whose data is the same as the <code>File</code>’s data.</p>
       </dd></dl>
      </li><li><a data-link-type="dfn" href="http://www.w3.org/TR/WebIDL/#dfn-determine-the-value-of-an-indexed-property">Determine the value of the indexed property</a> corresponding to the newly added item, and return that value (a newly created <code>DataTransferItem</code> object).
     </li></ol>
     <p>The <dfn class="idl-code" data-dfn-for="DataTransferItemList" data-dfn-type="method" data-export="" data-lt="remove(index)" id="dom-datatransferitemlist-remove"><code>remove()</code><a class="self-link" href="editing.html#dom-datatransferitemlist-remove"></a></dfn> method, when
  invoked with the argument <var>i</var>, must run these steps:</p>
     <ol>
      <li>If the <code>DataTransferItemList</code> object is not in the <i>read/write mode</i>, throw an <code>InvalidStateError</code> exception and
    abort these steps.
      </li><li>Remove the <var>i</var>th item from the <a data-link-type="dfn" href="editing.html#drag-data-store">drag data store</a>.
     </li></ol>
     <p>The <dfn class="idl-code" data-dfn-for="DataTransferItemList" data-dfn-type="method" data-export="" id="dom-datatransferitemlist-clear"><code>clear()</code><a class="self-link" href="editing.html#dom-datatransferitemlist-clear"></a></dfn> method, if the <code>DataTransferItemList</code> object is in the <i>read/write mode</i>,
  must remove all the items from the <a data-link-type="dfn" href="editing.html#drag-data-store">drag data store</a>. Otherwise, it must do
  nothing.</p>
    </div>
    <h5 class="heading settled" data-level="5.7.3.2" id="the-datatransferitem-interface"><span class="secno">5.7.3.2. </span><span class="content">The <code>DataTransferItem</code> interface</span><a class="self-link" href="editing.html#the-datatransferitem-interface"></a></h5>
    <p>Each <code>DataTransferItem</code> object is associated with a <code>DataTransfer</code> object.</p>
<pre class="idl" data-highlight="webidl">interface <dfn class="idl-code" data-dfn-for="DataTransferItem" data-dfn-type="interface" data-export="" id="datatransferitem-datatransferitem">DataTransferItem<a class="self-link" href="editing.html#datatransferitem-datatransferitem"></a></dfn> {
  readonly attribute DOMString <a class="idl-code" data-link-type="attribute" data-readonly="" data-type="DOMString " href="editing.html#dom-datatransferitem-kind">kind</a>;
  readonly attribute DOMString <a class="idl-code" data-link-type="attribute" data-readonly="" data-type="DOMString " href="editing.html#dom-datatransferitem-type">type</a>;
  void <a class="idl-code" data-link-type="method" href="editing.html#dom-datatransferitem-getasstring">getAsString</a>(<a data-link-type="idl-name" href="editing.html#callbackdef-datatransferitem-functionstringcallback">FunctionStringCallback</a>? <dfn class="idl-code" data-dfn-for="DataTransferItem/getAsString(_callback)" data-dfn-type="argument" data-export="" id="dom-datatransferitem-getasstring-_callback-_callback">_callback<a class="self-link" href="editing.html#dom-datatransferitem-getasstring-_callback-_callback"></a></dfn>);
  <a data-link-type="idl-name" href="http://www.w3.org/TR/FileAPI/#dfn-file">File</a>? <a class="idl-code" data-link-type="method" href="editing.html#dom-datatransferitem-getasfile">getAsFile</a>();
};

callback <dfn class="idl-code" data-dfn-for="DataTransferItem" data-dfn-type="callback" data-export="" id="callbackdef-datatransferitem-functionstringcallback">FunctionStringCallback<a class="self-link" href="editing.html#callbackdef-datatransferitem-functionstringcallback"></a></dfn> = void (DOMString <dfn class="idl-code" data-dfn-for="FunctionStringCallback" data-dfn-type="argument" data-export="" id="dom-functionstringcallback-data">data<a class="self-link" href="editing.html#dom-functionstringcallback-data"></a></dfn>);
</pre>
    <dl class="domintro">
     <dt><var>item</var> . <code>kind</code>
     </dt><dd>
      <p>Returns <a data-link-type="dfn" href="editing.html#a-drag-data-item-kind">the drag data item kind</a>, one of: "string",
      "file".</p>
     </dd><dt><var>item</var> . <code>type</code>
     </dt><dd>
      <p>Returns <a data-link-type="dfn" href="editing.html#item-type-string">the drag data item type string</a>.</p>
     </dd><dt><var>item</var> . <code>getAsString</code>(<var>callback</var>)
     </dt><dd>
      <p>Invokes the callback with the string data as the argument, if <a data-link-type="dfn" href="editing.html#a-drag-data-item-kind">the drag data item
    kind</a> is <i>Plain Unicode string</i>.</p>
     </dd><dt><var>file</var> = <var>item</var> . <code>getAsFile</code>()
     </dt><dd>
      <p>Returns a <code>File</code> object, if <a data-link-type="dfn" href="editing.html#a-drag-data-item-kind">the drag data item kind</a> is <i>File</i>.</p>
    </dd></dl>
    <div class="impl">
     <p>While the <code>DataTransferItem</code> object’s <code>DataTransfer</code> object is associated
  with a <a data-link-type="dfn" href="editing.html#drag-data-store">drag data store</a> and that <a data-link-type="dfn" href="editing.html#drag-data-store">drag data store</a>’s <a data-link-type="dfn" href="editing.html#drag-data-store-item-list">drag data store
  item list</a> still contains the item that the <code>DataTransferItem</code> object represents,
  the <code>DataTransferItem</code> object’s <i>mode</i> is the same as the <a data-link-type="dfn" href="editing.html#drag-data-store-mode">drag data store
  mode</a>. When the <code>DataTransferItem</code> object’s <code>DataTransfer</code> object is <em>not</em> associated with a <a data-link-type="dfn" href="editing.html#drag-data-store">drag data store</a>, or if the item that the <code>DataTransferItem</code> object represents has been removed from the relevant <a data-link-type="dfn" href="editing.html#drag-data-store-item-list">drag data
  store item list</a>, the <code>DataTransferItem</code> object’s <i>mode</i> is the <i>disabled
  mode</i>. The <a data-link-type="dfn" href="editing.html#drag-data-store">drag data store</a> referenced in this section (which is used only when the <code>DataTransferItem</code> object is not in the <i>disabled mode</i>) is the <a data-link-type="dfn" href="editing.html#drag-data-store">drag data
  store</a> with which the <code>DataTransferItem</code> object’s <code>DataTransfer</code> object is associated.</p>
     <p>The <dfn class="idl-code" data-dfn-for="DataTransferItem" data-dfn-type="attribute" data-export="" id="dom-datatransferitem-kind"><code>kind</code><a class="self-link" href="editing.html#dom-datatransferitem-kind"></a></dfn> attribute must return the
  empty string if the <code>DataTransferItem</code> object is in the <i>disabled mode</i>; otherwise
  it must return the string given in the cell from the second column of the following table from the
  row whose cell in the first column contains <a data-link-type="dfn" href="editing.html#a-drag-data-item-kind">the drag data item kind</a> of the item
  represented by the <code>DataTransferItem</code> object:</p>
     <table>
      <thead>
       <tr>
        <th> Kind 
        </th><th> String 
      </th></tr></thead><tbody>
       <tr>
        <td> <i>Plain Unicode string</i> 
        </td><td> "<code>string</code>" 
       </td></tr><tr>
        <td> <i>File</i> 
        </td><td> "<code>file</code>" 
     </td></tr></tbody></table>
     <p>The <dfn class="idl-code" data-dfn-for="DataTransferItem" data-dfn-type="attribute" data-export="" id="dom-datatransferitem-type"><code>type</code><a class="self-link" href="editing.html#dom-datatransferitem-type"></a></dfn> attribute must return the
  empty string if the <code>DataTransferItem</code> object is in the <i>disabled mode</i>; otherwise
  it must return <a data-link-type="dfn" href="editing.html#item-type-string">the drag data item type string</a> of the item represented by the <code>DataTransferItem</code> object.</p>
     <p>The <dfn class="idl-code" data-dfn-for="DataTransferItem" data-dfn-type="method" data-export="" data-lt="getAsString(_callback)" id="dom-datatransferitem-getasstring"><code>getAsString(<var>callback</var>)</code><a class="self-link" href="editing.html#dom-datatransferitem-getasstring"></a></dfn> method must run the following steps:</p>
     <ol>
      <li>If the <var>callback</var> is null, abort these steps.
      </li><li>If the <code>DataTransferItem</code> object is not in the <i>read/write mode</i> or the <i>read-only mode</i>,
    abort these steps. The callback is never invoked.
      </li><li>If <a data-link-type="dfn" href="editing.html#a-drag-data-item-kind">the drag data item kind</a> is not <i>Plain Unicode string</i>, abort these
    steps. The callback is never invoked.
      </li><li>Otherwise, <a data-link-type="dfn" href="webappapis.html#queuing">queue a task</a> to invoke <var>callback</var>, passing the
    actual data of the item represented by the <code>DataTransferItem</code> object as the
    argument.
     </li></ol>
     <p>The <dfn class="idl-code" data-dfn-for="DataTransferItem" data-dfn-type="method" data-export="" id="dom-datatransferitem-getasfile"><code>getAsFile()</code><a class="self-link" href="editing.html#dom-datatransferitem-getasfile"></a></dfn> method must run the following steps:</p>
     <ol>
      <li>If the <code>DataTransferItem</code> object is not in the <i>read/write mode</i> or the <i>read-only mode</i>,
    return null and abort these steps.
      </li><li>If <a data-link-type="dfn" href="editing.html#a-drag-data-item-kind">the drag data item kind</a> is not <i>File</i>, then return null and abort
    these steps.
      </li><li>Return a new <code>File</code> object representing the actual data of the item represented
    by the <code>DataTransferItem</code> object. 
     </li></ol>
    </div>
    <h4 class="heading settled" data-level="5.7.4" id="the-dragevent-interface"><span class="secno">5.7.4. </span><span class="content">The <code>DragEvent</code> interface</span><a class="self-link" href="editing.html#the-dragevent-interface"></a></h4>
    <p>The drag-and-drop processing model involves several events. They all use the <code>DragEvent</code> interface.</p>
<pre class="idl" data-highlight="webidl">[<dfn class="idl-code" data-dfn-for="DragEvent" data-dfn-type="constructor" data-export="" data-lt="DragEvent(type, eventInitDict)" id="dom-dragevent-dragevent">Constructor<a class="self-link" href="editing.html#dom-dragevent-dragevent"></a></dfn>(DOMString <dfn class="idl-code" data-dfn-for="DragEvent/DragEvent(type, eventInitDict)" data-dfn-type="argument" data-export="" id="dom-dragevent-dragevent-type-eventinitdict-type">type<a class="self-link" href="editing.html#dom-dragevent-dragevent-type-eventinitdict-type"></a></dfn>, optional <a data-link-type="idl-name" href="editing.html#dictdef-dragevent-drageventinit">DragEventInit</a> <dfn class="idl-code" data-dfn-for="DragEvent/DragEvent(type, eventInitDict)" data-dfn-type="argument" data-export="" id="dom-dragevent-dragevent-type-eventinitdict-eventinitdict">eventInitDict<a class="self-link" href="editing.html#dom-dragevent-dragevent-type-eventinitdict-eventinitdict"></a></dfn>)]
interface <dfn class="idl-code" data-dfn-for="DragEvent" data-dfn-type="interface" data-export="" id="dragevent-dragevent">DragEvent<a class="self-link" href="editing.html#dragevent-dragevent"></a></dfn> : <a data-link-type="idl-name" href="http://www.w3.org/TR/uievents/#interface-mouseevent">MouseEvent</a> {
  readonly attribute <a data-link-type="idl-name" href="editing.html#datatransfer-datatransfer">DataTransfer</a>? <a class="idl-code" data-link-type="attribute" data-readonly="" data-type="DataTransfer? " href="editing.html#dom-dragevent-datatransfer">dataTransfer</a>;
};

dictionary <dfn class="idl-code" data-dfn-for="DragEvent" data-dfn-type="dictionary" data-export="" id="dictdef-dragevent-drageventinit">DragEventInit<a class="self-link" href="editing.html#dictdef-dragevent-drageventinit"></a></dfn> : <a data-link-type="idl-name" href="http://www.w3.org/TR/uievents/#interface-mouseeventinit">MouseEventInit</a> {
  <a data-link-type="idl-name" href="editing.html#datatransfer-datatransfer">DataTransfer</a>? <dfn class="idl-code" data-default="null" data-dfn-for="DragEventInit" data-dfn-type="dict-member" data-export="" data-type="DataTransfer? " id="dom-drageventinit-datatransfer">dataTransfer<a class="self-link" href="editing.html#dom-drageventinit-datatransfer"></a></dfn> = null;
};
</pre>
    <dl class="domintro">
     <dt><var>event</var> . <code>dataTransfer</code>
     </dt><dd>
      <p>Returns the <code>DataTransfer</code> object for the event.</p>
    </dd></dl>
    <p class="note" role="note"> Although, for consistency with other event interfaces, the <code>DragEvent</code> interface has a constructor, it is not particularly useful. In particular, there’s no way to
  create a useful <code>DataTransfer</code> object from script, as <code>DataTransfer</code> objects
  have a processing and security model that is coordinated by the browser during drag-and-drops. </p>
    <div class="impl">
     <p>The <dfn class="idl-code" data-dfn-for="DragEvent" data-dfn-type="attribute" data-export="" id="dom-dragevent-datatransfer"><code>dataTransfer</code><a class="self-link" href="editing.html#dom-dragevent-datatransfer"></a></dfn> attribute of the <code>DragEvent</code> interface must return the value it was initialized to. It represents the
  context information for the event.</p>
    </div>
    <div class="impl">
     <p>When a user agent is required to <dfn data-dfn-type="dfn" data-noexport="" id="fire-a-dnd-event">fire a DND event<a class="self-link" href="editing.html#fire-a-dnd-event"></a></dfn> named <var>e</var> at an element,
  using a particular <a data-link-type="dfn" href="editing.html#drag-data-store">drag data store</a>, and optionally with a specific <var>related
  target</var>, the user agent must run the following steps:</p>
     <ol>
      <li>If no specific <var>related target</var> was provided, set <var>related target</var> to
    null.
      </li><li>Let <var>window</var> be the <code>Window</code> object of the <code>Document</code> object of the specified target element.
      </li><li>
       <p>If <var>e</var> is <code>dragstart</code>, set the <a data-link-type="dfn" href="editing.html#drag-data-store-mode">drag
    data store mode</a> to the <a data-link-type="dfn" href="editing.html#read-write-mode">read/write mode</a>.</p>
       <p>If <var>e</var> is <code>drop</code>, set the <a data-link-type="dfn" href="editing.html#drag-data-store-mode">drag data store
    mode</a> to the <a data-link-type="dfn" href="editing.html#read-only-mode">read-only mode</a>.</p>
      </li><li>Let <var>dataTransfer</var> be a newly created <code>DataTransfer</code> object
    associated with the given <a data-link-type="dfn" href="editing.html#drag-data-store">drag data store</a>.
      </li><li>Set the <code>effectAllowed</code> attribute to the <a data-link-type="dfn" href="editing.html#drag-data-store">drag data
    store</a>’s <a data-link-type="dfn" href="editing.html#drag-data-store-allowed-effects-state">drag data store allowed effects state</a>.
      </li><li>
       <p>Set the <code>dropEffect</code> attribute to "<code>none</code>" if <var>e</var> is <code>dragstart</code>, <code>drag</code>, <code>dragexit</code>, or <code>dragleave</code>; to the value corresponding to the <a data-link-type="dfn" href="editing.html#current-drag-operation">current
    drag operation</a> if <var>e</var> is <code>drop</code> or <code>dragend</code>; and to a value based on the <code>effectAllowed</code> attribute’s value and the
    drag-and-drop source, as given by the following table, otherwise (i.e. if <var>e</var> is <code>dragenter</code> or <code>dragover</code>):</p>
       <table>
        <thead>
         <tr>
          <th><code>effectAllowed</code>
          </th><th><code>dropEffect</code>
        </th></tr></thead><tbody>
         <tr>
          <td>"<code>none</code>"
          </td><td>"<code>none</code>"
         </td></tr><tr>
          <td>"<code>copy</code>"
          </td><td>"<code>copy</code>"
         </td></tr><tr>
          <td>"<code>copyLink</code>"
          </td><td>"<code>copy</code>", or, <a data-link-type="dfn" href="editing.html#if-appropriate">if appropriate</a>, "<code>link</code>"
         </td></tr><tr>
          <td>"<code>copyMove</code>"
          </td><td>"<code>copy</code>", or, <a data-link-type="dfn" href="editing.html#if-appropriate">if appropriate</a>, "<code>move</code>"
         </td></tr><tr>
          <td>"<code>all</code>"
          </td><td>"<code>copy</code>", or, <a data-link-type="dfn" href="editing.html#if-appropriate">if appropriate</a>, either "<code>link</code>" or "<code>move</code>"
         </td></tr><tr>
          <td>"<code>link</code>"
          </td><td>"<code>link</code>"
         </td></tr><tr>
          <td>"<code>linkMove</code>"
          </td><td>"<code>link</code>", or, <a data-link-type="dfn" href="editing.html#if-appropriate">if appropriate</a>, "<code>move</code>"
         </td></tr><tr>
          <td>"<code>move</code>"
          </td><td>"<code>move</code>"
         </td></tr><tr>
          <td>"<code>uninitialized</code>" when what is being dragged is a selection from a text field
          </td><td>"<code>move</code>", or, <a data-link-type="dfn" href="editing.html#if-appropriate">if appropriate</a>, either "<code>copy</code>" or "<code>link</code>"
         </td></tr><tr>
          <td>"<code>uninitialized</code>" when what is being dragged is a selection
          </td><td>"<code>copy</code>", or, <a data-link-type="dfn" href="editing.html#if-appropriate">if appropriate</a>, either "<code>link</code>" or "<code>move</code>"
         </td></tr><tr>
          <td>"<code>uninitialized</code>" when what is being dragged is an <code><a data-link-type="element" href="#a">a</a></code> element with an <code><a data-link-type="element-attr" href="semantics.html#element-attrdef-links-href">href</a></code> attribute
          </td><td>"<code>link</code>", or, <a data-link-type="dfn" href="editing.html#if-appropriate">if appropriate</a>, either "<code>copy</code>" or "<code>move</code>"
         </td></tr><tr>
          <td>Any other case
          </td><td>"<code>copy</code>", or, <a data-link-type="dfn" href="editing.html#if-appropriate">if appropriate</a>, either "<code>link</code>" or "<code>move</code>"
       </td></tr></tbody></table>
       <p>Where the table above provides <dfn data-dfn-type="dfn" data-lt="if appropriate|possibly appropriate alternatives" data-noexport="" id="if-appropriate">possibly appropriate alternatives<a class="self-link" href="editing.html#if-appropriate"></a></dfn>, user agents may instead use the listed alternative values if
    platform conventions dictate that the user has requested those alternate effects.</p>
       <p class="example" id="example-8cbdfd52"><a class="self-link" href="editing.html#example-8cbdfd52"></a> For example, Windows platform conventions are such that dragging while
    holding the "alt" key indicates a preference for linking the data, rather than moving or copying
    it. Therefore, on a Windows system, if "<code>link</code>" is an option according to
    the table above while the "alt" key is depressed, the user agent could select that instead of
    "<code>copy</code>" or "<code>move</code>". </p>
      </li><li>
       <p>Create a <a data-link-type="dfn" href="infrastructure.html#trusted">trusted</a> <code>DragEvent</code> object
    and initialize it to have the given name <var>e</var>, to bubble, to be cancelable unless <var>e</var> is <code>dragexit</code>, <code>dragleave</code>, or <code>dragend</code>, and to have the <code>view</code> attribute initialized to <var>window</var>, the <code>detail</code> attribute initialized to zero, the mouse and key
    attributes initialized according to the state of the input devices as they would be for user
    interaction events, the <code>relatedTarget</code> attribute initialized to <var>related target</var>, and the <code>dataTransfer</code> attribute initialized to <var>dataTransfer</var>, the <code>DataTransfer</code> object created above.</p>
       <p>If there is no relevant pointing device, the object must have its <code>screenX</code>, <code>screenY</code>, <code>clientX</code>, <code>clientY</code>, and <code>button</code> attributes set to 0.</p>
      </li><li><a data-link-type="dfn" href="infrastructure.html#dispatch">Dispatch</a> the newly created <code>DragEvent</code> object at the specified target element.
      </li><li>Set the <a data-link-type="dfn" href="editing.html#drag-data-store-allowed-effects-state">drag data store allowed effects state</a> to the current value of <var>dataTransfer</var>’s <code>effectAllowed</code> attribute. (It can only have changed value if <var>e</var> is <code>dragstart</code>.)
      </li><li>Set the <a data-link-type="dfn" href="editing.html#drag-data-store-mode">drag data store mode</a> back to the <a data-link-type="dfn" href="editing.html#protected-mode">protected mode</a> if it was changed in the first step.
      </li><li>Break the association between <var>dataTransfer</var> and the <a data-link-type="dfn" href="editing.html#drag-data-store">drag data
    store</a>.
     </li></ol>
    </div>
    <div class="impl">
     <h4 class="heading settled" data-level="5.7.5" id="drag-and-drop-processing-model"><span class="secno">5.7.5. </span><span class="content">Drag-and-drop processing model</span><a class="self-link" href="editing.html#drag-and-drop-processing-model"></a></h4>
     <p>When the user attempts to begin a drag operation, the user agent must run the following steps.
  User agents must act as if these steps were run even if the drag actually started in another
  document or application and the user agent was not aware that the drag was occurring until it
  intersected with a document under the user agent’s purview.</p>
     <ol>
      <li>
       <p>Determine what is being dragged, as follows:</p>
       <p>If the drag operation was invoked on a selection, then it is the selection that is being
    dragged.</p>
       <p>Otherwise, if the drag operation was invoked on a <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document">Document</a></code>, it is the first
    element, going up the ancestor chain, starting at the node that the user tried to drag, that has
    the IDL attribute <code>draggable</code> set to true. If there is no such
    element, then nothing is being dragged; abort these steps, the drag-and-drop operation is never
    started.</p>
       <p>Otherwise, the drag operation was invoked outside the user agent’s purview. What is being
    dragged is defined by the document or application where the drag was started.</p>
       <p class="note" role="note"> <code><a data-link-type="element" href="semantics.html#elementdef-img">img</a></code> elements and <code><a data-link-type="element" href="#a">a</a></code> elements with an <code><a data-link-type="element-attr" href="semantics.html#element-attrdef-links-href">href</a></code> attribute have their <code>draggable</code> attribute set to true by default. </p>
      </li><li><a data-link-type="dfn" href="editing.html#create-a-drag-data-store">Create a drag data store</a>. All the DND events fired subsequently by the steps
    in this section must use this <a data-link-type="dfn" href="editing.html#drag-data-store">drag data store</a>.
      </li><li>
       <p>Establish which DOM node is the <dfn data-dfn-type="dfn" data-noexport="" id="source-node">source node<a class="self-link" href="editing.html#source-node"></a></dfn>, as follows:</p>
       <p>If it is a selection that is being dragged, then the <a data-link-type="dfn" href="editing.html#source-node">source node</a> is the <code>Text</code> node that the user started the drag on (typically the <code>Text</code> node
    that the user originally clicked). If the user did not specify a particular node, for example if
    the user just told the user agent to begin a drag of "the selection", then the <a data-link-type="dfn" href="editing.html#source-node">source
    node</a> is the first <code>Text</code> node containing a part of the selection.</p>
       <p>Otherwise, if it is an element that is being dragged, then the <a data-link-type="dfn" href="editing.html#source-node">source node</a> is
    the element that is being dragged.</p>
       <p>Otherwise, the <a data-link-type="dfn" href="editing.html#source-node">source node</a> is part of another document or application. When this
    specification requires that an event be dispatched at the <a data-link-type="dfn" href="editing.html#source-node">source node</a> in this case,
    the user agent must instead follow the platform-specific conventions relevant to that
    situation.</p>
       <p class="note" role="note"> Multiple events are fired on the <a data-link-type="dfn" href="editing.html#source-node">source node</a> during the course of the drag-and-drop
      operation. </p>
      </li><li>
       <p>Determine the <dfn data-dfn-type="dfn" data-noexport="" id="list-of-dragged-nodes">list of dragged nodes<a class="self-link" href="editing.html#list-of-dragged-nodes"></a></dfn>, as follows:</p>
       <p>If it is a selection that is being dragged, then the <a data-link-type="dfn" href="editing.html#list-of-dragged-nodes">list of dragged nodes</a> contains, in <a data-link-type="dfn" href="infrastructure.html#tree-order">tree order</a>, every node that is partially or completely included in the
    selection (including all their ancestors).</p>
       <p>Otherwise, the <a data-link-type="dfn" href="editing.html#list-of-dragged-nodes">list of dragged nodes</a> contains only the <a data-link-type="dfn" href="editing.html#source-node">source node</a>,
    if any.</p>
      </li><li>
       <p>If it is a selection that is being dragged, then add an item to the <a data-link-type="dfn" href="editing.html#drag-data-store-item-list">drag data store
    item list</a>, with its properties set as follows:</p>
       <dl>
        <dt><a data-link-type="dfn" href="editing.html#item-type-string">The drag data item type string</a> 
        </dt><dd>"<code>text/plain</code>"
        </dd><dt><a data-link-type="dfn" href="editing.html#a-drag-data-item-kind">The drag data item kind</a> 
        </dt><dd><i>Plain Unicode string</i>
        </dd><dt>The actual data
        </dt><dd>The text of the selection
       </dd></dl>
       <p>Otherwise, if any files are being dragged, then add one item per file to the <a data-link-type="dfn" href="editing.html#drag-data-store-item-list">drag data
    store item list</a>, with their properties set as follows:</p>
       <dl>
        <dt><a data-link-type="dfn" href="editing.html#item-type-string">The drag data item type string</a> 
        </dt><dd>The MIME type of the file, if known, or "<code>application/octet-stream</code>" otherwise.
        </dd><dt><a data-link-type="dfn" href="editing.html#a-drag-data-item-kind">The drag data item kind</a> 
        </dt><dd><i>File</i>
        </dd><dt>The actual data
        </dt><dd>The file’s contents and name.
       </dd></dl>
       <p class="note" role="note"> Dragging files can currently only happen from outside a <a data-link-type="dfn" href="browsers.html#browsing-context">browsing
    context</a>, for example from a file system manager application. </p>
       <p>If the drag initiated outside of the application, the user agent must add items to the <a data-link-type="dfn" href="editing.html#drag-data-store-item-list">drag data store item list</a> as appropriate for the data being dragged, honoring
    platform conventions where appropriate; however, if the platform conventions do not use <a data-link-type="dfn" href="infrastructure.html#mime-type">MIME types</a> to label dragged data, the user agent must make a
    best-effort attempt to map the types to MIME types, and, in any case, all the <a data-link-type="dfn" href="editing.html#item-type-string">drag data item type strings</a> must be <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#converted-to-ascii-lowercase">converted to ASCII
    lowercase</a>.</p>
       <p>User agents may also add one or more items representing the selection or dragged element(s)
    in other forms, e.g. as HTML.</p>
      </li><li>
       <p>If the <a data-link-type="dfn" href="editing.html#list-of-dragged-nodes">list of dragged nodes</a> is not empty, then extract the microdata from those nodes into a JSON form, and add one item to the <a data-link-type="dfn" href="editing.html#drag-data-store-item-list">drag data store item list</a>, with its properties set as follows:</p>
       <dl>
        <dt><a data-link-type="dfn" href="editing.html#item-type-string">The drag data item type string</a> 
        </dt><dd><code>application/microdata+json</code>
        </dd><dt><a data-link-type="dfn" href="editing.html#a-drag-data-item-kind">The drag data item kind</a> 
        </dt><dd><i>Plain Unicode string</i>
        </dd><dt>The actual data
        </dt><dd>The resulting JSON string.
       </dd></dl>
      </li><li>
       <p>Run the following substeps:</p>
       <ol>
        <li>Let <var>urls</var> be an empty list of <a data-link-type="dfn" href="https://url.spec.whatwg.org/#syntax-url-absolute">absolute URLs</a>.
        </li><li>
         <p>For each <var>node</var> in the <a data-link-type="dfn" href="editing.html#list-of-dragged-nodes">list of dragged nodes</a>:</p>
         <dl>
          <dt>If the node is an <code><a data-link-type="element" href="#a">a</a></code> element with an <code><a data-link-type="element-attr" href="semantics.html#element-attrdef-links-href">href</a></code> attribute
          </dt><dd>Add to <var>urls</var> the result of <a data-link-type="dfn" href="infrastructure.html#re-resolved">resolving</a> the element’s <code><a data-link-type="element-attr" href="semantics.html#element-attrdef-links-href">href</a></code> content
        attribute relative to the element.
          </dd><dt>If the node is an <code><a data-link-type="element" href="semantics.html#elementdef-img">img</a></code> element with a <code><a data-link-type="element-attr" href="semantics.html#element-attrdef-img-src">src</a></code> attribute
          </dt><dd>Add to <var>urls</var> the result of <a data-link-type="dfn" href="infrastructure.html#re-resolved">resolving</a> the element’s <code>src</code> content attribute
        relative to the element.
         </dd></dl>
        </li><li>If <var>urls</var> is still empty, abort these substeps.
        </li><li>Let <var>url string</var> be the result of concatenating the strings in <var>urls</var>,
      in the order they were added, separated by a U+000D CARRIAGE RETURN U+000A LINE FEED character
      pair (CRLF).
        </li><li>
         Add one item to the <a data-link-type="dfn" href="editing.html#drag-data-store-item-list">drag data store item list</a>, with its properties set as
      follows: 
         <dl>
          <dt><a data-link-type="dfn" href="editing.html#item-type-string">The drag data item type string</a> 
          </dt><dd><code>text/uri-list</code>
          </dd><dt><a data-link-type="dfn" href="editing.html#a-drag-data-item-kind">The drag data item kind</a> 
          </dt><dd><i>Plain Unicode string</i>
          </dd><dt>The actual data
          </dt><dd><var>url string</var>
         </dd></dl>
       </li></ol>
      </li><li>
       <p>Update the <a data-link-type="dfn" href="editing.html#drag-data-store-default-feedback">drag data store default feedback</a> as appropriate for the user agent
    (if the user is dragging the selection, then the selection would likely be the basis for this
    feedback; if the user is dragging an element, then that element’s rendering would be used; if
    the drag began outside the user agent, then the platform conventions for determining the drag
    feedback should be used).</p>
      </li><li>
       <p><a data-link-type="dfn" href="editing.html#fire-a-dnd-event">Fire a DND event</a> named <code>dragstart</code> at the <a data-link-type="dfn" href="editing.html#source-node">source node</a>.</p>
       <p>If the event is canceled, then the drag-and-drop operation should not occur; abort these
    steps.</p>
       <p class="note" role="note"> Since events with no event listeners registered are, almost by definition, never
    canceled, drag-and-drop is always available to the user if the author does not specifically
    prevent it. </p>
      </li><li>
       <p><a data-link-type="dfn" href="editing.html#initiated">Initiate the drag-and-drop operation</a> in a manner consistent with platform
    conventions, and as described below.</p>
       <p>The drag-and-drop feedback must be generated from the first of the
    following sources that is available:</p>
       <ol>
        <li>The <a data-link-type="dfn" href="editing.html#drag-data-store-bitmap">drag data store bitmap</a>, if any. In this case, the <a data-link-type="dfn" href="editing.html#drag-data-store-hot-spot-coordinate">drag data store
      hot spot coordinate</a> should be used as hints for where to put the cursor relative to the
      resulting image. The values are expressed as distances in CSS pixels from the left side and
      from the top side of the image respectively. <a data-link-type="biblio" href="references.html#biblio-css-2015">[CSS-2015]</a>
        </li><li>The <a data-link-type="dfn" href="editing.html#drag-data-store-default-feedback">drag data store default feedback</a>.
       </li></ol>
     </li></ol>
     <p>From the moment that the user agent is to <dfn data-dfn-type="dfn" data-lt="initiated|initiate the drag-and-drop operation" data-noexport="" id="initiated">initiate the drag-and-drop operation<a class="self-link" href="editing.html#initiated"></a></dfn>,
  until the end of the drag-and-drop operation, device input events (e.g. mouse and keyboard events)
  must be suppressed.</p>
     <p>During the drag operation, the element directly indicated by the user as the drop target is
  called the <dfn data-dfn-type="dfn" data-noexport="" id="immediate-user-selection">immediate user selection<a class="self-link" href="editing.html#immediate-user-selection"></a></dfn>. (Only elements can be selected by the user; other
  nodes must not be made available as drop targets.) However, the <a data-link-type="dfn" href="editing.html#immediate-user-selection">immediate user
  selection</a> is not necessarily the <dfn data-dfn-type="dfn" data-lt="previous target element|current target element" data-noexport="" id="previous-target-element">current target element<a class="self-link" href="editing.html#previous-target-element"></a></dfn>, which is the element
  currently selected for the drop part of the drag-and-drop operation.</p>
     <p>The <a data-link-type="dfn" href="editing.html#immediate-user-selection">immediate user selection</a> changes as the user selects different elements
  (either by pointing at them with a pointing device, or by selecting them in some other way). The <a data-link-type="dfn" href="editing.html#previous-target-element">current target element</a> changes when the <a data-link-type="dfn" href="editing.html#immediate-user-selection">immediate user selection</a> changes, based on the results of event listeners in the document, as described below.</p>
     <p>Both the <a data-link-type="dfn" href="editing.html#previous-target-element">current target element</a> and the <a data-link-type="dfn" href="editing.html#immediate-user-selection">immediate user selection</a> can
  be null, which means no target element is selected. They can also both be elements in other
  (DOM-based) documents, or other (non-Web) programs altogether. (For example, a user could drag
  text to a word-processor.) The <a data-link-type="dfn" href="editing.html#previous-target-element">current target element</a> is initially null.</p>
     <p>In addition, there is also a <dfn data-dfn-type="dfn" data-noexport="" id="current-drag-operation">current drag operation<a class="self-link" href="editing.html#current-drag-operation"></a></dfn>, which can take on the values
  "<dfn class="css" data-dfn-for="drag" data-dfn-type="value" data-export="" id="valdef-drag-none"><code>none</code><a class="self-link" href="editing.html#valdef-drag-none"></a></dfn>", "<dfn class="css" data-dfn-for="drag" data-dfn-type="value" data-export="" id="valdef-drag-copy"><code>copy</code><a class="self-link" href="editing.html#valdef-drag-copy"></a></dfn>", "<dfn class="css" data-dfn-for="drag" data-dfn-type="value" data-export="" id="valdef-drag-link"><code>link</code><a class="self-link" href="editing.html#valdef-drag-link"></a></dfn>", and "<dfn class="css" data-dfn-for="drag" data-dfn-type="value" data-export="" id="valdef-drag-move"><code>move</code><a class="self-link" href="editing.html#valdef-drag-move"></a></dfn>". Initially, it has the value
  "<code>none</code>". It is updated by the user agent
  as described in the steps below.</p>
     <p>User agents must, as soon as the drag operation is <a data-link-type="dfn" href="editing.html#initiated">initiated</a> and every 350ms (±200ms) thereafter for as long as the drag
  operation is ongoing, <a data-link-type="dfn" href="webappapis.html#queuing">queue a task</a> to perform the following steps in sequence:</p>
     <ol>
      <li>
       <p>If the user agent is still performing the previous iteration of the sequence (if any) when
    the next iteration becomes due, abort these steps for this iteration (effectively "skipping
    missed frames" of the drag-and-drop operation).</p>
      </li><li>
       <p><a data-link-type="dfn" href="editing.html#fire-a-dnd-event">Fire a DND event</a> named <code>drag</code> at the <a data-link-type="dfn" href="editing.html#source-node">source node</a>. If this event is canceled, the user agent must set the <a data-link-type="dfn" href="editing.html#current-drag-operation">current
    drag operation</a> to "<code>none</code>" (no
    drag operation).</p>
      </li><li>
       <p>If the <code>drag</code> event was not canceled and the user has not
    ended the drag-and-drop operation, check the state of the drag-and-drop operation, as
    follows:</p>
       <ol>
        <li>
         <p>If the user is indicating a different <a data-link-type="dfn" href="editing.html#immediate-user-selection">immediate user selection</a> than during the
      last iteration (or if this is the first iteration), and if this <a data-link-type="dfn" href="editing.html#immediate-user-selection">immediate user
      selection</a> is not the same as the <a data-link-type="dfn" href="editing.html#previous-target-element">current target element</a>, then <a data-link-type="dfn" href="editing.html#fire-a-dnd-event">fire a
      DND event</a> named <code>dragexit</code> at the <a data-link-type="dfn" href="editing.html#previous-target-element">current
      target element</a>, and then update the <a data-link-type="dfn" href="editing.html#previous-target-element">current target element</a> as follows:</p>
         <dl class="switch">
          <dt>If the new <a data-link-type="dfn" href="editing.html#immediate-user-selection">immediate user selection</a> is null
          </dt><dd>Set the <a data-link-type="dfn" href="editing.html#previous-target-element">current target element</a> to null also.
          </dd><dt>If the new <a data-link-type="dfn" href="editing.html#immediate-user-selection">immediate user selection</a> is in a non-DOM document or
        application
          </dt><dd>Set the <a data-link-type="dfn" href="editing.html#previous-target-element">current target element</a> to the <a data-link-type="dfn" href="editing.html#immediate-user-selection">immediate user
        selection</a>.
          </dd><dt>Otherwise
          </dt><dd>
           <p><a data-link-type="dfn" href="editing.html#fire-a-dnd-event">Fire a DND event</a> named <code>dragenter</code> at the <a data-link-type="dfn" href="editing.html#immediate-user-selection">immediate user selection</a>.</p>
           <p>If the event is canceled, then set the <a data-link-type="dfn" href="editing.html#previous-target-element">current target element</a> to the <a data-link-type="dfn" href="editing.html#immediate-user-selection">immediate user selection</a>.</p>
           <p>Otherwise, run the appropriate step from the following list:</p>
           <dl class="switch">
            <dt>If the <a data-link-type="dfn" href="editing.html#immediate-user-selection">immediate user selection</a> is a text field (e.g. <code><a data-link-type="element" href="semantics.html#elementdef-textarea">textarea</a></code>, or an <code><a data-link-type="element" href="semantics.html#elementdef-input">input</a></code> element whose <code>type</code> attribute is in the <a data-link-type="dfn" href="dom.html#text">Text</a> state) or an <a data-link-type="dfn" href="editing.html#editing-host">editing host</a> or <a data-link-type="dfn" href="editing.html#editable">editable</a> element, and the <a data-link-type="dfn" href="editing.html#drag-data-store-item-list">drag data store item list</a> has an item
          with <a data-link-type="dfn" href="editing.html#item-type-string">the drag data item type string</a> "<code>text/plain</code>" and <a data-link-type="dfn" href="editing.html#a-drag-data-item-kind">the
          drag data item kind</a> <i>Plain Unicode string</i>
            </dt><dd>Set the <a data-link-type="dfn" href="editing.html#previous-target-element">current target element</a> to the <a data-link-type="dfn" href="editing.html#immediate-user-selection">immediate user
          selection</a> anyway.
            </dd><dt>If the <a data-link-type="dfn" href="editing.html#immediate-user-selection">immediate user selection</a> is an element with a <code>dropzone</code> attribute that <a data-link-type="dfn" href="https://drafts.csswg.org/selectors-4/#match">matches</a> the <a data-link-type="dfn" href="editing.html#drag-data-store">drag data store</a>
            </dt><dd>Set the <a data-link-type="dfn" href="editing.html#previous-target-element">current target element</a> to the <a data-link-type="dfn" href="editing.html#immediate-user-selection">immediate user
          selection</a> anyway.
            </dd><dt>If the <a data-link-type="dfn" href="editing.html#immediate-user-selection">immediate user selection</a> is an element that itself has an ancestor
          element with a <code>dropzone</code> attribute that <a data-link-type="dfn" href="https://drafts.csswg.org/selectors-4/#match">matches</a> the <a data-link-type="dfn" href="editing.html#drag-data-store">drag data store</a>
            </dt><dd>
             <p>Let <var>new target</var> be the nearest (deepest) such ancestor element.</p>
             <p>If the <a data-link-type="dfn" href="editing.html#immediate-user-selection">immediate user selection</a> is <var>new target</var>, then leave the <a data-link-type="dfn" href="editing.html#previous-target-element">current target element</a> unchanged.</p>
             <p>Otherwise, <a data-link-type="dfn" href="editing.html#fire-a-dnd-event">fire a DND event</a> named <code>dragenter</code> at <var>new target</var>, with the current <a data-link-type="dfn" href="editing.html#previous-target-element">current target element</a> as the specific <var>related target</var>. Then, set
          the <a data-link-type="dfn" href="editing.html#previous-target-element">current target element</a> to <var>new target</var>, regardless of whether
          that event was canceled or not.</p>
            </dd><dt>If the <a data-link-type="dfn" href="editing.html#immediate-user-selection">immediate user selection</a> is <a href="semantics.html#the-body-element">the <code>body</code> element</a>
            </dt><dd>Leave the <a data-link-type="dfn" href="editing.html#previous-target-element">current target element</a> unchanged.
            </dd><dt>Otherwise
            </dt><dd>
             <p><a data-link-type="dfn" href="editing.html#fire-a-dnd-event">Fire a DND event</a> named <code>dragenter</code> at <a href="semantics.html#the-body-element">the <code>body</code> element</a>, if there is one, or at the <code>Document</code> object,
          if not. Then, set the <a data-link-type="dfn" href="editing.html#previous-target-element">current target element</a> to <a href="semantics.html#the-body-element">the <code>body</code> element</a>, regardless of whether that event was canceled or not.</p>
           </dd></dl>
         </dd></dl>
        </li><li>
         <p>If the previous step caused the <a data-link-type="dfn" href="editing.html#previous-target-element">current target element</a> to change, and if the
      previous target element was not null or a part of a non-DOM document, then <a data-link-type="dfn" href="editing.html#fire-a-dnd-event">fire a DND
      event</a> named <code>dragleave</code> at the previous target
      element, with the new <a data-link-type="dfn" href="editing.html#previous-target-element">current target element</a> as the specific <var>related
      target</var>.</p>
        </li><li>
         <p>If the <a data-link-type="dfn" href="editing.html#previous-target-element">current target element</a> is a DOM element, then <a data-link-type="dfn" href="editing.html#fire-a-dnd-event">fire a DND
      event</a> named <code>dragover</code> at this <a data-link-type="dfn" href="editing.html#previous-target-element">current
      target element</a>.</p>
         <p>If the <code>dragover</code> event is not canceled, run the
      appropriate step from the following list:</p>
         <dl class="switch">
          <dt>If the <a data-link-type="dfn" href="editing.html#previous-target-element">current target element</a> is a text field (e.g. <code><a data-link-type="element" href="semantics.html#elementdef-textarea">textarea</a></code>,
        or an <code><a data-link-type="element" href="semantics.html#elementdef-input">input</a></code> element whose <code>type</code> attribute
        is in the <a data-link-type="dfn" href="dom.html#text">Text</a> state) or an <a data-link-type="dfn" href="editing.html#editing-host">editing
        host</a> or <a data-link-type="dfn" href="editing.html#editable">editable</a> element, and the <a data-link-type="dfn" href="editing.html#drag-data-store-item-list">drag data store item list</a> has an item with <a data-link-type="dfn" href="editing.html#item-type-string">the drag data item type string</a> "<code>text/plain</code>" and <a data-link-type="dfn" href="editing.html#a-drag-data-item-kind">the drag data item kind</a> <i>Plain Unicode string</i>
          </dt><dd>Set the <a data-link-type="dfn" href="editing.html#current-drag-operation">current drag operation</a> to either "<code>copy</code>" or "<code>move</code>", as appropriate given the platform
        conventions.
          </dd><dt>If the <a data-link-type="dfn" href="editing.html#previous-target-element">current target element</a> is an element with a <code>dropzone</code> attribute that <a data-link-type="dfn" href="https://drafts.csswg.org/selectors-4/#match">matches</a> the <a data-link-type="dfn" href="editing.html#drag-data-store">drag data store</a> and <a data-link-type="dfn" href="editing.html#specified">specifies an operation</a>
          </dt><dd>Set the <a data-link-type="dfn" href="editing.html#current-drag-operation">current drag operation</a> to the operation <a data-link-type="dfn" href="editing.html#specified">specified</a> by the <code>dropzone</code> attribute of the <a data-link-type="dfn" href="editing.html#previous-target-element">current target
        element</a>. 
          </dd><dt>If the <a data-link-type="dfn" href="editing.html#previous-target-element">current target element</a> is an element with a <code>dropzone</code> attribute that <a data-link-type="dfn" href="https://drafts.csswg.org/selectors-4/#match">matches</a> the <a data-link-type="dfn" href="editing.html#drag-data-store">drag data store</a> and does not <a data-link-type="dfn" href="editing.html#specified">specify an operation</a>
          </dt><dd>Set the <a data-link-type="dfn" href="editing.html#current-drag-operation">current drag operation</a> to "<code>copy</code>". 
          </dd><dt>Otherwise
          </dt><dd>Reset the <a data-link-type="dfn" href="editing.html#current-drag-operation">current drag operation</a> to "<code>none</code>".
         </dd></dl>
         <p>Otherwise (if the <code>dragover</code> event <em>is</em> canceled), set the <a data-link-type="dfn" href="editing.html#current-drag-operation">current drag operation</a> based on the values of the <code>effectAllowed</code> and <code>dropEffect</code> attributes of the <code>DragEvent</code> object’s <code>dataTransfer</code> object as they stood after the event <a data-link-type="dfn" href="infrastructure.html#dispatch">dispatch</a> finished, as per the following table:</p>
         <table>
          <thead>
           <tr>
            <th><code>effectAllowed</code>
            </th><th><code>dropEffect</code>
            </th><th>Drag operation
          </th></tr></thead><tbody>
           <tr>
            <td>"<code>uninitialized</code>", "<code>copy</code>", "<code>copyLink</code>", "<code>copyMove</code>", or "<code>all</code>"
            </td><td>"<code>copy</code>"
            </td><td>"<code>copy</code>"
           </td></tr><tr>
            <td>"<code>uninitialized</code>", "<code>link</code>", "<code>copyLink</code>", "<code>linkMove</code>", or "<code>all</code>"
            </td><td>"<code>link</code>"
            </td><td>"<code>link</code>"
           </td></tr><tr>
            <td>"<code>uninitialized</code>", "<code>move</code>", "<code>copyMove</code>", "<code>linkMove</code>", or "<code>all</code>"
            </td><td>"<code>move</code>"
            </td><td>"<code>move</code>"
           </td></tr><tr>
            <td colspan="2">Any other case
            </td><td>"<code>none</code>"
         </td></tr></tbody></table>
        </li><li>
         <p>Otherwise, if the <a data-link-type="dfn" href="editing.html#previous-target-element">current target element</a> is not a DOM element, use
      platform-specific mechanisms to determine what drag operation is being performed (none, copy,
      link, or move), and set the <a data-link-type="dfn" href="editing.html#current-drag-operation">current drag operation</a> accordingly.</p>
        </li><li>
         <p>Update the drag feedback (e.g. the mouse cursor) to match the <a data-link-type="dfn" href="editing.html#current-drag-operation">current drag
      operation</a>, as follows:</p>
         <table>
          <thead>
           <tr>
            <th>Drag operation
            </th><th>Feedback
          </th></tr></thead><tbody>
           <tr>
            <td>"<code>copy</code>"
            </td><td>Data will be copied if dropped here.
           </td></tr><tr>
            <td>"<code>link</code>"
            </td><td>Data will be linked if dropped here.
           </td></tr><tr>
            <td>"<code>move</code>"
            </td><td>Data will be moved if dropped here.
           </td></tr><tr>
            <td>"<code>none</code>"
            </td><td>No operation allowed, dropping here will cancel the drag-and-drop operation.
         </td></tr></tbody></table>
       </li></ol>
      </li><li>
       <p>Otherwise, if the user ended the drag-and-drop operation (e.g. by releasing the mouse button
    in a mouse-driven drag-and-drop interface), or if the <code>drag</code> event was canceled, then this will be the last iteration. Run the following steps, then stop the
    drag-and-drop operation:</p>
       <ol>
        <li>
         <p>If the <a data-link-type="dfn" href="editing.html#current-drag-operation">current drag operation</a> is "<code>none</code>" (no drag operation), or, if the user
      ended the drag-and-drop operation by canceling it (e.g. by hitting the <kbd>Escape</kbd> key),
      or if the <a data-link-type="dfn" href="editing.html#previous-target-element">current target element</a> is null, then the drag operation failed. Run
      these substeps:</p>
         <ol>
          <li>Let <var>dropped</var> be false.
          </li><li>If the <a data-link-type="dfn" href="editing.html#previous-target-element">current target element</a> is a DOM element, <a data-link-type="dfn" href="editing.html#fire-a-dnd-event">fire a DND
        event</a> named <code>dragleave</code> at it; otherwise, if
        it is not null, use platform-specific conventions for drag cancelation.
          </li><li>Set the <a data-link-type="dfn" href="editing.html#current-drag-operation">current drag operation</a> to "<code>none</code>".
         </li></ol>
         <p>Otherwise, the drag operation might be a success; run these substeps:</p>
         <ol>
          <li>Let <var>dropped</var> be true.
          </li><li>If the <a data-link-type="dfn" href="editing.html#previous-target-element">current target element</a> is a DOM element, <a data-link-type="dfn" href="editing.html#fire-a-dnd-event">fire a DND
        event</a> named <code>drop</code> at it; otherwise, use
        platform-specific conventions for indicating a drop.
          </li><li>
           <p>If the event is canceled, set the <a data-link-type="dfn" href="editing.html#current-drag-operation">current drag operation</a> to the value of the <code>dropEffect</code> attribute of the <code>DragEvent</code> object’s <code>dataTransfer</code> object as it stood after the event <a data-link-type="dfn" href="infrastructure.html#dispatch">dispatch</a> finished.</p>
           <p>Otherwise, the event is not canceled; perform the event’s default action, which depends
        on the exact target as follows:</p>
           <dl class="switch">
            <dt>If the <a data-link-type="dfn" href="editing.html#previous-target-element">current target element</a> is a text field (e.g. <code><a data-link-type="element" href="semantics.html#elementdef-textarea">textarea</a></code>,
          or an <code><a data-link-type="element" href="semantics.html#elementdef-input">input</a></code> element whose <code>type</code> attribute
          is in the <a data-link-type="dfn" href="dom.html#text">Text</a> state) or an <a data-link-type="dfn" href="editing.html#editing-host">editing
          host</a> or <a data-link-type="dfn" href="editing.html#editable">editable</a> element, and the <a data-link-type="dfn" href="editing.html#drag-data-store-item-list">drag data store item
          list</a> has an item with <a data-link-type="dfn" href="editing.html#item-type-string">the drag data item type string</a> "<code>text/plain</code>" and <a data-link-type="dfn" href="editing.html#a-drag-data-item-kind">the drag data item kind</a> <i>Plain Unicode
          string</i>
            </dt><dd>Insert the actual data of the first item in the <a data-link-type="dfn" href="editing.html#drag-data-store-item-list">drag data store item
          list</a> to have <a data-link-type="dfn" href="editing.html#item-type-string">a drag data item type
          string</a> of "<code>text/plain</code>" and <a data-link-type="dfn" href="editing.html#a-drag-data-item-kind">a drag
          data item kind</a> that is <i>Plain Unicode string</i> into the text field or <a data-link-type="dfn" href="editing.html#editing-host">editing host</a> or <a data-link-type="dfn" href="editing.html#editable">editable</a> element in a manner consistent with
          platform-specific conventions (e.g. inserting it at the current mouse cursor position, or
          inserting it at the end of the field).
            </dd><dt>Otherwise
            </dt><dd>Reset the <a data-link-type="dfn" href="editing.html#current-drag-operation">current drag operation</a> to "<code>none</code>".
           </dd></dl>
         </li></ol>
        </li><li>
         <p><a data-link-type="dfn" href="editing.html#fire-a-dnd-event">Fire a DND event</a> named <code>dragend</code> at the <a data-link-type="dfn" href="editing.html#source-node">source node</a>.</p>
        </li><li>
         <p>Run the appropriate steps from the following list as the default action of the <code>dragend</code> event:</p>
         <dl class="switch">
          <dt>If <var>dropped</var> is true, the <a data-link-type="dfn" href="editing.html#previous-target-element">current target element</a> is a <i>text
        field</i> (see below), the <a data-link-type="dfn" href="editing.html#current-drag-operation">current drag operation</a> is "<code>move</code>", and the source of the
        drag-and-drop operation is a selection in the DOM that is entirely contained within an <a data-link-type="dfn" href="editing.html#editing-host">editing host</a>
          </dt><dd><a data-link-type="dfn" href="editing.html#delete-the-selection">Delete the selection</a>.
          </dd><dt>If <var>dropped</var> is true, the <a data-link-type="dfn" href="editing.html#previous-target-element">current target element</a> is a <i>text
        field</i> (see below), the <a data-link-type="dfn" href="editing.html#current-drag-operation">current drag operation</a> is "<code>move</code>", and the source of the
        drag-and-drop operation is a selection in a text field
          </dt><dd>The user agent should delete the dragged selection from the relevant text
        field.
          </dd><dt>If <var>dropped</var> is false or if the <a data-link-type="dfn" href="editing.html#current-drag-operation">current drag operation</a> is "<code>none</code>"
          </dt><dd>The drag was canceled. If the platform conventions dictate that this be represented to
        the user (e.g. by animating the dragged selection going back to the source of the
        drag-and-drop operation), then do so.
          </dd><dt>Otherwise
          </dt><dd>The event has no default action.
         </dd></dl>
         <p>For the purposes of this step, a <i>text field</i> is a <code><a data-link-type="element" href="semantics.html#elementdef-textarea">textarea</a></code> element or an <code><a data-link-type="element" href="semantics.html#elementdef-input">input</a></code> element whose <code><a data-link-type="element-attr" href="semantics.html#element-attrdef-input-type">type</a></code> attribute is in
      one of the <a data-link-type="element-state" href="semantics.html#element-statedef-input-text">Text</a>, <a data-link-type="element-state" href="semantics.html#element-statedef-input-search">Search</a>, <a data-link-type="element-state" href="semantics.html#element-statedef-input-telephone">Telephone</a>, <a data-link-type="element-state" href="semantics.html#element-statedef-input-url">URL</a>, <a data-link-type="element-state" href="semantics.html#element-statedef-input-e-mail">E-mail</a>, <a data-link-type="element-state" href="semantics.html#element-statedef-input-password">Password</a>, or <a data-link-type="element-state" href="semantics.html#element-statedef-input-number">Number</a> states.</p>
       </li></ol>
     </li></ol>
     <p class="note" role="note"> User agents are encouraged to consider how to react to drags near the edge of scrollable
      regions. For example, if a user drags a link to the bottom of the viewport on a long page, it
      might make sense to scroll the page so that the user can drop the link lower on the page. </p>
     <p class="note" role="note"> This model is independent of which <code>Document</code> object the nodes involved are from;
      the events are fired as described above and the rest of the processing model runs as described
      above, irrespective of how many documents are involved in the operation. </p>
    </div>
    <h4 class="heading settled" data-level="5.7.6" id="events-summary"><span class="secno">5.7.6. </span><span class="content">Events summary</span><a class="self-link" href="editing.html#events-summary"></a></h4>
    <p><em>This section is non-normative.</em></p>
    <p>The following events are involved in the drag-and-drop model.</p>
    <table>
     <thead>
      <tr>
       <th>Event Name
       </th><th>Target
       </th><th>Cancelable?
       </th><th><a data-link-type="dfn" href="editing.html#drag-data-store-mode">Drag data store mode</a>
       </th><th><code>dropEffect</code>
       </th><th>Default Action
     </th></tr></thead><tbody>
      <tr>
       <td><dfn data-dfn-for="global" data-dfn-type="dfn" data-noexport="" events="" id="global-dragstart"><code>dragstart</code><a class="self-link" href="editing.html#global-dragstart"></a></dfn>
       </td><td><a data-link-type="dfn" href="editing.html#source-node">Source node</a>
       </td><td>✓ Cancelable
       </td><td><a data-link-type="dfn" href="editing.html#read-write-mode">Read/write mode</a> 
       </td><td>"<code>none</code>"
       </td><td>Initiate the drag-and-drop operation
      </td></tr><tr>
       <td><dfn data-dfn-for="global" data-dfn-type="dfn" data-noexport="" events="" id="global-drag"><code>drag</code><a class="self-link" href="editing.html#global-drag"></a></dfn>
       </td><td><a data-link-type="dfn" href="editing.html#source-node">Source node</a>
       </td><td>✓ Cancelable
       </td><td><a data-link-type="dfn" href="editing.html#protected-mode">Protected mode</a> 
       </td><td>"<code>none</code>"
       </td><td>Continue the drag-and-drop operation
      </td></tr><tr>
       <td><dfn data-dfn-for="global" data-dfn-type="dfn" data-noexport="" events="" id="global-dragenter"><code>dragenter</code><a class="self-link" href="editing.html#global-dragenter"></a></dfn>
       </td><td><a data-link-type="dfn" href="editing.html#immediate-user-selection">Immediate user selection</a> or <a href="semantics.html#the-body-element">the <code>body</code> element</a>
       </td><td>✓ Cancelable
       </td><td><a data-link-type="dfn" href="editing.html#protected-mode">Protected mode</a> 
       </td><td>Based on <code>effectAllowed</code> value
       </td><td>Reject <a data-link-type="dfn" href="editing.html#immediate-user-selection">immediate user selection</a> as potential <a data-link-type="dfn" href="browsers.html#target-element">target element</a>
      </td></tr><tr>
       <td><dfn data-dfn-for="global" data-dfn-type="dfn" data-noexport="" events="" id="global-dragexit"><code>dragexit</code><a class="self-link" href="editing.html#global-dragexit"></a></dfn>
       </td><td><a data-link-type="dfn" href="editing.html#previous-target-element">Previous target element</a>
       </td><td>—
       </td><td><a data-link-type="dfn" href="editing.html#protected-mode">Protected mode</a> 
       </td><td>"<code>none</code>"
       </td><td>None
      </td></tr><tr>
       <td><dfn data-dfn-for="global" data-dfn-type="dfn" data-noexport="" events="" id="global-dragleave"><code>dragleave</code><a class="self-link" href="editing.html#global-dragleave"></a></dfn>
       </td><td><a data-link-type="dfn" href="editing.html#previous-target-element">Previous target element</a>
       </td><td>—
       </td><td><a data-link-type="dfn" href="editing.html#protected-mode">Protected mode</a> 
       </td><td>"<code>none</code>"
       </td><td>None
      </td></tr><tr>
       <td><dfn data-dfn-for="global" data-dfn-type="dfn" data-noexport="" events="" id="global-dragover"><code>dragover</code><a class="self-link" href="editing.html#global-dragover"></a></dfn>
       </td><td><a data-link-type="dfn" href="editing.html#previous-target-element">Current target element</a>
       </td><td>✓ Cancelable
       </td><td><a data-link-type="dfn" href="editing.html#protected-mode">Protected mode</a> 
       </td><td>Based on <code>effectAllowed</code> value
       </td><td>Reset the <a data-link-type="dfn" href="editing.html#current-drag-operation">current drag operation</a> to "none"
      </td></tr><tr>
       <td><dfn data-dfn-for="global" data-dfn-type="dfn" data-noexport="" events="" id="global-drop"><code>drop</code><a class="self-link" href="editing.html#global-drop"></a></dfn>
       </td><td><a data-link-type="dfn" href="editing.html#previous-target-element">Current target element</a>
       </td><td>✓ Cancelable
       </td><td><a data-link-type="dfn" href="editing.html#read-only-mode">Read-only mode</a> 
       </td><td><a data-link-type="dfn" href="editing.html#current-drag-operation">Current drag operation</a>
       </td><td>Varies
      </td></tr><tr>
       <td><dfn data-dfn-for="global" data-dfn-type="dfn" data-noexport="" events="" id="global-dragend"><code>dragend</code><a class="self-link" href="editing.html#global-dragend"></a></dfn>
       </td><td><a data-link-type="dfn" href="editing.html#source-node">Source node</a>
       </td><td>—
       </td><td><a data-link-type="dfn" href="editing.html#protected-mode">Protected mode</a> 
       </td><td><a data-link-type="dfn" href="editing.html#current-drag-operation">Current drag operation</a>
       </td><td>Varies
    </td></tr></tbody></table>
    <p>Not shown in the above table: all these events bubble, and the <code>effectAllowed</code> attribute always has the value it had after the <code>dragstart</code> event, defaulting to
  "<code>uninitialized</code>" in the <code>dragstart</code> event.</p>
    <h4 class="heading settled" data-level="5.7.7" id="the-draggable-attribute"><span class="secno">5.7.7. </span><span class="content">The <dfn data-dfn-for="global" data-dfn-type="element-attr" data-export="" id="element-attrdef-global-draggable"><code>draggable</code><a class="self-link" href="editing.html#element-attrdef-global-draggable"></a></dfn> attribute</span><a class="self-link" href="editing.html#the-draggable-attribute"></a></h4>
    <p>All <a data-link-type="dfn" href="infrastructure.html#html-element">html elements</a> may have the <code>draggable</code> content attribute set. The <code>draggable</code> attribute is an <a data-link-type="dfn" href="infrastructure.html#enumerated-attributes">enumerated attribute</a>. It has three states. The first
  state is <i>true</i> and it has the keyword <code>true</code>. The second state is <i>false</i> and it has the keyword <code>false</code>. The third state is <i>auto</i>; it has no keywords but
  it is the <i>missing value default</i>.</p>
    <p>The <i>true</i> state means the element is draggable; the <i>false</i> state means that it is not.
  The <i>auto</i> state uses the default behavior of the user agent.</p>
    <p>An element with a <code>draggable</code> attribute should also have a <code>title</code> attribute
  that names the element for the purpose of non-visual interactions.</p>
    <dl class="domintro">
     <dt><var>element</var> . <code>draggable</code> [ = <var>value</var> ]
     </dt><dd>
       Returns true if the element is draggable; otherwise, returns false. 
      <p>Can be set, to override the default and set the <code>draggable</code> content attribute.</p>
    </dd></dl>
    <div class="impl">
      The <code class="idl"><a data-link-type="idl" href="dom.html#dom-htmlelement-draggable">draggable</a></code> IDL attribute, whose value depends on the content
    attribute’s in the way described below, controls whether or not the element is draggable.
    Generally, only text selections are draggable, but elements whose <code>draggable</code> IDL
    attribute is true become draggable as well. 
     <p>If an element’s <code>draggable</code> content attribute has the state <i>true</i>, the <code>draggable</code> IDL attribute must return true.</p>
     <p>Otherwise, if the element’s <code>draggable</code> content attribute has the state <i>false</i>,
    the <code>draggable</code> IDL attribute must return false.</p>
     <p>Otherwise, the element’s <code>draggable</code> content attribute has the state <i>auto</i>. If
    the element is an <code><a data-link-type="element" href="semantics.html#elementdef-img">img</a></code> element, an <code><a data-link-type="element" href="semantics.html#elementdef-object">object</a></code> element that <a data-link-type="dfn" href="dom.html#represent">represents</a> an image, or an <code><a data-link-type="element" href="#a">a</a></code> element with an <code><a data-link-type="element-attr" href="semantics.html#element-attrdef-links-href">href</a></code> content
    attribute, the <code>draggable</code> IDL attribute must return true; otherwise, the <code>draggable</code> IDL attribute must return false.</p>
     <p>If the <code>draggable</code> IDL attribute is set to the value false, the <code>draggable</code> content attribute must be set to the literal value "<code>false</code>".
    If the <code>draggable</code> IDL attribute is set to the value true, the <code>draggable</code> content attribute must be set to the literal value "<code>true</code>".</p>
    </div>
    <h4 class="heading settled" data-level="5.7.8" id="the-dropzone-attribute"><span class="secno">5.7.8. </span><span class="content">The <dfn data-dfn-for="global" data-dfn-type="element-attr" data-export="" id="element-attrdef-global-dropzone"><code>dropzone</code><a class="self-link" href="editing.html#element-attrdef-global-dropzone"></a></dfn> attribute</span><a class="self-link" href="editing.html#the-dropzone-attribute"></a></h4>
    <p>All <a data-link-type="dfn" href="infrastructure.html#html-element">html elements</a> may have the <code><a data-link-type="element-attr" href="editing.html#element-attrdef-global-dropzone">dropzone</a></code> content attribute set. When specified,
  its value must be an <a data-link-type="dfn" href="infrastructure.html#unordered-set-of-unique-space-separated-tokens">unordered set of unique space-separated tokens</a> that are <a data-link-type="dfn" href="infrastructure.html#ascii-case-insensitive">ASCII case-insensitive</a>. The allowed values are the following:</p>
    <dl>
     <dt data-md="">
      <p><dfn data-dfn-type="dfn" data-noexport="" id="copy"><code>copy</code><a class="self-link" href="editing.html#copy"></a></dfn></p>
     </dt><dd data-md="">
      <p>Indicates that dropping an accepted item on the element will result in a copy of the dragged
  data.</p>
     </dd><dt data-md="">
      <p><dfn data-dfn-type="dfn" data-noexport="" id="move"><code>move</code><a class="self-link" href="editing.html#move"></a></dfn></p>
     </dt><dd data-md="">
      <p>Indicates that dropping an accepted item on the element will result in the dragged data being
  moved to the new location.</p>
     </dd><dt data-md="">
      <p><dfn data-dfn-type="dfn" data-noexport="" id="link"><code>link</code><a class="self-link" href="editing.html#link"></a></dfn></p>
     </dt><dd data-md="">
      <p>Indicates that dropping an accepted item on the element will result in a link to the original
  data.</p>
     </dd><dt data-md="">
      <p>Any keyword with eight characters or more, beginning with an <a data-link-type="dfn" href="infrastructure.html#ascii-case-insensitive">ASCII case-insensitive</a> match for the string "<code>string:</code>"</p>
     </dt><dd data-md="">
      <p>Indicates that items with <a data-link-type="dfn" href="editing.html#a-drag-data-item-kind">the drag data item kind</a> <i>Plain Unicode string</i> and <a data-link-type="dfn" href="editing.html#item-type-string">the drag data item type string</a> set to a value that matches the remainder of the keyword
  are accepted.</p>
     </dd><dt data-md="">
      <p>Any keyword with six characters or more, beginning with an <a data-link-type="dfn" href="infrastructure.html#ascii-case-insensitive">ASCII case-insensitive</a> match
  for the string "<code>file:</code>"</p>
     </dt><dd data-md="">
      <p>Indicates that items with <a data-link-type="dfn" href="editing.html#a-drag-data-item-kind">the drag data item kind</a> <i>File</i> and <a data-link-type="dfn" href="editing.html#item-type-string">the drag data item
  type string</a> set to a value that matches the remainder of the keyword are accepted.</p>
    </dd></dl>
    <p>The <code><a data-link-type="element-attr" href="editing.html#element-attrdef-global-dropzone">dropzone</a></code> content attribute’s values must not have more than one of the three
  feedback values (<code>copy</code>, <code>move</code>, and <code>link</code>) specified. If none
  are specified, the <code>copy</code> value is implied.</p>
    <p>An element with a <code><a data-link-type="element-attr" href="editing.html#element-attrdef-global-dropzone">dropzone</a></code> attribute should also have a <code>title</code> attribute
  that names the element for the purpose of non-visual interactions.</p>
    <div class="impl">
      A <code><a data-link-type="element-attr" href="editing.html#element-attrdef-global-dropzone">dropzone</a></code> attribute <dfn data-dfn-type="dfn" data-noexport="" id="matches-a-drag-data-store">matches a drag data store<a class="self-link" href="editing.html#matches-a-drag-data-store"></a></dfn> if the <a data-link-type="dfn" href="editing.html#dropzone-processing-steps"><code>dropzone</code> processing steps</a> result in a match. 
     <p>A <code><a data-link-type="element-attr" href="editing.html#element-attrdef-global-dropzone">dropzone</a></code> attribute <dfn data-dfn-type="dfn" data-lt="specified|specifies an operation|specify an operation" data-noexport="" id="specified">specifies an operation<a class="self-link" href="editing.html#specified"></a></dfn> if the <a data-link-type="dfn" href="editing.html#dropzone-processing-steps"><code>dropzone</code> processing steps</a> result in a specified operation. The specified
    operation is as given by those steps.</p>
     <p>The <dfn data-dfn-type="dfn" data-noexport="" id="dropzone-processing-steps"><code><a data-link-type="element-attr" href="editing.html#element-attrdef-global-dropzone">dropzone</a></code> processing steps<a class="self-link" href="editing.html#dropzone-processing-steps"></a></dfn> are as follows. They either result in a
    match or not, and separate from this result either in a specified operation or not, as defined
    below.</p>
     <ol>
      <li data-md="">
       <p>Let <var>value</var> be the value of the <code><a data-link-type="element-attr" href="editing.html#element-attrdef-global-dropzone">dropzone</a></code> attribute.</p>
      </li><li data-md="">
       <p>Let <var>keywords</var> be the result of <a data-link-type="dfn" href="infrastructure.html#split-a-string-on-spaces">splitting <var>value</var> on spaces</a>.</p>
      </li><li data-md="">
       <p>Let <var>matched</var> be false.</p>
      </li><li data-md="">
       <p>Let <var>operation</var> be unspecified.</p>
      </li><li data-md="">
       <p>For each value in <var>keywords</var>, if any, in the order that they were found in <var>value</var>, run the following steps.</p>
       <ol>
        <li data-md="">
         <p>Let <var>keyword</var> be the keyword.</p>
        </li><li data-md="">
         <p>If <var>keyword</var> is one of "<code>copy</code>", "<code>move</code>", or
"<code>link</code>", then: run the following substeps:</p>
         <ol>
          <li data-md="">
           <p>If <var>operation</var> is still unspecified, then let <var>operation</var> be the
string given by <var>keyword</var>.</p>
          </li><li data-md="">
           <p>Skip to the step labeled <i>end of keyword</i> below.</p>
         </li></ol>
        </li><li data-md="">
         <p>If <var>keyword</var> does not contain a U+003A COLON character (:), or if the first such
character in <var>keyword</var> is either the first character or the last character in
the string, then skip to the step labeled <i>end of keyword</i> below.</p>
        </li><li data-md="">
         <p>Let <var>kind code</var> be the substring of <var>keyword</var> from the first character
in the string to the last character in the string that is before the first U+003A COLON
character (:) in the string, <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#converted-to-ascii-lowercase">converted to ASCII lowercase</a>.</p>
        </li><li data-md="">
         <p>Jump to the appropriate step from the list below, based on the value of <var>kind code</var>:</p>
         <dl class="switch">
          <dt>If <var>kind code</var> is the string "<code>string</code>"
          </dt><dd>Let <var>kind</var> be <i>Plain Unicode string</i>.
          </dd><dt>If <var>kind code</var> is the string "<code>file</code>"
          </dt><dd>Let <var>kind</var> be <i>File</i>.
          </dd><dt>Otherwise
          </dt><dd>Skip to the step labeled <i>end of keyword</i> below.
         </dd></dl>
        </li><li data-md="">
         <p>Let <var>type</var> be the substring of <var>keyword</var> from the first character after
the first U+003A COLON character (:) in the string, to the last character in the string, <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#converted-to-ascii-lowercase">converted to ASCII lowercase</a>.</p>
        </li><li data-md="">
         <p>If there exist any items in the <a data-link-type="dfn" href="editing.html#drag-data-store-item-list">drag data store item list</a> whose <a data-link-type="dfn" href="editing.html#a-drag-data-item-kind">drag data item kind</a> is  the kind given in <var>kind</var> and whose <a data-link-type="dfn" href="editing.html#item-type-string">drag data item type string</a> is <var>type</var>, then let <var>matched</var> be
true.</p>
        </li><li data-md="">
         <p><i>End of keyword</i>: Go on to the next keyword, if any, or the next step in the overall
algorithm, if there are no more.</p>
       </li></ol>
      </li><li data-md="">
       <p>The algorithm results in a match if <var>matched</var> is true, and does not otherwise.</p>
       <p>The algorithm results in a specified operation if <var>operation</var> is not unspecified.
The specified operation, if one is specified, is the one given by <var>operation</var>.</p>
     </li></ol>
     <p>The <dfn class="idl-code" data-dfn-for="global" data-dfn-type="attribute" data-export="" id="dom-global-dropzone"><code>dropzone</code><a class="self-link" href="editing.html#dom-global-dropzone"></a></dfn> IDL attribute must <a data-link-type="dfn" href="infrastructure.html#reflection">reflect</a> the content attribute of
    the same name.</p>
     <p>The <a data-link-type="dfn" href="infrastructure.html#supported-tokens">supported tokens</a> for <code class="idl"><a data-link-type="idl" href="editing.html#dom-global-dropzone">dropzone</a></code> are the allowed values defined for the <code><a data-link-type="element-attr" href="editing.html#element-attrdef-global-dropzone">dropzone</a></code> attribute that are supported by the user agent.</p>
    </div>
    <div class="example" id="example-9b5c25fb">
     <a class="self-link" href="editing.html#example-9b5c25fb"></a> In this example, a <code><a data-link-type="element" href="semantics.html#elementdef-div">div</a></code> element is made into a drop target for image files using the <code><a data-link-type="element-attr" href="editing.html#element-attrdef-global-dropzone">dropzone</a></code> attribute. Images dropped into the target are then displayed. 
<pre class="highlight"><span class="nt">&lt;div</span> <span class="na">dropzone=</span><span class="s">"copy file:image/png file:image/gif file:image/jpeg"</span> <span class="na">ondrop=</span><span class="s">"receive(event, this)"</span><span class="nt">&gt;</span>
<span class="nt">&lt;p&gt;</span>Drop an image here to have it displayed.<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;script&gt;</span>
<span class="kd">function</span> <span class="nx">receive</span><span class="p">(</span><span class="nx">event</span><span class="p">,</span> <span class="nx">element</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">data</span> <span class="o">=</span> <span class="nx">event</span><span class="p">.</span><span class="nx">dataTransfer</span><span class="p">.</span><span class="nx">items</span><span class="p">;</span>
  <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">data</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">((</span><span class="nx">data</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">kind</span> <span class="o">==</span> <span class="s1">'file'</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">data</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">type</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="s1">'^image/'</span><span class="p">)))</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">img</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Image</span><span class="p">();</span>
      <span class="nx">img</span><span class="p">.</span><span class="nx">src</span> <span class="o">=</span> <span class="nb">window</span><span class="p">.</span><span class="nx">createObjectURL</span><span class="p">(</span><span class="nx">data</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">getAsFile</span><span class="p">());</span>
      <span class="nx">element</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">img</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="nt">&lt;/script&gt;</span></pre>
    </div>
    <div class="impl">
     <h4 class="heading settled" data-level="5.7.9" id="security-risks-in-the-drag-and-drop-model"><span class="secno">5.7.9. </span><span class="content">Security risks in the drag-and-drop model</span><a class="self-link" href="editing.html#security-risks-in-the-drag-and-drop-model"></a></h4>
     <p>User agents must not make the data added to the <code>DataTransfer</code> object during the <code>dragstart</code> event available to scripts until the <code>drop</code> event, because
    otherwise, if a user were to drag sensitive information from one document to a second document,
    crossing a hostile third document in the process, the hostile document could intercept the data.</p>
     <p>For the same reason, user agents must consider a drop to be successful only if the user
    specifically ended the drag operation — if any scripts end the drag operation, it must be
    considered unsuccessful (canceled) and the <code>drop</code> event must not be fired.</p>
     <p>User agents should take care to not start drag-and-drop operations in response to script
    actions. For example, in a mouse-and-window environment, if a script moves a window while the
    user has his mouse button depressed, the user agent would not consider that to start a drag. This is
    important because otherwise user agents could cause data to be dragged from sensitive sources and
    dropped into hostile documents without the user’s consent.</p>
     <p>User agents should filter potentially active (scripted) content (e.g. HTML) when it is dragged
    and when it is dropped, using a safelist of known-safe features. Similarly, <a data-link-type="dfn" href="https://url.spec.whatwg.org/#syntax-url-relative">relative URLs</a> should be turned into absolute URLs to avoid references changing in unexpected ways. This
    specification does not specify how this is performed.</p>
     <div class="example" id="example-d08ef7cc"><a class="self-link" href="editing.html#example-d08ef7cc"></a> Consider a hostile page providing some content and getting the user to select and drag and
      drop (or indeed, copy and paste) that content to a victim page’s <code>contenteditable</code> region. If the browser does not ensure that only safe content is dragged, potentially unsafe
      content such as scripts and event handlers in the selection, once dropped (or pasted) into the
      victim site, get the privileges of the victim site. This would thus enable a cross-site
      scripting attack. </div>
    </div>
   </section>
   
   
   
   
   
   
   
  </main>
  
  
  
  
  
  
  
  
  
  
  
  
  

 
<nav class="prev_next"> — ← <a href="semantics.html#semantics"><span class="secno">4</span> <span class="content">The elements of HTML</span></a> — <a href="index.html#contents">Table of contents</a> →<a href="browsers.html#browsers"><span class="secno">6</span> <span class="content">Loading Web pages</span></a></nav></body></html>