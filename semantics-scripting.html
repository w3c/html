<!doctype html><html lang="en">
 <head>
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
  <title>HTML 5.1: 4.12. Scripting</title>
  <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport">
  <meta content="ED" name="w3c-status">
  <link href="../default.css" rel="stylesheet" type="text/css">
  <link href="../csslogo.ico" rel="shortcut icon" type="image/x-icon">
  <link href="styles/styles-html.css" rel="stylesheet" type="text/css">
  <link href="https://www.w3.org/StyleSheets/TR/2016/W3C-ED" rel="stylesheet" type="text/css">
  <meta content="Bikeshed 1.0.0" name="generator">
<style>
        .dfn-panel {
            display: inline-block;
            position: absolute;
            z-index: 35;
            height: auto;
            width: -webkit-fit-content;
            max-width: 300px;
            max-height: 500px;
            overflow: auto;
            padding: 0.5em 0.75em;
            font: small Helvetica Neue, sans-serif, Droid Sans Fallback;
            background: #DDDDDD;
            color: black;
            border: outset 0.2em;
        }
        .dfn-panel:not(.on) { display: none; }
        .dfn-panel * { margin: 0; padding: 0; text-indent: 0; }
        .dfn-panel > b { display: block; }
        .dfn-panel a { color: black; }
        .dfn-panel a:not(:hover) { text-decoration: none !important; border-bottom: none !important; }
        .dfn-panel > b + b { margin-top: 0.25em; }
        .dfn-panel > span { display: list-item; list-style: inside; }
        .dfn-panel.activated {
            display: inline-block;
            position: fixed;
            left: .5em;
            bottom: .5em;
            margin: 0 auto;
            max-width: calc(100vw - 1.5em - .4em - .5em);
            max-height: 30vh;
        }

        .dfn-paneled { cursor: pointer; }
        </style>
<style>.highlight .hll { background-color: #ffffcc }
.highlight  { background: #ffffff; }
.highlight .c { color: #708090 } /* Comment */
.highlight .k { color: #990055 } /* Keyword */
.highlight .l { color: #000000 } /* Literal */
.highlight .n { color: #0077aa } /* Name */
.highlight .o { color: #999999 } /* Operator */
.highlight .p { color: #999999 } /* Punctuation */
.highlight .ch { color: #708090 } /* Comment.Hashbang */
.highlight .cm { color: #708090 } /* Comment.Multiline */
.highlight .cp { color: #708090 } /* Comment.Preproc */
.highlight .cpf { color: #708090 } /* Comment.PreprocFile */
.highlight .c1 { color: #708090 } /* Comment.Single */
.highlight .cs { color: #708090 } /* Comment.Special */
.highlight .kc { color: #990055 } /* Keyword.Constant */
.highlight .kd { color: #990055 } /* Keyword.Declaration */
.highlight .kn { color: #990055 } /* Keyword.Namespace */
.highlight .kp { color: #990055 } /* Keyword.Pseudo */
.highlight .kr { color: #990055 } /* Keyword.Reserved */
.highlight .kt { color: #990055 } /* Keyword.Type */
.highlight .ld { color: #000000 } /* Literal.Date */
.highlight .m { color: #000000 } /* Literal.Number */
.highlight .s { color: #a67f59 } /* Literal.String */
.highlight .na { color: #0077aa } /* Name.Attribute */
.highlight .nc { color: #0077aa } /* Name.Class */
.highlight .no { color: #0077aa } /* Name.Constant */
.highlight .nd { color: #0077aa } /* Name.Decorator */
.highlight .ni { color: #0077aa } /* Name.Entity */
.highlight .ne { color: #0077aa } /* Name.Exception */
.highlight .nf { color: #0077aa } /* Name.Function */
.highlight .nl { color: #0077aa } /* Name.Label */
.highlight .nn { color: #0077aa } /* Name.Namespace */
.highlight .py { color: #0077aa } /* Name.Property */
.highlight .nt { color: #669900 } /* Name.Tag */
.highlight .nv { color: #0077aa } /* Name.Variable */
.highlight .ow { color: #999999 } /* Operator.Word */
.highlight .mb { color: #000000 } /* Literal.Number.Bin */
.highlight .mf { color: #000000 } /* Literal.Number.Float */
.highlight .mh { color: #000000 } /* Literal.Number.Hex */
.highlight .mi { color: #000000 } /* Literal.Number.Integer */
.highlight .mo { color: #000000 } /* Literal.Number.Oct */
.highlight .sb { color: #a67f59 } /* Literal.String.Backtick */
.highlight .sc { color: #a67f59 } /* Literal.String.Char */
.highlight .sd { color: #a67f59 } /* Literal.String.Doc */
.highlight .s2 { color: #a67f59 } /* Literal.String.Double */
.highlight .se { color: #a67f59 } /* Literal.String.Escape */
.highlight .sh { color: #a67f59 } /* Literal.String.Heredoc */
.highlight .si { color: #a67f59 } /* Literal.String.Interpol */
.highlight .sx { color: #a67f59 } /* Literal.String.Other */
.highlight .sr { color: #a67f59 } /* Literal.String.Regex */
.highlight .s1 { color: #a67f59 } /* Literal.String.Single */
.highlight .ss { color: #a67f59 } /* Literal.String.Symbol */
.highlight .vc { color: #0077aa } /* Name.Variable.Class */
.highlight .vg { color: #0077aa } /* Name.Variable.Global */
.highlight .vi { color: #0077aa } /* Name.Variable.Instance */
.highlight .il { color: #000000 } /* Literal.Number.Integer.Long */
        .highlight { background: hsl(24, 20%, 95%); }
        code.highlight { padding: .1em; border-radius: .3em; }
        pre.highlight, pre > code.highlight { display: block; padding: 1em; margin: .5em 0; overflow: auto; border-radius: 0; }
        </style>
 </head><body class="h-entry">
  <div class="head">
   <header>
    <p data-fill-with="logo"><a href="http://www.w3.org/"><img alt="W3C" height="48" src="https://www.w3.org/Icons/w3c_home" width="72"></a></p>
    <h1 class="p-name no-ref allcaps" id="title">HTML 5.1</h1>
    <h2 class="no-num no-toc no-ref heading settled" id="subtitle"><span class="content">Editor&#x2019;s Draft, <time class="dt-updated" datetime="2016-04-12">12 April 2016</time></span></h2>
   </header>
   
   
   
   
  </div>
  
  
  
  
  
  <nav data-fill-with="table-of-contents" id="toc"><p class="prev_next">&#x2190; <a href="interactive-elements.html#interactive-elements"><span class="secno">4.11</span> <span class="content">Interactive elements</span></a> &#x2014; <a href="index.html#contents">Table of contents</a> &#x2014; <a href="common-idioms-without-dedicated-elements.html#common-idioms-without-dedicated-elements"><span class="secno">4.13</span> <span class="content">Common idioms without dedicated elements</span></a> &#x2192;</p>
   <h2 class="no-num no-toc no-ref" id="contents">Table of Contents</h2>
   <ol class="toc" role="directory"><li>
       <a href="semantics-scripting.html#semantics-scripting"><span class="secno">4.12</span> <span class="content">Scripting</span></a>
       <ol class="toc">
        <li>
         <a href="semantics-scripting.html#the-script-element"><span class="secno">4.12.1</span> <span class="content">The <span><code>script</code></span> element</span></a>
         <ol class="toc">
          <li><a href="semantics-scripting.html#scripting-languages"><span class="secno">4.12.1.1</span> <span class="content">Scripting languages</span></a>
          </li><li><a href="semantics-scripting.html#restrictions-for-contents-of-script-elements"><span class="secno">4.12.1.2</span> <span class="content"><span>Restrictions for contents of <code><span>script</span></code> elements</span></span></a>
          </li><li><a href="semantics-scripting.html#inline-documentation-for-external-scripts"><span class="secno">4.12.1.3</span> <span class="content"><span>Inline documentation for external scripts</span></span></a>
          </li><li><a href="semantics-scripting.html#interaction-of-script-elements-and-xslt"><span class="secno">4.12.1.4</span> <span class="content">Interaction of <code><span>script</span></code> elements and XSLT</span></a>
         </li></ol>
        </li><li><a href="semantics-scripting.html#the-noscript-element"><span class="secno">4.12.2</span> <span class="content">The <span><code>noscript</code></span> element</span></a>
        </li><li>
         <a href="semantics-scripting.html#the-template-element"><span class="secno">4.12.3</span> <span class="content">The <span><code>template</code></span> element</span></a>
         <ol class="toc">
          <li><a href="semantics-scripting.html#interaction-of-template-elements-with-xslt-and-xpath"><span class="secno">4.12.3.1</span> <span class="content">Interaction of <code><span>template</span></code> elements with XSLT and XPath</span></a>
         </li></ol>
        </li><li>
         <a href="semantics-scripting.html#the-canvas-element"><span class="secno">4.12.4</span> <span class="content">The <span><code>canvas</code></span> element</span></a>
         <ol class="toc">
          <li><a href="semantics-scripting.html#proxying-canvases-to-workers"><span class="secno">4.12.4.1</span> <span class="content">Proxying canvases to workers</span></a>
          </li><li><a href="semantics-scripting.html#color-spaces-and-color-correction"><span class="secno">4.12.4.2</span> <span class="content">Color spaces and color correction</span></a>
          </li><li><a href="semantics-scripting.html#serializing-bitmaps-to-a-file"><span class="secno">4.12.4.3</span> <span class="content">Serializing bitmaps to a file</span></a>
          </li><li><a href="semantics-scripting.html#security-with-canvas-elements"><span class="secno">4.12.4.4</span> <span class="content">Security with <code><span>canvas</span></code> elements</span></a>
         </li></ol>
       </li></ol>
      </li></ol>
  </nav>
  <main><section>
     <h3 class="heading settled" data-level="4.12" id="semantics-scripting"><span class="secno">4.12. </span><span class="content">Scripting</span><a class="self-link" href="semantics-scripting.html#semantics-scripting"></a></h3>
     <p>Scripts allow authors to add interactivity to their documents.</p>
     <p>Authors are encouraged to use declarative alternatives to scripting where possible, as
  declarative mechanisms are often more maintainable, and many users disable scripting.</p>
     <div class="example" id="example-2391b785"><a class="self-link" href="semantics-scripting.html#example-2391b785"></a> For example, instead of using script to show or hide a section to show more details, the <code><a data-link-type="element" href="interactive-elements.html#elementdef-details" id="ref-for-elementdef-details-16">details</a></code> element could be used. </div>
     <p>Authors are also encouraged to make their applications degrade gracefully in the absence of
  scripting support.</p>
     <div class="example" id="example-9ee1ebdb"><a class="self-link" href="semantics-scripting.html#example-9ee1ebdb"></a> For example, if an author provides a link in a table header to dynamically resort the table,
    the link could also be made to function without scripts by requesting the sorted table from the
    server. </div>
     <h4 class="heading settled" data-level="4.12.1" id="the-script-element"><span class="secno">4.12.1. </span><span class="content">The <dfn class="dfn-paneled" data-dfn-type="element" data-export="" id="elementdef-script"><code>script</code><span class="dfn-panel"><b><a href="semantics-scripting.html#elementdef-script">#elementdef-script</a></b><b>Referenced in:</b><span><a href="introduction.html#ref-for-elementdef-script-1">1.9. A quick introduction to HTML</a></span><span><a href="introduction.html#ref-for-elementdef-script-2">1.9.1. Writing secure applications with HTML</a></span><span><a href="introduction.html#ref-for-elementdef-script-3">1.10.3. 
  Restrictions on content models and on attribute values </a> <a href="introduction.html#ref-for-elementdef-script-4">(2)</a></span><span><a href="infrastructure.html#ref-for-elementdef-script-5">2.2.1. Conformance classes</a> <a href="infrastructure.html#ref-for-elementdef-script-6">(2)</a> <a href="infrastructure.html#ref-for-elementdef-script-7">(3)</a></span><span><a href="dom.html#ref-for-elementdef-script-8">3.1.3. DOM tree accessors</a> <a href="dom.html#ref-for-elementdef-script-9">(2)</a> <a href="dom.html#ref-for-elementdef-script-10">(3)</a></span><span><a href="dom.html#ref-for-elementdef-script-11">3.2.4.2.1. Metadata content</a></span><span><a href="dom.html#ref-for-elementdef-script-12">3.2.4.2.2. Flow content</a></span><span><a href="dom.html#ref-for-elementdef-script-13">3.2.4.2.5. Phrasing content</a></span><span><a href="dom.html#ref-for-elementdef-script-14">3.2.4.2.9. Script-supporting elements</a></span><span><a href="dom.html#ref-for-elementdef-script-15">3.2.5.6. The dir attribute</a></span><span><a href="document-metadata.html#ref-for-elementdef-script-16">4.2.5. The meta element</a></span><span><a href="sections.html#ref-for-elementdef-script-17">4.3.1. The body element</a></span><span><a href="sec-forms.html#ref-for-elementdef-script-18">4.10.10. The option element</a> <a href="sec-forms.html#ref-for-elementdef-script-19">(2)</a> <a href="sec-forms.html#ref-for-elementdef-script-20">(3)</a></span><span><a href="semantics-scripting.html#ref-for-elementdef-script-21">4.12.1. The script element</a> <a href="semantics-scripting.html#ref-for-elementdef-script-22">(2)</a> <a href="semantics-scripting.html#ref-for-elementdef-script-23">(3)</a> <a href="semantics-scripting.html#ref-for-elementdef-script-24">(4)</a> <a href="semantics-scripting.html#ref-for-elementdef-script-25">(5)</a> <a href="semantics-scripting.html#ref-for-elementdef-script-26">(6)</a> <a href="semantics-scripting.html#ref-for-elementdef-script-27">(7)</a> <a href="semantics-scripting.html#ref-for-elementdef-script-28">(8)</a> <a href="semantics-scripting.html#ref-for-elementdef-script-29">(9)</a> <a href="semantics-scripting.html#ref-for-elementdef-script-30">(10)</a> <a href="semantics-scripting.html#ref-for-elementdef-script-31">(11)</a> <a href="semantics-scripting.html#ref-for-elementdef-script-32">(12)</a> <a href="semantics-scripting.html#ref-for-elementdef-script-33">(13)</a> <a href="semantics-scripting.html#ref-for-elementdef-script-34">(14)</a> <a href="semantics-scripting.html#ref-for-elementdef-script-35">(15)</a> <a href="semantics-scripting.html#ref-for-elementdef-script-36">(16)</a> <a href="semantics-scripting.html#ref-for-elementdef-script-37">(17)</a> <a href="semantics-scripting.html#ref-for-elementdef-script-38">(18)</a> <a href="semantics-scripting.html#ref-for-elementdef-script-39">(19)</a> <a href="semantics-scripting.html#ref-for-elementdef-script-40">(20)</a> <a href="semantics-scripting.html#ref-for-elementdef-script-41">(21)</a> <a href="semantics-scripting.html#ref-for-elementdef-script-42">(22)</a> <a href="semantics-scripting.html#ref-for-elementdef-script-43">(23)</a> <a href="semantics-scripting.html#ref-for-elementdef-script-44">(24)</a> <a href="semantics-scripting.html#ref-for-elementdef-script-45">(25)</a> <a href="semantics-scripting.html#ref-for-elementdef-script-46">(26)</a> <a href="semantics-scripting.html#ref-for-elementdef-script-47">(27)</a> <a href="semantics-scripting.html#ref-for-elementdef-script-48">(28)</a> <a href="semantics-scripting.html#ref-for-elementdef-script-49">(29)</a> <a href="semantics-scripting.html#ref-for-elementdef-script-50">(30)</a> <a href="semantics-scripting.html#ref-for-elementdef-script-51">(31)</a> <a href="semantics-scripting.html#ref-for-elementdef-script-52">(32)</a> <a href="semantics-scripting.html#ref-for-elementdef-script-53">(33)</a> <a href="semantics-scripting.html#ref-for-elementdef-script-54">(34)</a> <a href="semantics-scripting.html#ref-for-elementdef-script-55">(35)</a> <a href="semantics-scripting.html#ref-for-elementdef-script-56">(36)</a> <a href="semantics-scripting.html#ref-for-elementdef-script-57">(37)</a> <a href="semantics-scripting.html#ref-for-elementdef-script-58">(38)</a> <a href="semantics-scripting.html#ref-for-elementdef-script-59">(39)</a> <a href="semantics-scripting.html#ref-for-elementdef-script-60">(40)</a> <a href="semantics-scripting.html#ref-for-elementdef-script-61">(41)</a> <a href="semantics-scripting.html#ref-for-elementdef-script-62">(42)</a> <a href="semantics-scripting.html#ref-for-elementdef-script-63">(43)</a> <a href="semantics-scripting.html#ref-for-elementdef-script-64">(44)</a> <a href="semantics-scripting.html#ref-for-elementdef-script-65">(45)</a> <a href="semantics-scripting.html#ref-for-elementdef-script-66">(46)</a> <a href="semantics-scripting.html#ref-for-elementdef-script-67">(47)</a> <a href="semantics-scripting.html#ref-for-elementdef-script-68">(48)</a> <a href="semantics-scripting.html#ref-for-elementdef-script-69">(49)</a> <a href="semantics-scripting.html#ref-for-elementdef-script-70">(50)</a> <a href="semantics-scripting.html#ref-for-elementdef-script-71">(51)</a> <a href="semantics-scripting.html#ref-for-elementdef-script-72">(52)</a></span><span><a href="semantics-scripting.html#ref-for-elementdef-script-73">4.12.1.2. Restrictions for contents of script elements</a> <a href="semantics-scripting.html#ref-for-elementdef-script-74">(2)</a> <a href="semantics-scripting.html#ref-for-elementdef-script-75">(3)</a> <a href="semantics-scripting.html#ref-for-elementdef-script-76">(4)</a></span><span><a href="semantics-scripting.html#ref-for-elementdef-script-77">4.12.1.3. Inline documentation for external scripts</a> <a href="semantics-scripting.html#ref-for-elementdef-script-78">(2)</a> <a href="semantics-scripting.html#ref-for-elementdef-script-79">(3)</a></span><span><a href="semantics-scripting.html#ref-for-elementdef-script-80">4.12.1.4. Interaction of script elements and XSLT</a> <a href="semantics-scripting.html#ref-for-elementdef-script-81">(2)</a> <a href="semantics-scripting.html#ref-for-elementdef-script-82">(3)</a> <a href="semantics-scripting.html#ref-for-elementdef-script-83">(4)</a> <a href="semantics-scripting.html#ref-for-elementdef-script-84">(5)</a></span><span><a href="semantics-scripting.html#ref-for-elementdef-script-85">4.12.2. The noscript element</a> <a href="semantics-scripting.html#ref-for-elementdef-script-86">(2)</a></span><span><a href="webappapis.html#ref-for-elementdef-script-87">7.1.1. Introduction</a></span><span><a href="webappapis.html#ref-for-elementdef-script-88">7.1.3.7. Runtime script errors</a> <a href="webappapis.html#ref-for-elementdef-script-89">(2)</a></span><span><a href="webappapis.html#ref-for-elementdef-script-90">7.3.3. document.write()</a></span><span><a href="syntax.html#ref-for-elementdef-script-91">8.1.2. Elements</a></span><span><a href="syntax.html#ref-for-elementdef-script-92">8.1.2.4. Optional tags</a></span><span><a href="syntax.html#ref-for-elementdef-script-93">8.2.3.2. The stack of open elements</a></span><span><a href="syntax.html#ref-for-elementdef-script-94">8.2.4. Tokenization</a></span><span><a href="syntax.html#ref-for-elementdef-script-95">8.2.5.4.4. The &quot;in head&quot; insertion mode</a></span><span><a href="syntax.html#ref-for-elementdef-script-96">8.2.5.4.8. The &quot;text&quot; insertion mode</a> <a href="syntax.html#ref-for-elementdef-script-97">(2)</a> <a href="syntax.html#ref-for-elementdef-script-98">(3)</a></span><span><a href="syntax.html#ref-for-elementdef-script-99">8.2.5.5. The rules for parsing tokens in foreign content</a></span><span><a href="syntax.html#ref-for-elementdef-script-100">8.2.6. The end</a></span><span><a href="syntax.html#ref-for-elementdef-script-101">8.2.8.4. Scripts that modify the page as it is being parsed</a> <a href="syntax.html#ref-for-elementdef-script-102">(2)</a> <a href="syntax.html#ref-for-elementdef-script-103">(3)</a> <a href="syntax.html#ref-for-elementdef-script-104">(4)</a> <a href="syntax.html#ref-for-elementdef-script-105">(5)</a></span><span><a href="syntax.html#ref-for-elementdef-script-106">8.2.8.5. The execution of scripts that are moving across multiple documents</a> <a href="syntax.html#ref-for-elementdef-script-107">(2)</a> <a href="syntax.html#ref-for-elementdef-script-108">(3)</a></span><span><a href="syntax.html#ref-for-elementdef-script-109">8.3. Serializing HTML fragments</a></span><span><a href="syntax.html#ref-for-elementdef-script-110">8.4. Parsing HTML fragments</a></span><span><a href="xhtml.html#ref-for-elementdef-script-111">9.2. Parsing XHTML documents</a> <a href="xhtml.html#ref-for-elementdef-script-112">(2)</a></span><span><a href="obsolete.html#ref-for-elementdef-script-113">11.1. Obsolete but conforming features</a></span><span><a href="obsolete.html#ref-for-elementdef-script-114">11.1.1. Warnings for obsolete but conforming features</a></span><span><a href="obsolete.html#ref-for-elementdef-script-115">11.2. Non-conforming features</a> <a href="obsolete.html#ref-for-elementdef-script-116">(2)</a> <a href="obsolete.html#ref-for-elementdef-script-117">(3)</a></span><span><a href="obsolete.html#ref-for-elementdef-script-118">11.3.4. Other elements, attributes and APIs</a> <a href="obsolete.html#ref-for-elementdef-script-119">(2)</a></span><span><a href="fullindex.html#ref-for-elementdef-script-120">Elements</a></span><span><a href="fullindex.html#ref-for-elementdef-script-121">Element content categories</a> <a href="fullindex.html#ref-for-elementdef-script-122">(2)</a> <a href="fullindex.html#ref-for-elementdef-script-123">(3)</a> <a href="fullindex.html#ref-for-elementdef-script-124">(4)</a></span><span><a href="fullindex.html#ref-for-elementdef-script-125">Attributes</a> <a href="fullindex.html#ref-for-elementdef-script-126">(2)</a> <a href="fullindex.html#ref-for-elementdef-script-127">(3)</a> <a href="fullindex.html#ref-for-elementdef-script-128">(4)</a> <a href="fullindex.html#ref-for-elementdef-script-129">(5)</a> <a href="fullindex.html#ref-for-elementdef-script-130">(6)</a></span><span><a href="fullindex.html#ref-for-elementdef-script-131">Element Interfaces</a></span><span><a href="fullindex.html#ref-for-elementdef-script-132">Events</a> <a href="fullindex.html#ref-for-elementdef-script-133">(2)</a></span></span></dfn> element</span><a class="self-link" href="semantics-scripting.html#the-script-element"></a></h4>
     <dl class="element">
      <dt><a data-link-type="dfn" href="dom.html#categories" id="ref-for-categories-107">Categories</a>:
      <dd><a data-link-type="dfn" href="dom.html#metadata-content" id="ref-for-metadata-content-12">Metadata content</a>.
      <dd><a data-link-type="dfn" href="dom.html#flow-content" id="ref-for-flow-content-145">Flow content</a>.
      <dd><a data-link-type="dfn" href="dom.html#phrasing-content" id="ref-for-phrasing-content-152">Phrasing content</a>.
      <dd><a data-link-type="dfn" href="dom.html#script-supporting-element" id="ref-for-script-supporting-element-15">Script-supporting element</a>.
      <dt><a data-link-type="dfn" href="dom.html#contexts-in-which-this-element-can-be-used" id="ref-for-contexts-in-which-this-element-can-be-used-106">Contexts in which this element can be used</a>:
      <dd>Where <a data-link-type="dfn" href="dom.html#metadata-content" id="ref-for-metadata-content-13">metadata content</a> is expected.
      <dd>Where <a data-link-type="dfn" href="dom.html#phrasing-content" id="ref-for-phrasing-content-153">phrasing content</a> is expected.
      <dd>Where <a data-link-type="dfn" href="dom.html#script-supporting-element" id="ref-for-script-supporting-element-16">script-supporting elements</a> are expected.
      <dt><a data-link-type="dfn" href="dom.html#content-model" id="ref-for-content-model-107">Content model</a>:
      <dd>If there is no <code>src</code> attribute, depends on the value of the <code>type</code> attribute, but must match <a data-link-type="dfn" href="semantics-scripting.html#script-content-restrictions" id="ref-for-script-content-restrictions-1">script content restrictions</a>.
      <dd>If there <em>is</em> a <code>src</code> attribute, the element must be either empty or contain only <a data-link-type="dfn" href="semantics-scripting.html#script-documentation" id="ref-for-script-documentation-1">script documentation</a> that also matches <a data-link-type="dfn" href="semantics-scripting.html#script-content-restrictions" id="ref-for-script-content-restrictions-2">script
    content restrictions</a>.
      <dt><a data-link-type="dfn" href="dom.html#tag-omission-in-text-html" id="ref-for-tag-omission-in-text-html-106">Tag omission in text/html</a>:
      <dd>Neither tag is omissible
      <dt><a data-link-type="dfn" href="dom.html#content-attribute" id="ref-for-content-attribute-108">Content attributes</a>:
      <dd><a data-link-type="dfn" href="dom.html#global-attributes" id="ref-for-global-attributes-107">Global attributes</a>
      <dd><code>src</code> - Address of the resource
      <dd><code>type</code> - Type of embedded resource
      <dd><code>charset</code> - Character encoding of the external script resource
      <dd><code>async</code> - Execute script <a data-link-type="dfn" href="infrastructure.html#in-parallel" id="ref-for-in-parallel-23">in parallel</a>
      <dd><code>defer</code> - Defer script execution
      <dd><code>crossorigin</code> - How the element handles crossorigin requests
      <dt>Allowed <a href="dom.html#aria-role-attribute">ARIA role attribute</a> values:
      <dd>None
      <dt>Allowed <a href="dom.html#state-and-property-attributes">ARIA state and property attributes</a>:
      <dd><a data-link-type="dfn" href="dom.html#global-aria--attributes" id="ref-for-global-aria--attributes-129">Global aria-* attributes</a>
      <dt><a data-link-type="dfn" href="dom.html#dom-interface" id="ref-for-dom-interface-106">DOM interface</a>:
      <dd>
<pre class="idl def" data-highlight="webidl">interface <dfn class="dfn-paneled idl-code" data-dfn-for="HTMLScriptElement" data-dfn-type="interface" data-export="" id="htmlscriptelement-htmlscriptelement">HTMLScriptElement<span class="dfn-panel"><b><a href="semantics-scripting.html#htmlscriptelement-htmlscriptelement">#htmlscriptelement-htmlscriptelement</a></b><b>Referenced in:</b><span><a href="infrastructure.html#ref-for-htmlscriptelement-htmlscriptelement-1">2.2.1. Conformance classes</a></span><span><a href="dom.html#ref-for-htmlscriptelement-htmlscriptelement-2">3.1.1. The Document object</a></span><span><a href="obsolete.html#ref-for-htmlscriptelement-htmlscriptelement-3">11.3.4. Other elements, attributes and APIs</a></span><span><a href="fullindex.html#ref-for-htmlscriptelement-htmlscriptelement-4">Elements</a></span><span><a href="fullindex.html#ref-for-htmlscriptelement-htmlscriptelement-5">Element Interfaces</a></span></span></dfn> : <a data-link-type="idl-name" href="dom.html#htmlelement-htmlelement" id="ref-for-htmlelement-htmlelement-78">HTMLElement</a> {
  attribute DOMString <a class="idl-code" data-link-type="attribute" data-type="DOMString " href="semantics-scripting.html#dom-htmlscriptelement-src" id="ref-for-dom-htmlscriptelement-src-1">src</a>;
  attribute DOMString <a class="idl-code" data-link-type="attribute" data-type="DOMString " href="semantics-scripting.html#dom-htmlscriptelement-type" id="ref-for-dom-htmlscriptelement-type-1">type</a>;
  attribute DOMString <a class="idl-code" data-link-type="attribute" data-type="DOMString " href="semantics-scripting.html#dom-htmlscriptelement-charset" id="ref-for-dom-htmlscriptelement-charset-1">charset</a>;
  attribute boolean <a class="idl-code" data-link-type="attribute" data-type="boolean " href="semantics-scripting.html#dom-htmlscriptelement-async" id="ref-for-dom-htmlscriptelement-async-1">async</a>;
  attribute boolean <a class="idl-code" data-link-type="attribute" data-type="boolean " href="semantics-scripting.html#dom-htmlscriptelement-defer" id="ref-for-dom-htmlscriptelement-defer-1">defer</a>;
  attribute DOMString? <a class="idl-code" data-link-type="attribute" data-type="DOMString? " href="semantics-scripting.html#dom-htmlscriptelement-crossorigin" id="ref-for-dom-htmlscriptelement-crossorigin-1">crossOrigin</a>;
  attribute DOMString <a class="idl-code" data-link-type="attribute" data-type="DOMString " href="semantics-scripting.html#dom-htmlscriptelement-text" id="ref-for-dom-htmlscriptelement-text-1">text</a>;
};
</pre>
     </dd></dt></dd></dt></dd></dt></dd></dd></dd></dd></dd></dd></dd></dt></dd></dt></dd></dd></dt></dd></dd></dd></dt></dd></dd></dd></dd></dt></dl>
     <p>The <code><a data-link-type="element" href="semantics-scripting.html#elementdef-script" id="ref-for-elementdef-script-21">script</a></code> element allows authors to include dynamic script and data blocks in
  their documents. The element does not <a data-link-type="dfn" href="dom.html#represent" id="ref-for-represent-172">represent</a> content for the
  user.</p>
     <p>When used to include dynamic scripts, the scripts may either be embedded inline or may be
  imported from an external file using the <code>src</code> attribute. If
  the language is not that described by &quot;<code>text/javascript</code>&quot;, then the <code>type</code> attribute must be present, as described below. Whatever
  language is used, the contents of the <code><a data-link-type="element" href="semantics-scripting.html#elementdef-script" id="ref-for-elementdef-script-22">script</a></code> element must conform with the
  requirements of that language&#x2019;s specification.</p>
     <p>When used to include data blocks (as opposed to scripts), the data must be embedded inline, the
  format of the data must be given using the <code>type</code> attribute,
  the <code>src</code> attribute must not be specified, and the contents of
  the <code><a data-link-type="element" href="semantics-scripting.html#elementdef-script" id="ref-for-elementdef-script-23">script</a></code> element must conform to the requirements defined for the format used.</p>
     <p>The <dfn class="dfn-paneled" data-dfn-for="script" data-dfn-type="element-attr" data-export="" id="element-attrdef-script-type"><code>type</code><span class="dfn-panel"><b><a href="semantics-scripting.html#element-attrdef-script-type">#element-attrdef-script-type</a></b><b>Referenced in:</b><span><a href="obsolete.html#ref-for-element-attrdef-script-type-1">11.1. Obsolete but conforming features</a> <a href="obsolete.html#ref-for-element-attrdef-script-type-2">(2)</a></span><span><a href="obsolete.html#ref-for-element-attrdef-script-type-3">11.1.1. Warnings for obsolete but conforming features</a></span><span><a href="fullindex.html#ref-for-element-attrdef-script-type-4">Elements</a></span></span></dfn> attribute gives the language of the
  script or format of the data. If the attribute is present, its value must be a <a data-link-type="dfn" href="infrastructure.html#valid-mime-type" id="ref-for-valid-mime-type-10">valid MIME
  type</a>. The <code>charset</code> parameter must not be specified. The default, which
  is used if the attribute is absent, is &quot;<code>text/javascript</code>&quot;.</p>
     <p>The <dfn class="dfn-paneled" data-dfn-for="script" data-dfn-type="element-attr" data-export="" id="element-attrdef-script-src"><code>src</code><span class="dfn-panel"><b><a href="semantics-scripting.html#element-attrdef-script-src">#element-attrdef-script-src</a></b><b>Referenced in:</b><span><a href="introduction.html#ref-for-element-attrdef-script-src-1">1.10.3. 
  Restrictions on content models and on attribute values </a> <a href="introduction.html#ref-for-element-attrdef-script-src-2">(2)</a></span><span><a href="semantics-scripting.html#ref-for-element-attrdef-script-src-3">4.12.1.3. Inline documentation for external scripts</a></span><span><a href="fullindex.html#ref-for-element-attrdef-script-src-4">Elements</a></span></span></dfn> attribute, if specified, gives the
  address of the external script resource to use. The value of the attribute must be a <a data-link-type="dfn" href="infrastructure.html#valid-non-empty-url-potentially-surrounded-by-spaces" id="ref-for-valid-non-empty-url-potentially-surrounded-by-spaces-14">valid
  non-empty URL potentially surrounded by spaces</a> identifying a script resource of the type
  given by the <code>type</code> attribute, if the attribute is present, or
  of the type &quot;<code>text/javascript</code>&quot;, if the attribute is absent. A resource is a
  script resource of a given type if that type identifies a scripting language and the resource
  conforms with the requirements of that language&#x2019;s specification.</p>
     <p>The <dfn class="dfn-paneled" data-dfn-for="script" data-dfn-type="element-attr" data-export="" id="element-attrdef-script-charset"><code>charset</code><span class="dfn-panel"><b><a href="semantics-scripting.html#element-attrdef-script-charset">#element-attrdef-script-charset</a></b><b>Referenced in:</b><span><a href="fullindex.html#ref-for-element-attrdef-script-charset-1">Elements</a></span></span></dfn> attribute gives the character
  encoding of the external script resource. The attribute must not be specified if the <code>src</code> attribute is not present. If the attribute is set, its value
  must be an <a data-link-type="dfn" href="infrastructure.html#ascii-case-insensitive" id="ref-for-ascii-case-insensitive-41">ASCII case-insensitive</a> match for one of the <a data-link-type="dfn" href="infrastructure.html#character-encoding" id="ref-for-character-encoding-14">labels</a> of an <a data-link-type="dfn" href="http://www.w3.org/TR/dom/#concept-document-encoding">encoding</a>, and must specify the same <a data-link-type="dfn" href="http://www.w3.org/TR/dom/#concept-document-encoding">encoding</a> as
  the <code>charset</code> parameter of the <a data-link-type="dfn" href="infrastructure.html#content-type-metadata" id="ref-for-content-type-metadata-32">Content-Type
  metadata</a> of the external file, if any. <a data-link-type="biblio" href="#biblio-encoding">[ENCODING]</a></p>
     <p>The <dfn class="dfn-paneled" data-dfn-for="script" data-dfn-type="element-attr" data-export="" id="element-attrdef-script-async"><code>async</code><span class="dfn-panel"><b><a href="semantics-scripting.html#element-attrdef-script-async">#element-attrdef-script-async</a></b><b>Referenced in:</b><span><a href="semantics-scripting.html#ref-for-element-attrdef-script-async-1">4.12.1. The script element</a></span><span><a href="fullindex.html#ref-for-element-attrdef-script-async-2">Elements</a></span><span><a href="fullindex.html#ref-for-element-attrdef-script-async-3">Attributes</a></span></span></dfn> and <dfn class="dfn-paneled" data-dfn-for="script" data-dfn-type="element-attr" data-export="" id="element-attrdef-script-defer"><code>defer</code><span class="dfn-panel"><b><a href="semantics-scripting.html#element-attrdef-script-defer">#element-attrdef-script-defer</a></b><b>Referenced in:</b><span><a href="semantics-scripting.html#ref-for-element-attrdef-script-defer-1">4.12.1. The script element</a></span><span><a href="fullindex.html#ref-for-element-attrdef-script-defer-2">Elements</a></span></span></dfn> attributes are <a data-link-type="dfn" href="infrastructure.html#boolean-attribute" id="ref-for-boolean-attribute-35">boolean attributes</a> that indicate how the script should be executed. The <code>defer</code> and <code>async</code> attributes
  must not be specified if the <code>src</code> attribute is not
  present.</p>
     <p>There are three possible modes that can be selected using these attributes. If the <code>async</code> attribute is present, then the script will be executed
  as soon as it is available, but without blocking further parsing of the page. If the <code>async</code> attribute is not present but the <code>defer</code> attribute is
  present, then the script is executed when the page has finished parsing. If neither attribute is
  present, then the script is fetched and executed immediately, before the user agent continues
  parsing the page. This is summarized in the following schematic diagram:</p>
     <p><img alt="With &lt;script&gt;, parsing is interrupted by fetching and execution; with &lt;script defer&gt;, fetching is parallel to parsing and execution takes place after all parsing has finished; and with &lt;script async&gt;, fetching is parallel to parsing but once it finishes parsing is interrupted to execute the script." src="images/asyncdefer.svg" style="width: 80%; min-width: 690px;"></p>
     <p class="note" role="note"> The exact processing details for these attributes are, for mostly historical
  reasons, somewhat non-trivial, involving a number of aspects of HTML. The implementation
  requirements are therefore by necessity scattered throughout the specification. The algorithms
  below (in this section) describe the core of this processing, but these algorithms reference and
  are referenced by the parsing rules for <code>script</code> <a data-link-type="dfn" href="syntax.html#start-tag" id="ref-for-start-tag-7">start</a> and <a data-link-type="dfn" href="syntax.html#end-tag" id="ref-for-end-tag-42">end</a> tags in HTML, <a data-link-type="dfn" href="syntax.html#in-foreign-content" id="ref-for-in-foreign-content-1">in foreign content</a>,
  and in XML, the rules for the <a class="idl-code" data-link-type="method" href="dom.html#dom-document-write" id="ref-for-dom-document-write-2"><code>document.write()</code></a> method, the handling of <a data-link-type="dfn" href="webappapis.html#script" id="ref-for-script-3">scripting</a>, etc. </p>
     <p>The <a data-link-type="element-attr" href="semantics-scripting.html#element-attrdef-script-defer" id="ref-for-element-attrdef-script-defer-1"><code>defer</code></a> attribute may be specified even if the <code>async</code> attribute is specified, to cause legacy Web browsers that
  only support <code>defer</code> (and not <code>async</code>) to fall back to the <code>defer</code> behavior instead of the blocking behavior that
  is the default.</p>
     <p>The <dfn class="dfn-paneled" data-dfn-for="script" data-dfn-type="element-attr" data-export="" id="element-attrdef-script-crossorigin"><code>crossorigin</code><span class="dfn-panel"><b><a href="semantics-scripting.html#element-attrdef-script-crossorigin">#element-attrdef-script-crossorigin</a></b><b>Referenced in:</b><span><a href="semantics-scripting.html#ref-for-element-attrdef-script-crossorigin-1">4.12.1. The script element</a></span><span><a href="fullindex.html#ref-for-element-attrdef-script-crossorigin-2">Elements</a></span></span></dfn> attribute is a <a data-link-type="dfn" href="infrastructure.html#cors-settings-attribute" id="ref-for-cors-settings-attribute-5">CORS settings attribute</a>. It controls, for scripts that are obtained from other <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request-origin">origins</a>, whether error information will be exposed.</p>
     <p>Changing the <code>src</code>, <code>type</code>, <code>charset</code>, <code>async</code>, <code>defer</code>, and <code>crossorigin</code> attributes dynamically has no direct effect;
  these attribute are only used at specific times described below.</p>
     <div class="impl">
      <p>A <code><a data-link-type="element" href="semantics-scripting.html#elementdef-script" id="ref-for-elementdef-script-24">script</a></code> element has several associated pieces of state.</p>
      <p>The first is a flag indicating whether or not the script block has been <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="already-started">&quot;already
  started&quot;<span class="dfn-panel"><b><a href="semantics-scripting.html#already-started">#already-started</a></b><b>Referenced in:</b><span><a href="semantics-scripting.html#ref-for-already-started-1">4.12.1. The script element</a> <a href="semantics-scripting.html#ref-for-already-started-2">(2)</a> <a href="semantics-scripting.html#ref-for-already-started-3">(3)</a> <a href="semantics-scripting.html#ref-for-already-started-4">(4)</a></span><span><a href="semantics-scripting.html#ref-for-already-started-5">4.12.1.4. Interaction of script elements and XSLT</a> <a href="semantics-scripting.html#ref-for-already-started-6">(2)</a></span><span><a href="syntax.html#ref-for-already-started-7">8.2.5.4.4. The &quot;in head&quot; insertion mode</a></span><span><a href="syntax.html#ref-for-already-started-8">8.2.5.4.8. The &quot;text&quot; insertion mode</a></span><span><a href="xhtml.html#ref-for-already-started-9">9.2. Parsing XHTML documents</a></span></span></dfn>. Initially, <code><a data-link-type="element" href="semantics-scripting.html#elementdef-script" id="ref-for-elementdef-script-25">script</a></code> elements must have this flag unset (script blocks,
  when created, are not &quot;already started&quot;). The <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-node-clone-ext">cloning
  steps</a> for <code><a data-link-type="element" href="semantics-scripting.html#elementdef-script" id="ref-for-elementdef-script-26">script</a></code> elements must set the &quot;already started&quot; flag on the copy if
  it is set on the element being cloned.</p>
      <p>The second is a flag indicating whether the element was <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="parser-inserted">&quot;parser-inserted&quot;<span class="dfn-panel"><b><a href="semantics-scripting.html#parser-inserted">#parser-inserted</a></b><b>Referenced in:</b><span><a href="semantics-scripting.html#ref-for-parser-inserted-1">4.12.1. The script element</a> <a href="semantics-scripting.html#ref-for-parser-inserted-2">(2)</a> <a href="semantics-scripting.html#ref-for-parser-inserted-3">(3)</a> <a href="semantics-scripting.html#ref-for-parser-inserted-4">(4)</a> <a href="semantics-scripting.html#ref-for-parser-inserted-5">(5)</a> <a href="semantics-scripting.html#ref-for-parser-inserted-6">(6)</a> <a href="semantics-scripting.html#ref-for-parser-inserted-7">(7)</a> <a href="semantics-scripting.html#ref-for-parser-inserted-8">(8)</a> <a href="semantics-scripting.html#ref-for-parser-inserted-9">(9)</a> <a href="semantics-scripting.html#ref-for-parser-inserted-10">(10)</a></span><span><a href="semantics-scripting.html#ref-for-parser-inserted-11">4.12.1.4. Interaction of script elements and XSLT</a> <a href="semantics-scripting.html#ref-for-parser-inserted-12">(2)</a> <a href="semantics-scripting.html#ref-for-parser-inserted-13">(3)</a></span><span><a href="syntax.html#ref-for-parser-inserted-14">8.2.5.4.4. The &quot;in head&quot; insertion mode</a></span><span><a href="xhtml.html#ref-for-parser-inserted-15">9.2. Parsing XHTML documents</a></span></span></dfn>.
  Initially, <code><a data-link-type="element" href="semantics-scripting.html#elementdef-script" id="ref-for-elementdef-script-27">script</a></code> elements must have this flag unset. It is set by the <a data-link-type="dfn" href="syntax.html#html-parser" id="ref-for-html-parser-18">HTML
  parser</a> and the <a data-link-type="dfn" href="xhtml.html#xml-parser" id="ref-for-xml-parser-14">XML parser</a> on <code><a data-link-type="element" href="semantics-scripting.html#elementdef-script" id="ref-for-elementdef-script-28">script</a></code> elements they insert and
  affects the processing of those elements.</p>
      <p>The third is a flag indicating whether the element will <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="non-blocking">&quot;non-blocking&quot;<span class="dfn-panel"><b><a href="semantics-scripting.html#non-blocking">#non-blocking</a></b><b>Referenced in:</b><span><a href="semantics-scripting.html#ref-for-non-blocking-1">4.12.1. The script element</a> <a href="semantics-scripting.html#ref-for-non-blocking-2">(2)</a> <a href="semantics-scripting.html#ref-for-non-blocking-3">(3)</a> <a href="semantics-scripting.html#ref-for-non-blocking-4">(4)</a> <a href="semantics-scripting.html#ref-for-non-blocking-5">(5)</a> <a href="semantics-scripting.html#ref-for-non-blocking-6">(6)</a> <a href="semantics-scripting.html#ref-for-non-blocking-7">(7)</a> <a href="semantics-scripting.html#ref-for-non-blocking-8">(8)</a></span><span><a href="syntax.html#ref-for-non-blocking-9">8.2.5.4.4. The &quot;in head&quot; insertion mode</a></span><span><a href="xhtml.html#ref-for-non-blocking-10">9.2. Parsing XHTML documents</a></span></span></dfn>. Initially, <code><a data-link-type="element" href="semantics-scripting.html#elementdef-script" id="ref-for-elementdef-script-29">script</a></code> elements must have this flag set. It is unset by the <a data-link-type="dfn" href="syntax.html#html-parser" id="ref-for-html-parser-19">HTML parser</a> and the <a data-link-type="dfn" href="xhtml.html#xml-parser" id="ref-for-xml-parser-15">XML parser</a> on <code><a data-link-type="element" href="semantics-scripting.html#elementdef-script" id="ref-for-elementdef-script-30">script</a></code> elements they insert. In addition, whenever
  a <code><a data-link-type="element" href="semantics-scripting.html#elementdef-script" id="ref-for-elementdef-script-31">script</a></code> element whose <a data-link-type="dfn" href="semantics-scripting.html#non-blocking" id="ref-for-non-blocking-1">&quot;non-blocking&quot;</a> flag is set has an <code>async</code> content attribute added, the element&#x2019;s <a data-link-type="dfn" href="semantics-scripting.html#non-blocking" id="ref-for-non-blocking-2">&quot;non-blocking&quot;</a> flag must be unset.</p>
      <p>The fourth is a flag indicating whether or not the script block is <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="ready-to-be-parser-executed">&quot;ready to be
  parser-executed&quot;<span class="dfn-panel"><b><a href="semantics-scripting.html#ready-to-be-parser-executed">#ready-to-be-parser-executed</a></b><b>Referenced in:</b><span><a href="semantics-scripting.html#ref-for-ready-to-be-parser-executed-1">4.12.1. The script element</a> <a href="semantics-scripting.html#ref-for-ready-to-be-parser-executed-2">(2)</a> <a href="semantics-scripting.html#ref-for-ready-to-be-parser-executed-3">(3)</a></span><span><a href="syntax.html#ref-for-ready-to-be-parser-executed-4">8.2.5.4.8. The &quot;text&quot; insertion mode</a> <a href="syntax.html#ref-for-ready-to-be-parser-executed-5">(2)</a></span><span><a href="syntax.html#ref-for-ready-to-be-parser-executed-6">8.2.6. The end</a></span><span><a href="xhtml.html#ref-for-ready-to-be-parser-executed-7">9.2. Parsing XHTML documents</a></span></span></dfn>. Initially, <code><a data-link-type="element" href="semantics-scripting.html#elementdef-script" id="ref-for-elementdef-script-32">script</a></code> elements must have this flag unset (script
  blocks, when created, are not &quot;ready to be parser-executed&quot;). This flag is used only for elements
  that are also <a data-link-type="dfn" href="semantics-scripting.html#parser-inserted" id="ref-for-parser-inserted-1">&quot;parser-inserted&quot;</a>, to let the parser know when to execute the
  script.</p>
      <p>The last few pieces of state are <dfn data-dfn-type="dfn" data-noexport="" id="the-script-block-type"><var>the script block
  type</var><a class="self-link" href="semantics-scripting.html#the-script-block-type"></a></dfn>, <dfn data-dfn-type="dfn" data-noexport="" id="the-script-block-character-encoding"><var>the script block character
  encoding</var><a class="self-link" href="semantics-scripting.html#the-script-block-character-encoding"></a></dfn>, and <dfn data-dfn-type="dfn" data-noexport="" id="the-script-block-fallback-character-encoding"><var>the script block
  fallback character encoding</var><a class="self-link" href="semantics-scripting.html#the-script-block-fallback-character-encoding"></a></dfn>. They are determined when the script is prepared, based on
  the attributes on the element at that time, and the <code><a data-link-type="element" href="semantics-scripting.html#elementdef-script" id="ref-for-elementdef-script-33">script</a></code> element&#x2019;s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-node-document">node document</a>.</p>
      <p>When a <code><a data-link-type="element" href="semantics-scripting.html#elementdef-script" id="ref-for-elementdef-script-34">script</a></code> element that is not marked as being <a data-link-type="dfn" href="semantics-scripting.html#parser-inserted" id="ref-for-parser-inserted-2">&quot;parser-inserted&quot;</a> experiences one of the events listed in the following list, the user agent must <a data-link-type="dfn" href="infrastructure.html#immediately" id="ref-for-immediately-8">immediately</a> prepare the <code><a data-link-type="element" href="semantics-scripting.html#elementdef-script" id="ref-for-elementdef-script-35">script</a></code> element:</p>
      <ul>
       <li>The <code><a data-link-type="element" href="semantics-scripting.html#elementdef-script" id="ref-for-elementdef-script-36">script</a></code> element gets <a data-link-type="dfn" href="infrastructure.html#document-inserted-into-the-document" id="ref-for-document-inserted-into-the-document-15">inserted into a document</a>, at the time the node is inserted
    according to the DOM, after any other <code><a data-link-type="element" href="semantics-scripting.html#elementdef-script" id="ref-for-elementdef-script-37">script</a></code> elements inserted at the same time that
    are earlier in the <code>Document</code> in <a data-link-type="dfn" href="infrastructure.html#tree-order" id="ref-for-tree-order-71">tree order</a>.
       </li><li>The <code><a data-link-type="element" href="semantics-scripting.html#elementdef-script" id="ref-for-elementdef-script-38">script</a></code> element is <a data-link-type="dfn" href="infrastructure.html#in-the-document" id="ref-for-in-the-document-21">in a <code>Document</code></a> and a node or
    document fragment is <a data-link-type="dfn" href="http://www.w3.org/TR/dom/#concept-node-insert">inserted</a> into the <code><a data-link-type="element" href="semantics-scripting.html#elementdef-script" id="ref-for-elementdef-script-39">script</a></code> element, after any <code><a data-link-type="element" href="semantics-scripting.html#elementdef-script" id="ref-for-elementdef-script-40">script</a></code> elements <a data-link-type="dfn" href="http://www.w3.org/TR/dom/#concept-node-insert">inserted</a> at that time.
       </li><li>The <code><a data-link-type="element" href="semantics-scripting.html#elementdef-script" id="ref-for-elementdef-script-41">script</a></code> element is <a data-link-type="dfn" href="infrastructure.html#in-the-document" id="ref-for-in-the-document-22">in a <code>Document</code></a> and has a <code>src</code> attribute set where previously the element had no such
    attribute.
      </li></ul>
      <p>To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="prepare-a-script">prepare a script<span class="dfn-panel"><b><a href="semantics-scripting.html#prepare-a-script">#prepare-a-script</a></b><b>Referenced in:</b><span><a href="semantics-scripting.html#ref-for-prepare-a-script-1">4.12.1. The script element</a> <a href="semantics-scripting.html#ref-for-prepare-a-script-2">(2)</a> <a href="semantics-scripting.html#ref-for-prepare-a-script-3">(3)</a></span><span><a href="semantics-scripting.html#ref-for-prepare-a-script-4">4.12.1.4. Interaction of script elements and XSLT</a></span></span></dfn>, the user agent must act as
  follows:</p>
      <ol>
       <li>
        <p>If the <code><a data-link-type="element" href="semantics-scripting.html#elementdef-script" id="ref-for-elementdef-script-42">script</a></code> element is marked as having <a data-link-type="dfn" href="semantics-scripting.html#already-started" id="ref-for-already-started-1">&quot;already started&quot;</a>, then
    the user agent must abort these steps at this point. The script is not executed.</p>
       </li><li>
        <p>If the element has its <a data-link-type="dfn" href="semantics-scripting.html#parser-inserted" id="ref-for-parser-inserted-3">&quot;parser-inserted&quot;</a> flag set, then set <var>was-parser-inserted</var> to true and unset the element&#x2019;s <a data-link-type="dfn" href="semantics-scripting.html#parser-inserted" id="ref-for-parser-inserted-4">&quot;parser-inserted&quot;</a> flag. Otherwise, set <var>was-parser-inserted</var> to
    false.</p>
        <p class="note" role="note"> This is done so that if parser-inserted <code><a data-link-type="element" href="semantics-scripting.html#elementdef-script" id="ref-for-elementdef-script-43">script</a></code> elements fail to run
    when the parser tries to run them, e.g., because they are empty or specify an unsupported
    scripting language, another script can later mutate them and cause them to run again. </p>
       </li><li>
        <p>If <var>was-parser-inserted</var> is true and the element does not have an <code>async</code> attribute, then set the element&#x2019;s <a data-link-type="dfn" href="semantics-scripting.html#non-blocking" id="ref-for-non-blocking-3">&quot;non-blocking&quot;</a> flag to true.</p>
        <p class="note" role="note"> This is done so that if a parser-inserted <code><a data-link-type="element" href="semantics-scripting.html#elementdef-script" id="ref-for-elementdef-script-44">script</a></code> element fails to
    run when the parser tries to run it, but it is later executed after a script dynamically updates
    it, it will execute in a non-blocking fashion even if the <code>async</code> attribute isn&#x2019;t set. </p>
       </li><li id="script-processing-empty">
        <a class="self-link" href="semantics-scripting.html#script-processing-empty"></a> 
        <p>If the element has no <code>src</code> attribute, and its child
    nodes, if any, consist only of comment nodes and empty <code>Text</code> nodes, then the user
    agent must abort these steps at this point. The script is not executed.</p>
       </li><li>
        <p>If the element is not <a data-link-type="dfn" href="infrastructure.html#in-the-document" id="ref-for-in-the-document-23">in a <code>Document</code></a>, then the user agent must abort
    these steps at this point. The script is not executed.</p>
       </li><li id="script-processing-prepare">
        <a class="self-link" href="semantics-scripting.html#script-processing-prepare"></a> 
        <p>If either:</p>
        <ul class="brief">
         <li>the <code><a data-link-type="element" href="semantics-scripting.html#elementdef-script" id="ref-for-elementdef-script-45">script</a></code> element has a <code>type</code> attribute
      and its value is the empty string, or
         </li><li>the <code><a data-link-type="element" href="semantics-scripting.html#elementdef-script" id="ref-for-elementdef-script-46">script</a></code> element has no <code>type</code> attribute
      but it has a <code>language</code> attribute and <em>that</em> attribute&#x2019;s value is the empty string, or
         </li><li>the <code><a data-link-type="element" href="semantics-scripting.html#elementdef-script" id="ref-for-elementdef-script-47">script</a></code> element has neither a <code>type</code> attribute nor a <code>language</code> attribute, then
        </li></ul>
        <p>...let <var>the script block&#x2019;s type</var> for this <code><a data-link-type="element" href="semantics-scripting.html#elementdef-script" id="ref-for-elementdef-script-48">script</a></code> element be &quot;<code>text/javascript</code>&quot;.</p>
        <p>Otherwise, if the <code><a data-link-type="element" href="semantics-scripting.html#elementdef-script" id="ref-for-elementdef-script-49">script</a></code> element has a <code>type</code> attribute, let <var>the
    script block&#x2019;s type</var> for this <code><a data-link-type="element" href="semantics-scripting.html#elementdef-script" id="ref-for-elementdef-script-50">script</a></code> element be the value of that attribute
    with any leading or trailing sequences of <a data-link-type="dfn" href="infrastructure.html#space-characters" id="ref-for-space-characters-55">space characters</a> removed.</p>
        <p>Otherwise, the element has a non-empty <code>language</code> attribute; let <var>the script block&#x2019;s type</var> for this <code><a data-link-type="element" href="semantics-scripting.html#elementdef-script" id="ref-for-elementdef-script-51">script</a></code> element be the concatenation of the string &quot;<code>text/</code>&quot;
    followed by the value of the <code>language</code> attribute.</p>
        <p class="note" role="note"> The <code>language</code> attribute is never
    conforming, and is always ignored if there is a <code>type</code> attribute present. </p>
       </li><li>
        <p>If the user agent does not <a data-link-type="dfn" href="semantics-scripting.html#support-the-scripting-language" id="ref-for-support-the-scripting-language-1">support the scripting language</a> given by <var>the script block&#x2019;s type</var> for this <code><a data-link-type="element" href="semantics-scripting.html#elementdef-script" id="ref-for-elementdef-script-52">script</a></code> element,
    then the user agent must abort these steps at this point. The script is not executed.</p>
       </li><li>
        <p>If <var>was-parser-inserted</var> is true, then flag the element as <a data-link-type="dfn" href="semantics-scripting.html#parser-inserted" id="ref-for-parser-inserted-5">&quot;parser-inserted&quot;</a> again, and set the element&#x2019;s <a data-link-type="dfn" href="semantics-scripting.html#non-blocking" id="ref-for-non-blocking-4">&quot;non-blocking&quot;</a> flag to
    false.</p>
       </li><li id="script-processing-start">
        <a class="self-link" href="semantics-scripting.html#script-processing-start"></a> 
        <p>The user agent must set the element&#x2019;s <a data-link-type="dfn" href="semantics-scripting.html#already-started" id="ref-for-already-started-2">&quot;already started&quot;</a> flag.</p>
        <p class="note" role="note"> The state of the element at this moment <a data-link-type="dfn" href="semantics-scripting.html#is-later-used" id="ref-for-is-later-used-1">is later used</a> to determine the script source. </p>
       </li><li>
        <p>If the element is flagged as <a data-link-type="dfn" href="semantics-scripting.html#parser-inserted" id="ref-for-parser-inserted-6">&quot;parser-inserted&quot;</a>, but the element&#x2019;s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-node-document">node document</a> is not the <code>Document</code> of the parser that created the element,
    then abort these steps.</p>
       </li><li id="script-processing-noscript">
        <a class="self-link" href="semantics-scripting.html#script-processing-noscript"></a> 
        <p>If <a data-link-type="dfn" href="webappapis.html#scripting-is-disabled" id="ref-for-scripting-is-disabled-3">scripting is disabled</a> for the <code>script</code> element, then the user agent must abort these steps at this point. The script is not
    executed.</p>
        <p class="note" role="note"> The definition of <a data-link-type="dfn" href="webappapis.html#scripting-is-disabled" id="ref-for-scripting-is-disabled-4">scripting is disabled</a> means that, amongst others, the following scripts will not execute: scripts in <code>XMLHttpRequest</code>&#x2019;s <code>responseXML</code> documents, scripts in <code>DOMParser</code>-created documents, scripts in documents created by <code>XSLTProcessor</code>&#x2019;s <code>transformToDocument</code> feature, and scripts
    that are first inserted by a script into a <code>Document</code> that was created using the <code>createDocument()</code> API. <a data-link-type="biblio" href="references.html#biblio-xhr">[XHR]</a> <a data-link-type="biblio" href="references.html#biblio-domparsing">[DOMPARSING]</a> <a data-link-type="biblio" href="#biblio-dom">[DOM]</a> </p>
       </li><li id="script-processing-for">
        <a class="self-link" href="semantics-scripting.html#script-processing-for"></a> 
        <p>If the <code><a data-link-type="element" href="semantics-scripting.html#elementdef-script" id="ref-for-elementdef-script-53">script</a></code> element has an <code>event</code> attribute and a <code>for</code> attribute, then run these substeps:</p>
        <ol>
         <li>Let <var>for</var> be the value of the <code>for</code> attribute.
         </li><li>Let <var>event</var> be the value of the <code>event</code> attribute.
         </li><li><a data-link-type="dfn" href="infrastructure.html#strip-leading-and-trailing-whitespace" id="ref-for-strip-leading-and-trailing-whitespace-14">Strip leading and trailing whitespace</a> from <var>event</var> and <var>for</var>.
         </li><li>If <var>for</var> is not an <a data-link-type="dfn" href="infrastructure.html#ascii-case-insensitive" id="ref-for-ascii-case-insensitive-42">ASCII case-insensitive</a> match for the
      string &quot;<code>window</code>&quot;, then the user agent must abort these steps at this
      point. The script is not executed.
         </li><li>If <var>event</var> is not an <a data-link-type="dfn" href="infrastructure.html#ascii-case-insensitive" id="ref-for-ascii-case-insensitive-43">ASCII case-insensitive</a> match for
      either the string &quot;<a class="idl-code" data-link-type="attribute" href="webappapis.html#dom-globaleventhandlers-onload" id="ref-for-dom-globaleventhandlers-onload-4"><code>onload</code></a>&quot; or the string &quot;<code>onload()</code>&quot;, then the user agent must abort these steps at this point. The script
      is not executed.
        </li></ol>
       </li><li id="script-processing-encoding">
        <a class="self-link" href="semantics-scripting.html#script-processing-encoding"></a> 
        <p>If the <code><a data-link-type="element" href="semantics-scripting.html#elementdef-script" id="ref-for-elementdef-script-54">script</a></code> element has a <code>charset</code> attribute, then let <var>the script block&#x2019;s character
    encoding</var> for this <code><a data-link-type="element" href="semantics-scripting.html#elementdef-script" id="ref-for-elementdef-script-55">script</a></code> element be the result of <a data-link-type="dfn" href="infrastructure.html#getting-an-encoding" id="ref-for-getting-an-encoding-3">getting an
    encoding</a> from the value of the <code>charset</code> attribute.</p>
        <p>Otherwise, let <var>the script block&#x2019;s fallback
    character encoding</var> for this <code><a data-link-type="element" href="semantics-scripting.html#elementdef-script" id="ref-for-elementdef-script-56">script</a></code> element be the same as <a data-link-type="dfn" href="http://www.w3.org/TR/dom/#concept-document-encoding">the encoding of the document itself</a>.</p>
        <p class="note" role="note"> Only one of these two pieces of state is set. </p>
       </li><li id="script-processing-src-prepare">
        <a class="self-link" href="semantics-scripting.html#script-processing-src-prepare"></a> 
        <p>If the element has a <code>src</code> content attribute, run these
    substeps:</p>
        <ol>
         <li>Let <var>src</var> be the value of the element&#x2019;s <code>src</code> attribute.
         </li><li>If <var>src</var> is the empty string, <a data-link-type="dfn" href="webappapis.html#queuing" id="ref-for-queuing-124">queue a task</a> to <a data-link-type="dfn" href="infrastructure.html#fire" id="ref-for-fire-152">fire
      a simple event</a> named <code>error</code> at the element, and abort
      these steps.
         </li><li><a data-link-type="dfn" href="infrastructure.html#re-resolved" id="ref-for-re-resolved-38">Resolve</a> <var>src</var> relative to the
      element.
         </li><li>If the previous step failed, <a data-link-type="dfn" href="webappapis.html#queuing" id="ref-for-queuing-125">queue a task</a> to <a data-link-type="dfn" href="infrastructure.html#fire" id="ref-for-fire-153">fire a simple
      event</a> named <code>error</code> at the element, and abort these
      steps.
         </li><li>Let <var>request</var> be the result of <a data-link-type="dfn" href="infrastructure.html#creating-a-potential-cors-request" id="ref-for-creating-a-potential-cors-request-6">creating a potential-CORS request</a> given the <a data-link-type="dfn" href="infrastructure.html#resulting-absolute-url" id="ref-for-resulting-absolute-url-13">resulting absolute URL</a> and the current state of the element&#x2019;s <code>crossorigin</code> content attribute.
         </li><li>Set <var>request</var>&#x2019;s <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request-client">client</a> to the
      element&#x2019;s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-node-document">node document</a>&#x2019;s <code>Window</code> object&#x2019;s <a data-link-type="dfn" href="webappapis.html#environment-settings-object" id="ref-for-environment-settings-object-11">environment settings
      object</a> and <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request-type">type</a> to &quot;<code>script</code>&quot;.
         </li><li>
           <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-fetch">Fetch</a> <var>request</var>. 
          <p>The resource obtained in this fashion can be either <a data-link-type="dfn" href="browsers.html#same-origin" id="ref-for-same-origin-17">CORS-same-origin</a> or <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-cors-check">CORS-cross-origin</a>. This only affects how error reporting happens.</p>
          <p>For performance reasons, user agents may start fetching the script (as defined above) as
      soon as the <code>src</code> attribute is set, instead, in the hope
      that the element will be <a data-link-type="dfn" href="infrastructure.html#document-inserted-into-the-document" id="ref-for-document-inserted-into-the-document-16">inserted into the document</a> (and that the <code>crossorigin</code> attribute won&#x2019;t change value in the
      meantime). Either way, once the element is <a data-link-type="dfn" href="infrastructure.html#document-inserted-into-the-document" id="ref-for-document-inserted-into-the-document-17">inserted into the document</a>, the load must have started as described in this
      step. If the user agent performs such prefetching, but the element is never inserted in the document,
      or the <code>src</code> attribute is dynamically changed, or the <code>crossorigin</code> attribute is dynamically changed, then the
      user agent will not execute the script so obtained, and the fetching process will have been
      effectively wasted.</p>
        </li></ol>
       </li><li>
        <p>Then, the first of the following options that describes the situation must be followed:</p>
        <dl class="switch">
         <dt id="script-processing-defer"><a class="self-link" href="semantics-scripting.html#script-processing-defer"></a>If the element has a <code>src</code> attribute, and the element has a <code>defer</code> attribute, and
      the element has been flagged as <a data-link-type="dfn" href="semantics-scripting.html#parser-inserted" id="ref-for-parser-inserted-7">&quot;parser-inserted&quot;</a>, and the element does not have
      an <code>async</code> attribute
         <dd>
          <p>The element must be added to the end of the <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="list-of-scripts-that-will-execute-when-the-document-has-finished-parsing">list of scripts that will execute when the
      document has finished parsing<span class="dfn-panel"><b><a href="semantics-scripting.html#list-of-scripts-that-will-execute-when-the-document-has-finished-parsing">#list-of-scripts-that-will-execute-when-the-document-has-finished-parsing</a></b><b>Referenced in:</b><span><a href="syntax.html#ref-for-list-of-scripts-that-will-execute-when-the-document-has-finished-parsing-1">8.2.6. The end</a> <a href="syntax.html#ref-for-list-of-scripts-that-will-execute-when-the-document-has-finished-parsing-2">(2)</a> <a href="syntax.html#ref-for-list-of-scripts-that-will-execute-when-the-document-has-finished-parsing-3">(3)</a> <a href="syntax.html#ref-for-list-of-scripts-that-will-execute-when-the-document-has-finished-parsing-4">(4)</a> <a href="syntax.html#ref-for-list-of-scripts-that-will-execute-when-the-document-has-finished-parsing-5">(5)</a></span></span></dfn> associated with the <code>Document</code> of the parser
      that created the element.</p>
          <p>The <a data-link-type="dfn" href="webappapis.html#tasks" id="ref-for-tasks-65">task</a> that the <a data-link-type="dfn" href="webappapis.html#networking-task-source" id="ref-for-networking-task-source-23">networking task source</a> places on the <a data-link-type="dfn" href="webappapis.html#task-queues" id="ref-for-task-queues-3">task queue</a> once fetching has completed must set the element&#x2019;s <a data-link-type="dfn" href="semantics-scripting.html#ready-to-be-parser-executed" id="ref-for-ready-to-be-parser-executed-1">&quot;ready to be parser-executed&quot;</a> flag. The parser will handle executing the
      script.</p>
         <dt id="script-processing-parser-inserted"><a class="self-link" href="semantics-scripting.html#script-processing-parser-inserted"></a>If the element has a <code>src</code> attribute, and the element has been flagged as <a data-link-type="dfn" href="semantics-scripting.html#parser-inserted" id="ref-for-parser-inserted-8">&quot;parser-inserted&quot;</a>, and the element does not have an <code>async</code> attribute
         <dd>
          <p>The element is the <a data-link-type="dfn" href="semantics-scripting.html#pending-parsing-blocking-script" id="ref-for-pending-parsing-blocking-script-1">pending parsing-blocking script</a> of the <code>Document</code> of the parser that created the element. (There can only be one such
      script per <code>Document</code> at a time.)</p>
          <p>The <a data-link-type="dfn" href="webappapis.html#tasks" id="ref-for-tasks-66">task</a> that the <a data-link-type="dfn" href="webappapis.html#networking-task-source" id="ref-for-networking-task-source-24">networking task source</a> places on the <a data-link-type="dfn" href="webappapis.html#task-queues" id="ref-for-task-queues-4">task queue</a> once fetching has completed must set the element&#x2019;s <a data-link-type="dfn" href="semantics-scripting.html#ready-to-be-parser-executed" id="ref-for-ready-to-be-parser-executed-2">&quot;ready to be parser-executed&quot;</a> flag. The parser will handle executing the
      script.</p>
         <dt id="script-processing-style-delayed"><a class="self-link" href="semantics-scripting.html#script-processing-style-delayed"></a>If the element does not have a <code>src</code> attribute, and the element has been flagged as <a data-link-type="dfn" href="semantics-scripting.html#parser-inserted" id="ref-for-parser-inserted-9">&quot;parser-inserted&quot;</a>, and either the parser that created the <code>script</code> is
      an <a data-link-type="dfn" href="xhtml.html#xml-parser" id="ref-for-xml-parser-16">XML parser</a> or it&#x2019;s an <a data-link-type="dfn" href="syntax.html#html-parser" id="ref-for-html-parser-20">HTML parser</a> whose <a data-link-type="dfn" href="syntax.html#script-nesting-level" id="ref-for-script-nesting-level-1">script nesting
      level</a> is not greater than one, and the <code>Document</code> of the <a data-link-type="dfn" href="syntax.html#html-parser" id="ref-for-html-parser-21">HTML
      parser</a> or <a data-link-type="dfn" href="xhtml.html#xml-parser" id="ref-for-xml-parser-17">XML parser</a> that created the <code><a data-link-type="element" href="semantics-scripting.html#elementdef-script" id="ref-for-elementdef-script-57">script</a></code> element <a data-link-type="dfn" href="document-metadata.html#have-a-style-sheet-that-is-blocking-scripts" id="ref-for-have-a-style-sheet-that-is-blocking-scripts-3">has
      a style sheet that is blocking scripts</a>
         <dd>
          <p>The element is the <a data-link-type="dfn" href="semantics-scripting.html#pending-parsing-blocking-script" id="ref-for-pending-parsing-blocking-script-2">pending parsing-blocking script</a> of the <code>Document</code> of the parser that created the element. (There can only be one such
      script per <code>Document</code> at a time.)</p>
          <p>Set the element&#x2019;s <a data-link-type="dfn" href="semantics-scripting.html#ready-to-be-parser-executed" id="ref-for-ready-to-be-parser-executed-3">&quot;ready to be parser-executed&quot;</a> flag. The parser will handle
      executing the script.</p>
         <dt id="script-processing-src-sync"><a class="self-link" href="semantics-scripting.html#script-processing-src-sync"></a>If the element has a <code>src</code> attribute, does not have an <code>async</code> attribute, and does not have the <a data-link-type="dfn" href="semantics-scripting.html#non-blocking" id="ref-for-non-blocking-5">&quot;non-blocking&quot;</a> flag set
         <dd>
          <p>The element must be added to the end of the <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="list-of-scripts-that-will-execute-in-order-as-soon-as-possible">list of scripts that will execute in order
      as soon as possible<span class="dfn-panel"><b><a href="semantics-scripting.html#list-of-scripts-that-will-execute-in-order-as-soon-as-possible">#list-of-scripts-that-will-execute-in-order-as-soon-as-possible</a></b><b>Referenced in:</b><span><a href="semantics-scripting.html#ref-for-list-of-scripts-that-will-execute-in-order-as-soon-as-possible-1">4.12.1. The script element</a> <a href="semantics-scripting.html#ref-for-list-of-scripts-that-will-execute-in-order-as-soon-as-possible-2">(2)</a> <a href="semantics-scripting.html#ref-for-list-of-scripts-that-will-execute-in-order-as-soon-as-possible-3">(3)</a> <a href="semantics-scripting.html#ref-for-list-of-scripts-that-will-execute-in-order-as-soon-as-possible-4">(4)</a></span><span><a href="syntax.html#ref-for-list-of-scripts-that-will-execute-in-order-as-soon-as-possible-5">8.2.6. The end</a></span></span></dfn> associated with the <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-node-document">node document</a> of the <code>script</code> element at the time the <a data-link-type="dfn" href="semantics-scripting.html#prepare-a-script" id="ref-for-prepare-a-script-1">prepare a script</a> algorithm started.</p>
          <p>The <a data-link-type="dfn" href="webappapis.html#tasks" id="ref-for-tasks-67">task</a> that the <a data-link-type="dfn" href="webappapis.html#networking-task-source" id="ref-for-networking-task-source-25">networking task source</a> places on the <a data-link-type="dfn" href="webappapis.html#task-queues" id="ref-for-task-queues-5">task queue</a> once fetching has completed must run the following
      steps:</p>
          <ol>
           <li>If the element is not now the first element in the <a data-link-type="dfn" href="semantics-scripting.html#list-of-scripts-that-will-execute-in-order-as-soon-as-possible" id="ref-for-list-of-scripts-that-will-execute-in-order-as-soon-as-possible-1">list of scripts that will
        execute in order as soon as possible</a> to which it was added above, then mark the
        element as ready but abort these steps without executing the script yet.
           </li><li><i>Execution</i>: <a data-link-type="dfn" href="semantics-scripting.html#execute-a-script-block" id="ref-for-execute-a-script-block-1">Execute the script block</a> corresponding to the first
        script element in this <a data-link-type="dfn" href="semantics-scripting.html#list-of-scripts-that-will-execute-in-order-as-soon-as-possible" id="ref-for-list-of-scripts-that-will-execute-in-order-as-soon-as-possible-2">list of scripts that will execute in order as soon as
        possible</a>.
           </li><li>Remove the first element from this <a data-link-type="dfn" href="semantics-scripting.html#list-of-scripts-that-will-execute-in-order-as-soon-as-possible" id="ref-for-list-of-scripts-that-will-execute-in-order-as-soon-as-possible-3">list of scripts that will execute in order as
        soon as possible</a>.
           </li><li>If this <a data-link-type="dfn" href="semantics-scripting.html#list-of-scripts-that-will-execute-in-order-as-soon-as-possible" id="ref-for-list-of-scripts-that-will-execute-in-order-as-soon-as-possible-4">list of scripts that will execute in order as soon as possible</a> is
        still not empty and the first entry has already been marked as ready, then jump back to the
        step labeled <i>execution</i>.
          </li></ol>
         <dt id="script-processing-src"><a class="self-link" href="semantics-scripting.html#script-processing-src"></a>If the element has a <code>src</code> attribute
         <dd>
          <p>The element must be added to the <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="set-of-scripts-that-will-execute-as-soon-as-possible">set of scripts that will execute as soon as
      possible<span class="dfn-panel"><b><a href="semantics-scripting.html#set-of-scripts-that-will-execute-as-soon-as-possible">#set-of-scripts-that-will-execute-as-soon-as-possible</a></b><b>Referenced in:</b><span><a href="semantics-scripting.html#ref-for-set-of-scripts-that-will-execute-as-soon-as-possible-1">4.12.1. The script element</a></span><span><a href="syntax.html#ref-for-set-of-scripts-that-will-execute-as-soon-as-possible-2">8.2.6. The end</a></span></span></dfn> of the <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-node-document">node document</a> of the <code><a data-link-type="element" href="semantics-scripting.html#elementdef-script" id="ref-for-elementdef-script-58">script</a></code> element at the time the <a data-link-type="dfn" href="semantics-scripting.html#prepare-a-script" id="ref-for-prepare-a-script-2">prepare a script</a> algorithm started.</p>
          <p>The <a data-link-type="dfn" href="webappapis.html#tasks" id="ref-for-tasks-68">task</a> that the <a data-link-type="dfn" href="webappapis.html#networking-task-source" id="ref-for-networking-task-source-26">networking task source</a> places on the <a data-link-type="dfn" href="webappapis.html#task-queues" id="ref-for-task-queues-6">task queue</a> once fetching has completed must <a data-link-type="dfn" href="semantics-scripting.html#execute-a-script-block" id="ref-for-execute-a-script-block-2">execute the
      script block</a> and then remove the element from the <a data-link-type="dfn" href="semantics-scripting.html#set-of-scripts-that-will-execute-as-soon-as-possible" id="ref-for-set-of-scripts-that-will-execute-as-soon-as-possible-1">set of scripts that will
      execute as soon as possible</a>.</p>
         <dt id="script-processing-inline"><a class="self-link" href="semantics-scripting.html#script-processing-inline"></a>Otherwise
         <dd>The user agent must <a data-link-type="dfn" href="infrastructure.html#immediately" id="ref-for-immediately-9">immediately</a> <a data-link-type="dfn" href="semantics-scripting.html#execute-a-script-block" id="ref-for-execute-a-script-block-3">execute the script block</a>, even if other
      scripts are already executing.
        </dd></dt></dd></dt></dd></dt></dd></dt></dd></dt></dd></dt></dl>
      </li></ol>
      <p>Fetching an external script must <a data-link-type="dfn" href="syntax.html#delay-the-load-event" id="ref-for-delay-the-load-event-29">delay the load event</a> of the element&#x2019;s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-node-document">node document</a> until the <a data-link-type="dfn" href="webappapis.html#tasks" id="ref-for-tasks-69">task</a> that is <a data-link-type="dfn" href="webappapis.html#queue-a-microtask" id="ref-for-queue-a-microtask-31">queued</a> by the <a data-link-type="dfn" href="webappapis.html#networking-task-source" id="ref-for-networking-task-source-27">networking task source</a> once the resource has been fetched (defined above) has
  been run.</p>
      <p>The <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="pending-parsing-blocking-script">pending parsing-blocking script<span class="dfn-panel"><b><a href="semantics-scripting.html#pending-parsing-blocking-script">#pending-parsing-blocking-script</a></b><b>Referenced in:</b><span><a href="semantics-scripting.html#ref-for-pending-parsing-blocking-script-1">4.12.1. The script element</a> <a href="semantics-scripting.html#ref-for-pending-parsing-blocking-script-2">(2)</a> <a href="semantics-scripting.html#ref-for-pending-parsing-blocking-script-3">(3)</a></span><span><a href="webappapis.html#ref-for-pending-parsing-blocking-script-4">7.3.2. Closing the input stream</a></span><span><a href="webappapis.html#ref-for-pending-parsing-blocking-script-5">7.3.3. document.write()</a></span><span><a href="syntax.html#ref-for-pending-parsing-blocking-script-6">8.2.5.4.8. The &quot;text&quot; insertion mode</a> <a href="syntax.html#ref-for-pending-parsing-blocking-script-7">(2)</a> <a href="syntax.html#ref-for-pending-parsing-blocking-script-8">(3)</a> <a href="syntax.html#ref-for-pending-parsing-blocking-script-9">(4)</a></span><span><a href="xhtml.html#ref-for-pending-parsing-blocking-script-10">9.2. Parsing XHTML documents</a> <a href="xhtml.html#ref-for-pending-parsing-blocking-script-11">(2)</a> <a href="xhtml.html#ref-for-pending-parsing-blocking-script-12">(3)</a> <a href="xhtml.html#ref-for-pending-parsing-blocking-script-13">(4)</a></span></span></dfn> of a <code>Document</code> is used by the <code>Document</code>&#x2019;s parser(s).</p>
      <p class="note" role="note"> If a <code><a data-link-type="element" href="semantics-scripting.html#elementdef-script" id="ref-for-elementdef-script-59">script</a></code> element that blocks a parser gets moved to another <code>Document</code> before it would normally have stopped blocking that parser, it nonetheless
  continues blocking that parser until the condition that causes it to be blocking the parser no
  longer applies (e.g., if the script is a <a data-link-type="dfn" href="semantics-scripting.html#pending-parsing-blocking-script" id="ref-for-pending-parsing-blocking-script-3">pending parsing-blocking script</a> because there
  was <a data-link-type="dfn" href="document-metadata.html#a-style-sheet-that-is-blocking-scripts" id="ref-for-a-style-sheet-that-is-blocking-scripts-2">a style sheet that is blocking scripts</a> when it was parsed, but then the script is
  moved to another <code>Document</code> before the style sheet loads, the script still blocks the
  parser until the style sheets are all loaded, at which time the script executes and the parser is
  unblocked). </p>
      <p>When the user agent is required to <dfn class="dfn-paneled" data-dfn-type="dfn" data-lt="execute a script block|execute|execute the script block" data-noexport="" id="execute-a-script-block">execute a script block<span class="dfn-panel"><b><a href="semantics-scripting.html#execute-a-script-block">#execute-a-script-block</a></b><b>Referenced in:</b><span><a href="semantics-scripting.html#ref-for-execute-a-script-block-1">4.12.1. The script element</a> <a href="semantics-scripting.html#ref-for-execute-a-script-block-2">(2)</a> <a href="semantics-scripting.html#ref-for-execute-a-script-block-3">(3)</a></span><span><a href="syntax.html#ref-for-execute-a-script-block-4">8.2.5.4.8. The &quot;text&quot; insertion mode</a></span><span><a href="syntax.html#ref-for-execute-a-script-block-5">8.2.6. The end</a></span><span><a href="xhtml.html#ref-for-execute-a-script-block-6">9.2. Parsing XHTML documents</a></span></span></dfn>, it must run the following steps:</p>
      <ol>
       <li>
        <p>If the element is flagged as <a data-link-type="dfn" href="semantics-scripting.html#parser-inserted" id="ref-for-parser-inserted-10">&quot;parser-inserted&quot;</a>, but the element&#x2019;s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-node-document">node document</a> is not the <code>Document</code> of the parser that created the element,
    then abort these steps.</p>
       </li><li>
        <p>Jump to the appropriate set of steps from the list below:</p>
        <dl class="switch">
         <dt>If the load resulted in an error (for example a DNS error, or an HTTP 404 error)
         <dd>Executing the script block must just consist of <a data-link-type="dfn" href="webappapis.html#firing-a-simple-event-named-e" id="ref-for-firing-a-simple-event-named-e-1">firing a simple event</a> named <code>error</code> at the element.
         <dt>If the load was successful
         <dd>
          <p>Executing the script block must consist of running the following steps. For the purposes of
      these steps, the script is considered to be from an <i>external file</i> if, while the <a data-link-type="dfn" href="semantics-scripting.html#prepare-a-script" id="ref-for-prepare-a-script-3">prepare a script</a> algorithm above was running for this script, the <code><a data-link-type="element" href="semantics-scripting.html#elementdef-script" id="ref-for-elementdef-script-60">script</a></code> element had a <code>src</code> attribute
      specified.</p>
          <ol>
           <li id="establish-script-block-source">
            <a class="self-link" href="semantics-scripting.html#establish-script-block-source"></a> 
            <p>Initialize <dfn class="dfn-paneled" data-dfn-type="dfn" data-lt="is later used|the script block&#x2019;s source" data-noexport="" id="is-later-used"><var>the script block&#x2019;s source</var><span class="dfn-panel"><b><a href="semantics-scripting.html#is-later-used">#is-later-used</a></b><b>Referenced in:</b><span><a href="semantics-scripting.html#ref-for-is-later-used-1">4.12.1. The script element</a></span></span></dfn> as follows:</p>
            <dl class="switch">
             <dt>If the script is from an external file and <var>the script
          block&#x2019;s type</var> is a text-based language
             <dd>
              <p>The contents of that file, interpreted as a Unicode string, are the script source.</p>
              <p>To obtain the Unicode string, the user agent run the following steps:</p>
              <ol>
               <li>If the resource&#x2019;s <a data-link-type="dfn" href="infrastructure.html#content-type-metadata" id="ref-for-content-type-metadata-33">Content-Type metadata</a>, if any,
            specifies a character encoding, and the user agent supports that encoding, then let <var>character encoding</var> be that encoding, and jump to the bottom step in this
            series of steps.
               </li><li>If the algorithm above set <var>the script
            block&#x2019;s character encoding</var>, then let <var>character encoding</var> be
            that encoding, and jump to the bottom step in this series of steps.
               </li><li>Let <var>character encoding</var> be <var>the script block&#x2019;s fallback character
            encoding</var>.
               </li><li>
                <p>If the specification for <var>the script block&#x2019;s
            type</var> gives specific rules for decoding files in that format to Unicode, follow
            them, using <var>character encoding</var> as the character encoding specified by
            higher-level protocols, if necessary.</p>
                <p>Otherwise, <a data-link-type="dfn" href="infrastructure.html#decode" id="ref-for-decode-1">decode</a> the file to Unicode, using <var>character
            encoding</var> as the fallback encoding.</p>
                <p class="note" role="note"> The <a data-link-type="dfn" href="infrastructure.html#decode" id="ref-for-decode-2">decode</a> algorithm overrides <var>character
            encoding</var> if the file contains a BOM. </p>
              </li></ol>
             <dt>If the script is from an external file and <var>the script
          block&#x2019;s type</var> is an XML-based language
             <dd>
              <p>The external file is the script source. When it is later executed, it must be
          interpreted in a manner consistent with the specification defining the language given by <var>the script block&#x2019;s type</var>.</p>
             <dt>If the script is inline and <var>the script block&#x2019;s
          type</var> is a text-based language
             <dd>
              <p>The value of the <code>text</code> IDL attribute at the time
          the element&#x2019;s <a data-link-type="dfn" href="semantics-scripting.html#already-started" id="ref-for-already-started-3">&quot;already started&quot;</a> flag was last set is the script source.</p>
             <dt>If the script is inline and <var>the script block&#x2019;s
          type</var> is an XML-based language
             <dd>
              <p>The child nodes of the <code><a data-link-type="element" href="semantics-scripting.html#elementdef-script" id="ref-for-elementdef-script-61">script</a></code> element at the time the element&#x2019;s <a data-link-type="dfn" href="semantics-scripting.html#already-started" id="ref-for-already-started-4">&quot;already started&quot;</a> flag was last set are the script source.</p>
            </dd></dt></dd></dt></dd></dt></dd></dt></dl>
           </li><li>
            <p><a data-link-type="dfn" href="infrastructure.html#fire" id="ref-for-fire-154">Fire a simple event</a> named <code>beforescriptexecute</code> that bubbles and is cancelable
        at the <code><a data-link-type="element" href="semantics-scripting.html#elementdef-script" id="ref-for-elementdef-script-62">script</a></code> element.</p>
            <p>If the event is canceled, then abort these steps.</p>
           </li><li>
            <p>If the script is from an external file, then increment the <a data-link-type="dfn" href="webappapis.html#ignore-destructive-writes-counter" id="ref-for-ignore-destructive-writes-counter-1">ignore-destructive-writes counter</a> of the <code><a data-link-type="element" href="semantics-scripting.html#elementdef-script" id="ref-for-elementdef-script-63">script</a></code> element&#x2019;s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-node-document">node document</a>. Let <var>neutralized doc</var> be that <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document">Document</a></code>.</p>
           </li><li>
            <p>Let <var>old script element</var> be the value to which the <code>script</code> element&#x2019;s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-node-document">node document</a>&#x2019;s <code>currentScript</code> object was most recently
        initialized.</p>
           </li><li>
            <p>Initialize the <code><a data-link-type="element" href="semantics-scripting.html#elementdef-script" id="ref-for-elementdef-script-64">script</a></code> element&#x2019;s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-node-document">node document</a>&#x2019;s <code>currentScript</code> object to the <code>script</code> element.</p>
           </li><li>
            <p><a data-link-type="dfn" href="webappapis.html#create-a-script" id="ref-for-create-a-script-1">Create a script</a>, using <var>the script
        block&#x2019;s source</var>, the <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url-url">URL</a> from which the script was obtained, <var>the script block&#x2019;s type</var> as the scripting language, and
        the <a data-link-type="dfn" href="webappapis.html#environment-settings-object" id="ref-for-environment-settings-object-12">environment settings object</a> of the <code><a data-link-type="element" href="semantics-scripting.html#elementdef-script" id="ref-for-elementdef-script-65">script</a></code> element&#x2019;s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-node-document">node document</a>&#x2019;s <code>Window</code> object.</p>
            <p>If the script came from a resource that was fetched in the steps above, and the resource
        was <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-cors-check">CORS-cross-origin</a>, then pass the <var>muted errors</var> flag to the <a data-link-type="dfn" href="webappapis.html#create-a-script" id="ref-for-create-a-script-2">create a script</a> algorithm as well.</p>
            <p class="note" role="note"> This is where the script is compiled and actually executed. </p>
           </li><li>
            <p>Initialize the <code><a data-link-type="element" href="semantics-scripting.html#elementdef-script" id="ref-for-elementdef-script-66">script</a></code> element&#x2019;s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-node-document">node document</a>&#x2019;s <code>currentScript</code> object to <var>old script
        element</var>.</p>
           </li><li>
            <p>Decrement the <a data-link-type="dfn" href="webappapis.html#ignore-destructive-writes-counter" id="ref-for-ignore-destructive-writes-counter-2">ignore-destructive-writes counter</a> of <var>neutralized doc</var>, if it was incremented in the earlier step.</p>
           </li><li>
            <p><a data-link-type="dfn" href="infrastructure.html#fire" id="ref-for-fire-155">Fire a simple event</a> named <code>afterscriptexecute</code> that bubbles (but is not
        cancelable) at the <code><a data-link-type="element" href="semantics-scripting.html#elementdef-script" id="ref-for-elementdef-script-67">script</a></code> element.</p>
           </li><li>
            <p>If the script is from an external file, <a data-link-type="dfn" href="infrastructure.html#fire" id="ref-for-fire-156">fire a simple event</a> named <code>load</code> at the <code><a data-link-type="element" href="semantics-scripting.html#elementdef-script" id="ref-for-elementdef-script-68">script</a></code> element.</p>
            <p>Otherwise, the script is internal; <a data-link-type="dfn" href="webappapis.html#queuing" id="ref-for-queuing-126">queue a task</a> to <a data-link-type="dfn" href="infrastructure.html#fire" id="ref-for-fire-157">fire a simple
        event</a> named <code>load</code> at the <code>script</code> element.</p>
          </li></ol>
        </dd></dt></dd></dt></dl>
      </li></ol>
      <p>The IDL attributes <dfn class="dfn-paneled idl-code" data-dfn-for="HTMLScriptElement" data-dfn-type="attribute" data-export="" id="dom-htmlscriptelement-src"><code>src</code><span class="dfn-panel"><b><a href="semantics-scripting.html#dom-htmlscriptelement-src">#dom-htmlscriptelement-src</a></b><b>Referenced in:</b><span><a href="semantics-scripting.html#ref-for-dom-htmlscriptelement-src-1">4.12.1. The script element</a></span></span></dfn>, <dfn class="dfn-paneled idl-code" data-dfn-for="HTMLScriptElement" data-dfn-type="attribute" data-export="" id="dom-htmlscriptelement-type"><code>type</code><span class="dfn-panel"><b><a href="semantics-scripting.html#dom-htmlscriptelement-type">#dom-htmlscriptelement-type</a></b><b>Referenced in:</b><span><a href="semantics-scripting.html#ref-for-dom-htmlscriptelement-type-1">4.12.1. The script element</a></span></span></dfn>, <dfn class="dfn-paneled idl-code" data-dfn-for="HTMLScriptElement" data-dfn-type="attribute" data-export="" id="dom-htmlscriptelement-charset"><code>charset</code><span class="dfn-panel"><b><a href="semantics-scripting.html#dom-htmlscriptelement-charset">#dom-htmlscriptelement-charset</a></b><b>Referenced in:</b><span><a href="semantics-scripting.html#ref-for-dom-htmlscriptelement-charset-1">4.12.1. The script element</a></span></span></dfn>, and <dfn class="dfn-paneled idl-code" data-dfn-for="HTMLScriptElement" data-dfn-type="attribute" data-export="" id="dom-htmlscriptelement-defer"><code>defer</code><span class="dfn-panel"><b><a href="semantics-scripting.html#dom-htmlscriptelement-defer">#dom-htmlscriptelement-defer</a></b><b>Referenced in:</b><span><a href="semantics-scripting.html#ref-for-dom-htmlscriptelement-defer-1">4.12.1. The script element</a></span></span></dfn>, must each <a data-link-type="dfn" href="infrastructure.html#reflection" id="ref-for-reflection-114">reflect</a> the respective
  content attributes of the same name.</p>
      <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="HTMLScriptElement" data-dfn-type="attribute" data-export="" id="dom-htmlscriptelement-crossorigin"><code>crossOrigin</code><span class="dfn-panel"><b><a href="semantics-scripting.html#dom-htmlscriptelement-crossorigin">#dom-htmlscriptelement-crossorigin</a></b><b>Referenced in:</b><span><a href="semantics-scripting.html#ref-for-dom-htmlscriptelement-crossorigin-1">4.12.1. The script element</a></span></span></dfn> IDL attribute must <a data-link-type="dfn" href="infrastructure.html#reflection" id="ref-for-reflection-115">reflect</a> the <code><a data-link-type="element-sub" href="semantics-scripting.html#element-attrdef-script-crossorigin" id="ref-for-element-attrdef-script-crossorigin-1">crossorigin</a></code> content attribute.</p>
      <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="HTMLScriptElement" data-dfn-type="attribute" data-export="" id="dom-htmlscriptelement-async"><code>async</code><span class="dfn-panel"><b><a href="semantics-scripting.html#dom-htmlscriptelement-async">#dom-htmlscriptelement-async</a></b><b>Referenced in:</b><span><a href="semantics-scripting.html#ref-for-dom-htmlscriptelement-async-1">4.12.1. The script element</a></span></span></dfn> IDL attribute controls whether the
  element will execute <a data-link-type="dfn" href="infrastructure.html#in-parallel" id="ref-for-in-parallel-24">in parallel</a> or not. If the element&#x2019;s <a data-link-type="dfn" href="semantics-scripting.html#non-blocking" id="ref-for-non-blocking-6">&quot;non-blocking&quot;</a> flag is
  set, then, on getting, the <code>async</code> IDL attribute must return
  true, and on setting, the <a data-link-type="dfn" href="semantics-scripting.html#non-blocking" id="ref-for-non-blocking-7">&quot;non-blocking&quot;</a> flag must first be unset, and then the
  content attribute must be removed if the IDL attribute&#x2019;s new value is false, and must be set to
  the empty string if the IDL attribute&#x2019;s new value is true. If the element&#x2019;s <a data-link-type="dfn" href="semantics-scripting.html#non-blocking" id="ref-for-non-blocking-8">&quot;non-blocking&quot;</a> flag is <em>not</em> set, the IDL attribute must <a data-link-type="dfn" href="infrastructure.html#reflection" id="ref-for-reflection-116">reflect</a> the <code><a data-link-type="element-sub" href="semantics-scripting.html#element-attrdef-script-async" id="ref-for-element-attrdef-script-async-1">async</a></code> content attribute.</p>
     </div>
     <dl class="domintro">
      <dt><var>script</var> . <code>text</code> [ = <var>value</var> ]
      <dd>
       <p>Returns the contents of the element, ignoring child nodes that aren&#x2019;t <code>Text</code> nodes.</p>
       <p>Can be set, to replace the element&#x2019;s children with the given value.</p>
     </dd></dt></dl>
     <div class="impl">
      <p>The IDL attribute <dfn class="dfn-paneled idl-code" data-dfn-for="HTMLScriptElement" data-dfn-type="attribute" data-export="" id="dom-htmlscriptelement-text"><code>text</code><span class="dfn-panel"><b><a href="semantics-scripting.html#dom-htmlscriptelement-text">#dom-htmlscriptelement-text</a></b><b>Referenced in:</b><span><a href="semantics-scripting.html#ref-for-dom-htmlscriptelement-text-1">4.12.1. The script element</a></span></span></dfn> must return a
  concatenation of the contents of all the <code>Text</code> nodes that are children of the <code><a data-link-type="element" href="semantics-scripting.html#elementdef-script" id="ref-for-elementdef-script-69">script</a></code> element (ignoring any other nodes such as comments or elements), in tree
  order. On setting, it must act the same way as the <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#dom-node-textcontent">textContent</a></code> IDL attribute.</p>
     </div>
     <p class="note" role="note"> When inserted using the <a class="idl-code" data-link-type="method" href="dom.html#dom-document-write" id="ref-for-dom-document-write-3"><code>document.write()</code></a> method, <code><a data-link-type="element" href="semantics-scripting.html#elementdef-script" id="ref-for-elementdef-script-70">script</a></code> elements execute (typically blocking further script execution or HTML parsing), but when inserted using <code>innerHTML</code> and <code>outerHTML</code> attributes, they do not execute at all. </p>
     <div class="example" id="example-99b87cf2">
      <a class="self-link" href="semantics-scripting.html#example-99b87cf2"></a> In this example, two <code><a data-link-type="element" href="semantics-scripting.html#elementdef-script" id="ref-for-elementdef-script-71">script</a></code> elements are used. One embeds an external script, and
    the other includes some data. 
<pre class="highlight"><span></span><span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;game-engine.js&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">script</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text/x-game-map&quot;</span><span class="p">&gt;</span>
<span class="p">........</span><span class="nx">U</span><span class="p">.........</span><span class="nx">e</span>
<span class="nx">o</span><span class="p">............</span><span class="nx">A</span><span class="p">....</span><span class="nx">e</span>
<span class="p">.....</span><span class="nx">A</span><span class="p">.....</span><span class="nx">AAA</span><span class="p">....</span><span class="nx">e</span>
<span class="p">.</span><span class="nx">A</span><span class="p">..</span><span class="nx">AAA</span><span class="p">...</span><span class="nx">AAAAA</span><span class="p">...</span><span class="nx">e</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span></pre>
      <p>The data in this case might be used by the script to generate the map of a video game. The
    data doesn&#x2019;t have to be used that way, though; maybe the map data is actually embedded in other
    parts of the page&#x2019;s markup, and the data block here is just used by the site&#x2019;s search engine to
    help users who are looking for particular features in their game maps.</p>
     </div>
     <div class="example" id="example-2b7f8725">
      <a class="self-link" href="semantics-scripting.html#example-2b7f8725"></a> The following sample shows how a script element can be used to define a function that is then
    used by other parts of the document. It also shows how a <code><a data-link-type="element" href="semantics-scripting.html#elementdef-script" id="ref-for-elementdef-script-72">script</a></code> element can be used
    to invoke script while the document is being parsed, in this case to initialize the form&#x2019;s
    output. 
<pre class="highlight"><span></span><span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
  <span class="kd">function</span> <span class="nx">calculate</span><span class="p">(</span><span class="nx">form</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">price</span> <span class="o">=</span> <span class="mi">52000</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">form</span><span class="p">.</span><span class="nx">elements</span><span class="p">.</span><span class="nx">brakes</span><span class="p">.</span><span class="nx">checked</span><span class="p">)</span>
      <span class="nx">price</span> <span class="o">+=</span> <span class="mi">1000</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">form</span><span class="p">.</span><span class="nx">elements</span><span class="p">.</span><span class="nx">radio</span><span class="p">.</span><span class="nx">checked</span><span class="p">)</span>
      <span class="nx">price</span> <span class="o">+=</span> <span class="mi">2500</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">form</span><span class="p">.</span><span class="nx">elements</span><span class="p">.</span><span class="nx">turbo</span><span class="p">.</span><span class="nx">checked</span><span class="p">)</span>
      <span class="nx">price</span> <span class="o">+=</span> <span class="mi">5000</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">form</span><span class="p">.</span><span class="nx">elements</span><span class="p">.</span><span class="nx">sticker</span><span class="p">.</span><span class="nx">checked</span><span class="p">)</span>
      <span class="nx">price</span> <span class="o">+=</span> <span class="mi">250</span><span class="p">;</span>
    <span class="nx">form</span><span class="p">.</span><span class="nx">elements</span><span class="p">.</span><span class="nx">result</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="nx">price</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">form</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;pricecalc&quot;</span> <span class="na">onsubmit</span><span class="o">=</span><span class="s">&quot;return false&quot;</span> <span class="na">onchange</span><span class="o">=</span><span class="s">&quot;calculate(this)&quot;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">fieldset</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">legend</span><span class="p">&gt;</span>Work out the price of your car<span class="p">&lt;/</span><span class="nt">legend</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>Base cost: &#xA3;52000.<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>Select additional options:<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">ul</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;&lt;</span><span class="nt">label</span><span class="p">&gt;&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">checkbox</span> <span class="na">name</span><span class="o">=</span><span class="s">brakes</span><span class="p">&gt;</span> Ceramic brakes (&#xA3;1000)<span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;&lt;</span><span class="nt">label</span><span class="p">&gt;&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">checkbox</span> <span class="na">name</span><span class="o">=</span><span class="s">radio</span><span class="p">&gt;</span> Satellite radio (&#xA3;2500)<span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;&lt;</span><span class="nt">label</span><span class="p">&gt;&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">checkbox</span> <span class="na">name</span><span class="o">=</span><span class="s">turbo</span><span class="p">&gt;</span> Turbo charger (&#xA3;5000)<span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;&lt;</span><span class="nt">label</span><span class="p">&gt;&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">checkbox</span> <span class="na">name</span><span class="o">=</span><span class="s">sticker</span><span class="p">&gt;</span> &quot;XZ&quot; sticker (&#xA3;250)<span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>Total: &#xA3;<span class="p">&lt;</span><span class="nt">output</span> <span class="na">name</span><span class="o">=</span><span class="s">result</span><span class="p">&gt;&lt;/</span><span class="nt">output</span><span class="p">&gt;&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">fieldset</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
  <span class="nx">calculate</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">forms</span><span class="p">.</span><span class="nx">pricecalc</span><span class="p">);</span>
  <span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">form</span><span class="p">&gt;</span></pre>
     </div>
     <h5 class="heading settled" data-level="4.12.1.1" id="scripting-languages"><span class="secno">4.12.1.1. </span><span class="content">Scripting languages</span><a class="self-link" href="semantics-scripting.html#scripting-languages"></a></h5>
     <div class="impl">
      <p>A user agent is said to <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="support-the-scripting-language">support the scripting language<span class="dfn-panel"><b><a href="semantics-scripting.html#support-the-scripting-language">#support-the-scripting-language</a></b><b>Referenced in:</b><span><a href="semantics-scripting.html#ref-for-support-the-scripting-language-1">4.12.1. The script element</a></span></span></dfn> if each component of <var>the script block&#x2019;s type</var> is an <a data-link-type="dfn" href="infrastructure.html#ascii-case-insensitive" id="ref-for-ascii-case-insensitive-44">ASCII
  case-insensitive</a> match for the corresponding component in the <a data-link-type="dfn" href="infrastructure.html#mime-type" id="ref-for-mime-type-24">MIME type</a> string
  of a scripting language that the user agent implements.</p>
     </div>
     <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="javascript-mime-type">JavaScript MIME type<span class="dfn-panel"><b><a href="semantics-scripting.html#javascript-mime-type">#javascript-mime-type</a></b><b>Referenced in:</b><span><a href="semantics-scripting.html#ref-for-javascript-mime-type-1">4.12.1.1. Scripting languages</a></span><span><a href="browsers.html#ref-for-javascript-mime-type-2">6.6.1. Navigating across documents</a></span></span></dfn> is a <a data-link-type="dfn" href="infrastructure.html#mime-type" id="ref-for-mime-type-25">MIME type</a> string that is one of the
  following and refers to JavaScript: <a data-link-type="biblio" href="references.html#biblio-ecma-262">[ECMA-262]</a></p>
     <ul class="brief">
      <li><code>application/ecmascript</code> 
      </li><li><code>application/javascript</code> 
      </li><li><code>application/x-ecmascript</code> 
      </li><li><code>application/x-javascript</code> 
      </li><li><code>text/ecmascript</code> 
      </li><li><code>text/javascript</code> 
      </li><li><code>text/javascript1.0</code> 
      </li><li><code>text/javascript1.1</code> 
      </li><li><code>text/javascript1.2</code> 
      </li><li><code>text/javascript1.3</code> 
      </li><li><code>text/javascript1.4</code> 
      </li><li><code>text/javascript1.5</code> 
      </li><li><code>text/jscript</code> 
      </li><li><code>text/livescript</code> 
      </li><li><code>text/x-ecmascript</code> 
      </li><li><code>text/x-javascript</code> 
     </li></ul>
     <p>User agents must recognize all <a data-link-type="dfn" href="semantics-scripting.html#javascript-mime-type" id="ref-for-javascript-mime-type-1">JavaScript MIME
  types</a>.</p>
     <div class="impl">
      <p>User agents may support other <a data-link-type="dfn" href="infrastructure.html#mime-type" id="ref-for-mime-type-26">MIME types</a> for other languages,
  but must not support other <a data-link-type="dfn" href="infrastructure.html#mime-type" id="ref-for-mime-type-27">MIME types</a> for the languages in the list
  above. User agents are not required to support the languages listed above.</p>
      <p>The following <a data-link-type="dfn" href="infrastructure.html#mime-type" id="ref-for-mime-type-28">MIME types</a> (with or without parameters) must not
  be interpreted as scripting languages:</p>
      <ul class="brief">
       <li><code>text/plain</code> 
       </li><li><code>text/xml</code> 
       </li><li><code>application/octet-stream</code> 
       </li><li><code>application/xml</code> 
      </li></ul>
      <p class="note" role="note"> These types are explicitly listed here because they are poorly-defined types that
  are nonetheless likely to be used as formats for data blocks, and it would be problematic if they
  were suddenly to be interpreted as script by a user agent. </p>
      <p>When examining types to determine if they represent supported languages, user agents must not
  ignore MIME parameters. Types are to be compared including all parameters.</p>
      <p class="note" role="note"> For example, types that include the <code>charset</code> parameter will
  not be recognized as referencing any of the scripting languages listed above. </p>
     </div>
     <h5 class="heading settled" data-level="4.12.1.2" id="restrictions-for-contents-of-script-elements"><span class="secno">4.12.1.2. </span><span class="content"><dfn class="dfn-paneled" data-dfn-type="dfn" data-lt="script content restrictions" data-noexport="" id="script-content-restrictions">Restrictions for contents of <code><a data-link-type="element" href="semantics-scripting.html#elementdef-script" id="ref-for-elementdef-script-73">script</a></code> elements<span class="dfn-panel"><b><a href="semantics-scripting.html#script-content-restrictions">#script-content-restrictions</a></b><b>Referenced in:</b><span><a href="semantics-scripting.html#ref-for-script-content-restrictions-1">4.12.1. The script element</a> <a href="semantics-scripting.html#ref-for-script-content-restrictions-2">(2)</a></span></span></dfn></span><a class="self-link" href="semantics-scripting.html#restrictions-for-contents-of-script-elements"></a></h5>
     <p class="note" role="note"> The easiest and safest way to avoid the rather strange restrictions described in
  this section is to always escape &quot;<code>&lt;!--</code>&quot; as &quot;<code>&lt;\!--</code>&quot;, &quot;<code>&lt;script</code>&quot; as &quot;<code>&lt;\script</code>&quot;, and &quot;<code>&lt;/script</code>&quot; as &quot;<code>&lt;\/script</code>&quot; when these sequences appear in literals in scripts (e.g., in
  strings, regular expressions, or comments), and to avoid writing code that uses such constructs in
  expressions. Doing so avoids the pitfalls that the restrictions in this section are prone to
  triggering: namely, that, for historical reasons, parsing of <code>script</code> blocks in HTML is
  a strange and exotic practice that acts unintuitively in the face of these sequences. </p>
     <p>The <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#dom-node-textcontent">textContent</a></code> of a <code><a data-link-type="element" href="semantics-scripting.html#elementdef-script" id="ref-for-elementdef-script-74">script</a></code> element must match the <code>script</code> production in the following ABNF, the character set for which is Unicode. <a data-link-type="biblio" href="references.html#biblio-abnf">[ABNF]</a></p>
<pre data-highlight="abnf">script        = outer *( comment-open inner comment-close outer )

outer         = &lt; any string that doesn&#x2019;t contain a substring that matches not-in-outer &gt;
not-in-outer  = comment-open
inner         = &lt; any string that doesn&#x2019;t contain a substring that matches not-in-inner &gt;
not-in-inner  = comment-close / script-open

comment-open  = &quot;&lt;!--&quot;
comment-close = &quot;--&gt;&quot;
script-open   = &quot;&lt;&quot; s c r i p t tag-end

s             =  %x0053 ; U+0053 LATIN CAPITAL LETTER S
s             =/ %x0073 ; U+0073 LATIN SMALL LETTER S
c             =  %x0043 ; U+0043 LATIN CAPITAL LETTER C
c             =/ %x0063 ; U+0063 LATIN SMALL LETTER C
r             =  %x0052 ; U+0052 LATIN CAPITAL LETTER R
r             =/ %x0072 ; U+0072 LATIN SMALL LETTER R
i             =  %x0049 ; U+0049 LATIN CAPITAL LETTER I
i             =/ %x0069 ; U+0069 LATIN SMALL LETTER I
p             =  %x0050 ; U+0050 LATIN CAPITAL LETTER P
p             =/ %x0070 ; U+0070 LATIN SMALL LETTER P
t             =  %x0054 ; U+0054 LATIN CAPITAL LETTER T
t             =/ %x0074 ; U+0074 LATIN SMALL LETTER T

tag-end       =  %x0009 ; U+0009 CHARACTER TABULATION (tab)
tag-end       =/ %x000A ; U+000A LINE FEED (LF)
tag-end       =/ %x000C ; U+000C FORM FEED (FF)
tag-end       =/ %x0020 ; U+0020 SPACE
tag-end       =/ %x002F ; U+002F SOLIDUS (/)
tag-end       =/ %x003E ; U+003E GREATER-THAN SIGN (&gt;)
</pre>
     <p>When a <code><a data-link-type="element" href="semantics-scripting.html#elementdef-script" id="ref-for-elementdef-script-75">script</a></code> element contains <a data-link-type="dfn" href="semantics-scripting.html#script-documentation" id="ref-for-script-documentation-2">script documentation</a>, there are
  further restrictions on the contents of the element, as described in the section below.</p>
     <div class="example" id="example-1075d5ff">
      <a class="self-link" href="semantics-scripting.html#example-1075d5ff"></a> The following script illustrates this issue. Suppose you have a script that contains a string,
    as in: 
<pre class="highlight"><span></span><span class="kd">var</span> <span class="nx">example</span> <span class="o">=</span> <span class="s1">&apos;Consider this string: &lt;!-- &lt;script&gt;&apos;</span><span class="p">;</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">example</span><span class="p">);</span></pre>
      <p>If one were to put this string directly in a <code>script</code> block, it would violate the
    restrictions above:</p>
<pre class="highlight"><span></span><span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
  <span class="kd">var</span> <span class="nx">example</span> <span class="o">=</span> <span class="s1">&apos;Consider this string: &lt;!-- &lt;script&gt;&apos;</span><span class="p">;</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">example</span><span class="p">);</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span></pre>
      <p>The bigger problem, though, and the reason why it would violate those restrictions, is that
    actually the script would get parsed weirdly: <em>the script block above is not terminated</em>.
    That is, what looks like a &quot;<code>&lt;/script&gt;</code>&quot; end tag in this snippet is
    actually still part of the <code>script</code> block. The script doesn&#x2019;t execute (since it&#x2019;s not
    terminated); if it somehow were to execute, as it might if the markup looked as follows, it would
    fail because the script is not valid JavaScript:</p>
<pre class="highlight"><span></span><span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
  <span class="kd">var</span> <span class="nx">example</span> <span class="o">=</span> <span class="s1">&apos;Consider this string: &lt;!-- &lt;script&gt;&apos;</span><span class="p">;</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">example</span><span class="p">);</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="c">&lt;!-- despite appearances, this is actually part of the script still! --&gt;</span>
<span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
  <span class="p">...</span> <span class="c1">// this is the same script block still...</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span></pre>
      <p>What is going on here is that for legacy reasons, &quot;<code>&lt;!--</code>&quot; and &quot;<code>&lt;script</code>&quot; strings in <code><a data-link-type="element" href="semantics-scripting.html#elementdef-script" id="ref-for-elementdef-script-76">script</a></code> elements in HTML need to be balanced
    in order for the parser to consider closing the block.</p>
      <p>By escaping the problematic strings as mentioned at the top of this section, the problem is
    avoided entirely:</p>
<pre class="highlight"><span></span><span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
  <span class="kd">var</span> <span class="nx">example</span> <span class="o">=</span> <span class="s1">&apos;Consider this string: &lt;\!-- &lt;\script&gt;&apos;</span><span class="p">;</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">example</span><span class="p">);</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="c">&lt;!-- this is just a comment between script blocks --&gt;</span>
<span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
  <span class="p">...</span> <span class="c1">// this is a new script block</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span></pre>
      <p>It is possible for these sequences to naturally occur in script expressions, as in the
    following examples:</p>
<pre class="highlight"><span></span><span class="k">if</span> <span class="p">(</span><span class="nx">x</span><span class="c">&lt;!--</span><span class="nx">y</span><span class="p">)</span> <span class="p">{</span> <span class="p">...</span> <span class="p">}</span>
<span class="k">if</span> <span class="p">(</span> <span class="nx">player</span><span class="o">&lt;</span><span class="nx">script</span> <span class="p">)</span> <span class="p">{</span> <span class="p">...</span> <span class="p">}</span></pre>
      <p>In such cases the characters cannot be escaped, but the expressions can be rewritten so that
    the sequences don&#x2019;t occur, as in:</p>
<pre class="highlight"><span></span><span class="k">if</span> <span class="p">(</span><span class="nx">x</span> <span class="o">&lt;</span> <span class="o">!--</span><span class="nx">y</span><span class="p">)</span> <span class="p">{</span> <span class="p">...</span> <span class="p">}</span>
<span class="k">if</span> <span class="p">(</span><span class="o">!--</span><span class="nx">y</span> <span class="o">&gt;</span> <span class="nx">x</span><span class="p">)</span> <span class="p">{</span> <span class="p">...</span> <span class="p">}</span>
<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="o">--</span><span class="nx">y</span><span class="p">)</span> <span class="o">&gt;</span> <span class="nx">x</span><span class="p">)</span> <span class="p">{</span> <span class="p">...</span> <span class="p">}</span>
<span class="k">if</span> <span class="p">(</span><span class="nx">player</span> <span class="o">&lt;</span> <span class="nx">script</span><span class="p">)</span> <span class="p">{</span> <span class="p">...</span> <span class="p">}</span>
<span class="k">if</span> <span class="p">(</span><span class="nx">script</span> <span class="o">&gt;</span> <span class="nx">player</span><span class="p">)</span> <span class="p">{</span> <span class="p">...</span> <span class="p">}</span></pre>
      <p>Doing this also avoids a different pitfall as well: for related historical reasons, the string
    &quot;&lt;!--&quot; in JavaScript is actually treated as a line comment start, just like &quot;//&quot;.</p>
     </div>
     <h5 class="heading settled" data-level="4.12.1.3" id="inline-documentation-for-external-scripts"><span class="secno">4.12.1.3. </span><span class="content"><dfn class="dfn-paneled" data-dfn-type="dfn" data-lt="script documentation" data-noexport="" id="script-documentation">Inline documentation for external scripts<span class="dfn-panel"><b><a href="semantics-scripting.html#script-documentation">#script-documentation</a></b><b>Referenced in:</b><span><a href="semantics-scripting.html#ref-for-script-documentation-1">4.12.1. The script element</a></span><span><a href="semantics-scripting.html#ref-for-script-documentation-2">4.12.1.2. Restrictions for contents of script elements</a></span></span></dfn></span><a class="self-link" href="semantics-scripting.html#inline-documentation-for-external-scripts"></a></h5>
     <p>If a <code><a data-link-type="element" href="semantics-scripting.html#elementdef-script" id="ref-for-elementdef-script-77">script</a></code> element&#x2019;s <code><a data-link-type="element-sub" href="semantics-scripting.html#element-attrdef-script-src" id="ref-for-element-attrdef-script-src-3">src</a></code> attribute is
  specified, then the contents of the <code><a data-link-type="element" href="semantics-scripting.html#elementdef-script" id="ref-for-elementdef-script-78">script</a></code> element, if any, must be such that the
  value of the <code>text</code> IDL attribute, which is derived from the
  element&#x2019;s contents, matches the <code>documentation</code> production in the following
  ABNF, the character set for which is Unicode. <a data-link-type="biblio" href="references.html#biblio-abnf">[ABNF]</a></p>
<pre data-highlight="abnf">documentation = *( *( space / tab / comment ) [ line-comment ] newline )
comment       = slash star *( not-star / star not-slash ) 1*star slash
line-comment  = slash slash *not-newline

; characters
tab           = %x0009 ; U+0009 CHARACTER TABULATION (tab)
newline       = %x000A ; U+000A LINE FEED (LF)
space         = %x0020 ; U+0020 SPACE
star          = %x002A ; U+002A ASTERISK (*)
slash         = %x002F ; U+002F SOLIDUS (/)
not-newline   = %x0000-0009 / %x000B-10FFFF
                ; a Unicode character other than U+000A LINE FEED (LF)
not-star      = %x0000-0029 / %x002B-10FFFF
                ; a Unicode character other than U+002A ASTERISK (*)
not-slash     = %x0000-002E / %x0030-10FFFF
                ; a Unicode character other than U+002F SOLIDUS (/)
</pre>
     <p class="note" role="note"> This corresponds to putting the contents of the element in JavaScript
  comments. </p>
     <p class="note" role="note"> This requirement is in addition to the earlier restrictions on the syntax of
  contents of <code><a data-link-type="element" href="semantics-scripting.html#elementdef-script" id="ref-for-elementdef-script-79">script</a></code> elements. </p>
     <div class="example" id="example-93e416e7">
      <a class="self-link" href="semantics-scripting.html#example-93e416e7"></a> This allows authors to include documentation, such as license information or API information,
    inside their documents while still referring to external script files. The syntax is constrained
    so that authors don&#x2019;t accidentally include what looks like valid script while also providing a <code>src</code> attribute. 
<pre class="highlight"><span></span><span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;cool-effects.js&quot;</span><span class="p">&gt;</span>
  <span class="c1">// create new instances using:</span>
  <span class="c1">//    var e = new Effect();</span>
  <span class="c1">// start the effect using .play, stop using .stop:</span>
  <span class="c1">//    e.play();</span>
  <span class="c1">//    e.stop();</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span></pre>
     </div>
     <div class="impl">
      <h5 class="heading settled" data-level="4.12.1.4" id="interaction-of-script-elements-and-xslt"><span class="secno">4.12.1.4. </span><span class="content">Interaction of <code><a data-link-type="element" href="semantics-scripting.html#elementdef-script" id="ref-for-elementdef-script-80">script</a></code> elements and XSLT</span><a class="self-link" href="semantics-scripting.html#interaction-of-script-elements-and-xslt"></a></h5>
      <p><em>This section is non-normative.</em></p>
      <p>This specification does not define how XSLT interacts with the <code><a data-link-type="element" href="semantics-scripting.html#elementdef-script" id="ref-for-elementdef-script-81">script</a></code> element.
  However, in the absence of another specification actually defining this, here are some guidelines
  for implementors, based on existing implementations:</p>
      <ul>
       <li>When an XSLT transformation program is triggered by an <code>&lt;?xml-stylesheet?&gt;</code> processing instruction and the browser implements a
    direct-to-DOM transformation, <code><a data-link-type="element" href="semantics-scripting.html#elementdef-script" id="ref-for-elementdef-script-82">script</a></code> elements created by the XSLT processor need to
    be marked <a data-link-type="dfn" href="semantics-scripting.html#parser-inserted" id="ref-for-parser-inserted-11">&quot;parser-inserted&quot;</a> and run in document order (modulo scripts marked <code>defer</code> or <code>async</code>), <a data-link-type="dfn" href="infrastructure.html#immediately" id="ref-for-immediately-10">immediately</a>, as the transformation is occurring.
       </li><li>The <code>XSLTProcessor.transformToDocument()</code> method
    adds elements to a <code>Document</code> that is not in a <a data-link-type="dfn" href="browsers.html#browsing-context" id="ref-for-browsing-context-85">browsing context</a>, and,
    accordingly, any <code><a data-link-type="element" href="semantics-scripting.html#elementdef-script" id="ref-for-elementdef-script-83">script</a></code> elements they create need to have their <a data-link-type="dfn" href="semantics-scripting.html#already-started" id="ref-for-already-started-5">&quot;already
    started&quot;</a> flag set in the <a data-link-type="dfn" href="semantics-scripting.html#prepare-a-script" id="ref-for-prepare-a-script-4">prepare a script</a> algorithm and never get executed
    (<a data-link-type="dfn" href="webappapis.html#scripting-is-disabled" id="ref-for-scripting-is-disabled-5">scripting is disabled</a>). Such <code>script</code> elements still need to be marked <a data-link-type="dfn" href="semantics-scripting.html#parser-inserted" id="ref-for-parser-inserted-12">&quot;parser-inserted&quot;</a>, though, such that their <code>async</code> IDL attribute will return false in the absence of an <code>async</code> content attribute.
       </li><li>The <code>XSLTProcessor.transformToFragment()</code> method
    needs to create a fragment that is equivalent to one built manually by creating the elements
    using <code>document.createElementNS()</code>. For instance,
    it needs to create <code><a data-link-type="element" href="semantics-scripting.html#elementdef-script" id="ref-for-elementdef-script-84">script</a></code> elements that aren&#x2019;t <a data-link-type="dfn" href="semantics-scripting.html#parser-inserted" id="ref-for-parser-inserted-13">&quot;parser-inserted&quot;</a> and
    that don&#x2019;t have their <a data-link-type="dfn" href="semantics-scripting.html#already-started" id="ref-for-already-started-6">&quot;already started&quot;</a> flag set, so that they will execute when the
    fragment is <a data-link-type="dfn" href="infrastructure.html#document-inserted-into-the-document" id="ref-for-document-inserted-into-the-document-18">inserted into a document</a>.
      </li></ul>
      <p>The main distinction between the first two cases and the last case is that the first two
  operate on <code>Document</code>s and the last operates on a fragment.</p>
     </div>
     <h4 class="heading settled" data-level="4.12.2" id="the-noscript-element"><span class="secno">4.12.2. </span><span class="content">The <dfn class="dfn-paneled" data-dfn-type="element" data-export="" id="elementdef-noscript"><code>noscript</code><span class="dfn-panel"><b><a href="semantics-scripting.html#elementdef-noscript">#elementdef-noscript</a></b><b>Referenced in:</b><span><a href="introduction.html#ref-for-elementdef-noscript-1">1.6. HTML vs XHTML</a></span><span><a href="dom.html#ref-for-elementdef-noscript-2">3.2.4.2.1. Metadata content</a></span><span><a href="dom.html#ref-for-elementdef-noscript-3">3.2.4.2.2. Flow content</a></span><span><a href="dom.html#ref-for-elementdef-noscript-4">3.2.4.2.5. Phrasing content</a></span><span><a href="document-metadata.html#ref-for-elementdef-noscript-5">4.2.4. The link element</a></span><span><a href="document-metadata.html#ref-for-elementdef-noscript-6">4.2.5. The meta element</a></span><span><a href="document-metadata.html#ref-for-elementdef-noscript-7">4.2.6. The style element</a></span><span><a href="grouping-content.html#ref-for-elementdef-noscript-8">4.4.1. The p element</a></span><span><a href="semantics-scripting.html#ref-for-elementdef-noscript-9">4.12.2. The noscript element</a> <a href="semantics-scripting.html#ref-for-elementdef-noscript-10">(2)</a> <a href="semantics-scripting.html#ref-for-elementdef-noscript-11">(3)</a> <a href="semantics-scripting.html#ref-for-elementdef-noscript-12">(4)</a> <a href="semantics-scripting.html#ref-for-elementdef-noscript-13">(5)</a> <a href="semantics-scripting.html#ref-for-elementdef-noscript-14">(6)</a> <a href="semantics-scripting.html#ref-for-elementdef-noscript-15">(7)</a> <a href="semantics-scripting.html#ref-for-elementdef-noscript-16">(8)</a> <a href="semantics-scripting.html#ref-for-elementdef-noscript-17">(9)</a> <a href="semantics-scripting.html#ref-for-elementdef-noscript-18">(10)</a> <a href="semantics-scripting.html#ref-for-elementdef-noscript-19">(11)</a> <a href="semantics-scripting.html#ref-for-elementdef-noscript-20">(12)</a> <a href="semantics-scripting.html#ref-for-elementdef-noscript-21">(13)</a> <a href="semantics-scripting.html#ref-for-elementdef-noscript-22">(14)</a> <a href="semantics-scripting.html#ref-for-elementdef-noscript-23">(15)</a> <a href="semantics-scripting.html#ref-for-elementdef-noscript-24">(16)</a> <a href="semantics-scripting.html#ref-for-elementdef-noscript-25">(17)</a> <a href="semantics-scripting.html#ref-for-elementdef-noscript-26">(18)</a> <a href="semantics-scripting.html#ref-for-elementdef-noscript-27">(19)</a> <a href="semantics-scripting.html#ref-for-elementdef-noscript-28">(20)</a> <a href="semantics-scripting.html#ref-for-elementdef-noscript-29">(21)</a> <a href="semantics-scripting.html#ref-for-elementdef-noscript-30">(22)</a> <a href="semantics-scripting.html#ref-for-elementdef-noscript-31">(23)</a> <a href="semantics-scripting.html#ref-for-elementdef-noscript-32">(24)</a> <a href="semantics-scripting.html#ref-for-elementdef-noscript-33">(25)</a> <a href="semantics-scripting.html#ref-for-elementdef-noscript-34">(26)</a> <a href="semantics-scripting.html#ref-for-elementdef-noscript-35">(27)</a> <a href="semantics-scripting.html#ref-for-elementdef-noscript-36">(28)</a> <a href="semantics-scripting.html#ref-for-elementdef-noscript-37">(29)</a></span><span><a href="syntax.html#ref-for-elementdef-noscript-38">8.1.2.4. Optional tags</a></span><span><a href="syntax.html#ref-for-elementdef-noscript-39">8.2.3.2. The stack of open elements</a></span><span><a href="syntax.html#ref-for-elementdef-noscript-40">8.2.5.4.5. The &quot;in head noscript&quot; insertion mode</a> <a href="syntax.html#ref-for-elementdef-noscript-41">(2)</a></span><span><a href="syntax.html#ref-for-elementdef-noscript-42">8.3. Serializing HTML fragments</a></span><span><a href="syntax.html#ref-for-elementdef-noscript-43">8.4. Parsing HTML fragments</a></span><span><a href="fullindex.html#ref-for-elementdef-noscript-44">Elements</a> <a href="fullindex.html#ref-for-elementdef-noscript-45">(2)</a> <a href="fullindex.html#ref-for-elementdef-noscript-46">(3)</a> <a href="fullindex.html#ref-for-elementdef-noscript-47">(4)</a></span><span><a href="fullindex.html#ref-for-elementdef-noscript-48">Element content categories</a> <a href="fullindex.html#ref-for-elementdef-noscript-49">(2)</a> <a href="fullindex.html#ref-for-elementdef-noscript-50">(3)</a></span><span><a href="fullindex.html#ref-for-elementdef-noscript-51">Element Interfaces</a></span></span></dfn> element</span><a class="self-link" href="semantics-scripting.html#the-noscript-element"></a></h4>
     <dl class="element">
      <dt><a data-link-type="dfn" href="dom.html#categories" id="ref-for-categories-108">Categories</a>:
      <dd><a data-link-type="dfn" href="dom.html#metadata-content" id="ref-for-metadata-content-14">Metadata content</a>.
      <dd><a data-link-type="dfn" href="dom.html#flow-content" id="ref-for-flow-content-146">Flow content</a>.
      <dd><a data-link-type="dfn" href="dom.html#phrasing-content" id="ref-for-phrasing-content-154">Phrasing content</a>.
      <dt><a data-link-type="dfn" href="dom.html#contexts-in-which-this-element-can-be-used" id="ref-for-contexts-in-which-this-element-can-be-used-107">Contexts in which this element can be used</a>:
      <dd>In a <code><a data-link-type="element" href="document-metadata.html#elementdef-head" id="ref-for-elementdef-head-31">head</a></code> element of an <a data-link-type="dfn" href="infrastructure.html#html-document" id="ref-for-html-document-16">HTML document</a>, if there are no ancestor <code><a data-link-type="element" href="semantics-scripting.html#elementdef-noscript" id="ref-for-elementdef-noscript-9">noscript</a></code> elements.
      <dd>Where <a data-link-type="dfn" href="dom.html#phrasing-content" id="ref-for-phrasing-content-155">phrasing content</a> is expected in <a data-link-type="dfn" href="infrastructure.html#html-document" id="ref-for-html-document-17">HTML documents</a>, if there are no ancestor <code><a data-link-type="element" href="semantics-scripting.html#elementdef-noscript" id="ref-for-elementdef-noscript-10">noscript</a></code> elements.
      <dt><a data-link-type="dfn" href="dom.html#content-model" id="ref-for-content-model-108">Content model</a>:
      <dd>When <a data-link-type="dfn" href="webappapis.html#scripting-is-disabled" id="ref-for-scripting-is-disabled-6">scripting is disabled</a>, in a <code><a data-link-type="element" href="document-metadata.html#elementdef-head" id="ref-for-elementdef-head-32">head</a></code> element: in any order, zero or more <code><a data-link-type="element" href="document-metadata.html#elementdef-link" id="ref-for-elementdef-link-59">link</a></code> elements, zero or more <code><a data-link-type="element" href="document-metadata.html#elementdef-style" id="ref-for-elementdef-style-32">style</a></code> elements, and zero or more <code><a data-link-type="element" href="document-metadata.html#elementdef-meta" id="ref-for-elementdef-meta-43">meta</a></code> elements.
      <dd>When <a data-link-type="dfn" href="webappapis.html#scripting-is-disabled" id="ref-for-scripting-is-disabled-7">scripting is disabled</a>, not in a <code><a data-link-type="element" href="document-metadata.html#elementdef-head" id="ref-for-elementdef-head-33">head</a></code> element: <a data-link-type="dfn" href="dom.html#transparent" id="ref-for-transparent-13">transparent</a>, but there must be no <code><a data-link-type="element" href="semantics-scripting.html#elementdef-noscript" id="ref-for-elementdef-noscript-11">noscript</a></code> element descendants.
      <dd>Otherwise: text that conforms to the requirements given in the prose.
      <dt><a data-link-type="dfn" href="dom.html#tag-omission-in-text-html" id="ref-for-tag-omission-in-text-html-107">Tag omission in text/html</a>:
      <dd>Neither tag is omissible
      <dt><a data-link-type="dfn" href="dom.html#content-attribute" id="ref-for-content-attribute-109">Content attributes</a>:
      <dd><a data-link-type="dfn" href="dom.html#global-attributes" id="ref-for-global-attributes-108">Global attributes</a>
      <dt>Allowed <a href="dom.html#aria-role-attribute">ARIA role attribute</a> values:
      <dd>None
      <dt>Allowed <a href="dom.html#state-and-property-attributes">ARIA state and property attributes</a>:
      <dd><a data-link-type="dfn" href="dom.html#global-aria--attributes" id="ref-for-global-aria--attributes-130">Global aria-* attributes</a>
      <dt><a data-link-type="dfn" href="dom.html#dom-interface" id="ref-for-dom-interface-107">DOM interface</a>:
      <dd>Uses <code>HTMLElement</code>.
     </dd></dt></dd></dt></dd></dt></dd></dt></dd></dt></dd></dd></dd></dt></dd></dd></dt></dd></dd></dd></dt></dl>
     <p>The <code><a data-link-type="element" href="semantics-scripting.html#elementdef-noscript" id="ref-for-elementdef-noscript-12">noscript</a></code> element <a data-link-type="dfn" href="dom.html#represent" id="ref-for-represent-173">represents</a> nothing if <a data-link-type="dfn" href="webappapis.html#scripting-was-enabled" id="ref-for-scripting-was-enabled-2">scripting is enabled</a>, and <a data-link-type="dfn" href="dom.html#represent" id="ref-for-represent-174">represents</a> its children if <a data-link-type="dfn" href="webappapis.html#scripting-is-disabled" id="ref-for-scripting-is-disabled-8">scripting is disabled</a>. It is used to present different
  markup to user agents that support scripting and those that don&#x2019;t support scripting, by affecting
  how the document is parsed.</p>
     <p>When used in <a data-link-type="dfn" href="infrastructure.html#html-document" id="ref-for-html-document-18">HTML documents</a>, the allowed content model is as follows:</p>
     <dl>
      <dt>In a <code><a data-link-type="element" href="document-metadata.html#elementdef-head" id="ref-for-elementdef-head-34">head</a></code> element, if <a data-link-type="dfn" href="webappapis.html#scripting-is-disabled" id="ref-for-scripting-is-disabled-9">scripting is
    disabled</a> for the <code><a data-link-type="element" href="semantics-scripting.html#elementdef-noscript" id="ref-for-elementdef-noscript-13">noscript</a></code> element
      <dd>The <code><a data-link-type="element" href="semantics-scripting.html#elementdef-noscript" id="ref-for-elementdef-noscript-14">noscript</a></code> element must contain only <code><a data-link-type="element" href="document-metadata.html#elementdef-link" id="ref-for-elementdef-link-60">link</a></code>, <code><a data-link-type="element" href="document-metadata.html#elementdef-style" id="ref-for-elementdef-style-33">style</a></code>,
    and <code><a data-link-type="element" href="document-metadata.html#elementdef-meta" id="ref-for-elementdef-meta-44">meta</a></code> elements.
      <dt>In a <code><a data-link-type="element" href="document-metadata.html#elementdef-head" id="ref-for-elementdef-head-35">head</a></code> element, if <a data-link-type="dfn" href="webappapis.html#scripting-was-enabled" id="ref-for-scripting-was-enabled-3">scripting is enabled</a> for the <code><a data-link-type="element" href="semantics-scripting.html#elementdef-noscript" id="ref-for-elementdef-noscript-15">noscript</a></code> element
      <dd>The <code><a data-link-type="element" href="semantics-scripting.html#elementdef-noscript" id="ref-for-elementdef-noscript-16">noscript</a></code> element must contain only text, except that invoking the <a data-link-type="dfn" href="syntax.html#that-algorithm" id="ref-for-that-algorithm-2">HTML fragment parsing algorithm</a> with
    the <code><a data-link-type="element" href="semantics-scripting.html#elementdef-noscript" id="ref-for-elementdef-noscript-17">noscript</a></code> element as the <var>context</var> element and the text contents as the <var>input</var> must result in a list of nodes
    that consists only of <code><a data-link-type="element" href="document-metadata.html#elementdef-link" id="ref-for-elementdef-link-61">link</a></code>, <code><a data-link-type="element" href="document-metadata.html#elementdef-style" id="ref-for-elementdef-style-34">style</a></code>, and <code><a data-link-type="element" href="document-metadata.html#elementdef-meta" id="ref-for-elementdef-meta-45">meta</a></code> elements that
    would be conforming if they were children of the <code><a data-link-type="element" href="semantics-scripting.html#elementdef-noscript" id="ref-for-elementdef-noscript-18">noscript</a></code> element, and no <a data-link-type="dfn" href="syntax.html#parser-parse-error" id="ref-for-parser-parse-error-12">parse errors</a>.
      <dt>Outside of <code><a data-link-type="element" href="document-metadata.html#elementdef-head" id="ref-for-elementdef-head-36">head</a></code> elements, if <a data-link-type="dfn" href="webappapis.html#scripting-is-disabled" id="ref-for-scripting-is-disabled-10">scripting is
    disabled</a> for the <code><a data-link-type="element" href="semantics-scripting.html#elementdef-noscript" id="ref-for-elementdef-noscript-19">noscript</a></code> element
      <dd>The <code><a data-link-type="element" href="semantics-scripting.html#elementdef-noscript" id="ref-for-elementdef-noscript-20">noscript</a></code> element&#x2019;s content model is <a data-link-type="dfn" href="dom.html#transparent" id="ref-for-transparent-14">transparent</a>, with the
    additional restriction that a <code><a data-link-type="element" href="semantics-scripting.html#elementdef-noscript" id="ref-for-elementdef-noscript-21">noscript</a></code> element must not have a <code>noscript</code> element as an ancestor (that is, <code>noscript</code> can&#x2019;t be nested).
      <dt>Outside of <code><a data-link-type="element" href="document-metadata.html#elementdef-head" id="ref-for-elementdef-head-37">head</a></code> elements, if <a data-link-type="dfn" href="webappapis.html#scripting-was-enabled" id="ref-for-scripting-was-enabled-4">scripting is
    enabled</a> for the <code><a data-link-type="element" href="semantics-scripting.html#elementdef-noscript" id="ref-for-elementdef-noscript-22">noscript</a></code> element
      <dd>
       <p>The <code><a data-link-type="element" href="semantics-scripting.html#elementdef-noscript" id="ref-for-elementdef-noscript-23">noscript</a></code> element must contain only text, except that the text must be such
    that running the following algorithm results in a <a data-link-type="dfn" href="infrastructure.html#conforming-document" id="ref-for-conforming-document-10">conforming document</a> with no <code><a data-link-type="element" href="semantics-scripting.html#elementdef-noscript" id="ref-for-elementdef-noscript-24">noscript</a></code> elements and no <code><a data-link-type="element" href="semantics-scripting.html#elementdef-script" id="ref-for-elementdef-script-85">script</a></code> elements, and such that no step in the
    algorithm throws an exception or causes an <a data-link-type="dfn" href="syntax.html#html-parser" id="ref-for-html-parser-22">HTML parser</a> to flag a <a data-link-type="dfn" href="syntax.html#parser-parse-error" id="ref-for-parser-parse-error-13">parse error</a>:</p>
       <ol>
        <li>Remove every <code><a data-link-type="element" href="semantics-scripting.html#elementdef-script" id="ref-for-elementdef-script-86">script</a></code> element from the document.
        </li><li>
         Make a list of every <code><a data-link-type="element" href="semantics-scripting.html#elementdef-noscript" id="ref-for-elementdef-noscript-25">noscript</a></code> element in the document. For every <code><a data-link-type="element" href="semantics-scripting.html#elementdef-noscript" id="ref-for-elementdef-noscript-26">noscript</a></code> element in that list, perform the following steps: 
         <ol>
          <li>Let <var>s</var> be the concatenation of all the <code>Text</code> node
        children of the <code><a data-link-type="element" href="semantics-scripting.html#elementdef-noscript" id="ref-for-elementdef-noscript-27">noscript</a></code> element.
          </li><li>Set the <code>outerHTML</code> attribute of the <code><a data-link-type="element" href="semantics-scripting.html#elementdef-noscript" id="ref-for-elementdef-noscript-28">noscript</a></code> element to the value of <var>s</var>. (This, as a
        side-effect, causes the <code><a data-link-type="element" href="semantics-scripting.html#elementdef-noscript" id="ref-for-elementdef-noscript-29">noscript</a></code> element to be removed from the document.) <a data-link-type="biblio" href="references.html#biblio-domparsing">[DOMPARSING]</a>
         </li></ol>
       </li></ol>
     </dd></dt></dd></dt></dd></dt></dd></dt></dl>
     <p class="note" role="note"> All these contortions are required because, for historical reasons, the <code><a data-link-type="element" href="semantics-scripting.html#elementdef-noscript" id="ref-for-elementdef-noscript-30">noscript</a></code> element is handled differently by the <a data-link-type="dfn" href="syntax.html#html-parser" id="ref-for-html-parser-23">HTML parser</a> based on
  whether <a data-link-type="dfn" href="syntax.html#scripting-flag" id="ref-for-scripting-flag-2">scripting was enabled or not</a> when the parser was
  invoked. </p>
     <p>The <code><a data-link-type="element" href="semantics-scripting.html#elementdef-noscript" id="ref-for-elementdef-noscript-31">noscript</a></code> element must not be used in <a data-link-type="dfn" href="infrastructure.html#xml-document" id="ref-for-xml-document-14">XML documents</a>.</p>
     <p class="note" role="note"> The <code><a data-link-type="element" href="semantics-scripting.html#elementdef-noscript" id="ref-for-elementdef-noscript-32">noscript</a></code> element is only effective in <a href="syntax.html#syntax">the HTML syntax</a>, it has no effect in <a href="xhtml.html#xhtml">the XHTML syntax</a>. This is because the way it works
  is by essentially &quot;turning off&quot; the parser when scripts are enabled, so that the contents of the
  element are treated as pure text and not as real elements. XML does not define a mechanism by
  which to do this. </p>
     <div class="impl">
      <p>The <code><a data-link-type="element" href="semantics-scripting.html#elementdef-noscript" id="ref-for-elementdef-noscript-33">noscript</a></code> element has no other requirements. In particular, children of the <code><a data-link-type="element" href="semantics-scripting.html#elementdef-noscript" id="ref-for-elementdef-noscript-34">noscript</a></code> element are not exempt from <a href="sec-forms.html#forms-form-submission">&#xA7;4.10.22 Form submission</a>, scripting, and so
  forth, even when <a data-link-type="dfn" href="webappapis.html#scripting-was-enabled" id="ref-for-scripting-was-enabled-5">scripting is enabled</a> for the element.</p>
     </div>
     <div class="example" id="example-ddb6f3ab">
      <a class="self-link" href="semantics-scripting.html#example-ddb6f3ab"></a> In the following example, a <code><a data-link-type="element" href="semantics-scripting.html#elementdef-noscript" id="ref-for-elementdef-noscript-35">noscript</a></code> element is
    used to provide fallback for a script. 
<pre class="highlight"><span></span><span class="p">&lt;</span><span class="nt">form</span> <span class="na">action</span><span class="o">=</span><span class="s">&quot;calcSquare.php&quot;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">label</span> <span class="na">for</span><span class="o">=</span><span class="s">x</span><span class="p">&gt;</span>Number<span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>:
  <span class="p">&lt;</span><span class="nt">input</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;x&quot;</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;x&quot;</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;number&quot;</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
  <span class="kd">var</span> <span class="nx">x</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&apos;x&apos;</span><span class="p">);</span>
  <span class="kd">var</span> <span class="nx">output</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">&apos;p&apos;</span><span class="p">);</span>
  <span class="nx">output</span><span class="p">.</span><span class="nx">textContent</span> <span class="o">=</span> <span class="s1">&apos;Type a number; it will be squared right then!&apos;</span><span class="p">;</span>
  <span class="nx">x</span><span class="p">.</span><span class="nx">form</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">output</span><span class="p">);</span>
  <span class="nx">x</span><span class="p">.</span><span class="nx">form</span><span class="p">.</span><span class="nx">onsubmit</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span> <span class="k">return</span> <span class="kc">false</span><span class="p">;</span> <span class="p">}</span>
  <span class="nx">x</span><span class="p">.</span><span class="nx">oninput</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">v</span> <span class="o">=</span> <span class="nx">x</span><span class="p">.</span><span class="nx">valueAsNumber</span><span class="p">;</span>
    <span class="nx">output</span><span class="p">.</span><span class="nx">textContent</span> <span class="o">=</span> <span class="nx">v</span> <span class="o">+</span> <span class="s1">&apos; squared is &apos;</span> <span class="o">+</span> <span class="nx">v</span> <span class="o">*</span> <span class="nx">v</span><span class="p">;</span>
  <span class="p">};</span>
  <span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">noscript</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">submit</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;Calculate Square&quot;</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">noscript</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">form</span><span class="p">&gt;</span></pre>
      <p>When script is disabled, a button appears to do the calculation on the server side. When
    script is enabled, the value is computed on-the-fly instead.</p>
      <p>The <code><a data-link-type="element" href="semantics-scripting.html#elementdef-noscript" id="ref-for-elementdef-noscript-36">noscript</a></code> element is a blunt instrument. Sometimes, scripts might be enabled,
    but for some reason the page&#x2019;s script might fail. For this reason, it&#x2019;s generally better to avoid
    using <code><a data-link-type="element" href="semantics-scripting.html#elementdef-noscript" id="ref-for-elementdef-noscript-37">noscript</a></code>, and to instead design the script to change the page from being a
    scriptless page to a scripted page on the fly, as in the next example:</p>
<pre class="highlight"><span></span><span class="p">&lt;</span><span class="nt">form</span> <span class="na">action</span><span class="o">=</span><span class="s">&quot;calcSquare.php&quot;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">label</span> <span class="na">for</span><span class="o">=</span><span class="s">x</span><span class="p">&gt;</span>Number<span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>:
  <span class="p">&lt;</span><span class="nt">input</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;x&quot;</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;x&quot;</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;number&quot;</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">input</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;submit&quot;</span> <span class="na">type</span><span class="o">=</span><span class="s">submit</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;Calculate Square&quot;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
  <span class="kd">var</span> <span class="nx">x</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&apos;x&apos;</span><span class="p">);</span>
  <span class="kd">var</span> <span class="nx">output</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">&apos;p&apos;</span><span class="p">);</span>
  <span class="nx">output</span><span class="p">.</span><span class="nx">textContent</span> <span class="o">=</span> <span class="s1">&apos;Type a number; it will be squared right then!&apos;</span><span class="p">;</span>
  <span class="nx">x</span><span class="p">.</span><span class="nx">form</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">output</span><span class="p">);</span>
  <span class="nx">x</span><span class="p">.</span><span class="nx">form</span><span class="p">.</span><span class="nx">onsubmit</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span> <span class="k">return</span> <span class="kc">false</span><span class="p">;</span> <span class="p">}</span>
  <span class="nx">x</span><span class="p">.</span><span class="nx">oninput</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">v</span> <span class="o">=</span> <span class="nx">x</span><span class="p">.</span><span class="nx">valueAsNumber</span><span class="p">;</span>
    <span class="nx">output</span><span class="p">.</span><span class="nx">textContent</span> <span class="o">=</span> <span class="nx">v</span> <span class="o">+</span> <span class="s1">&apos; squared is &apos;</span> <span class="o">+</span> <span class="nx">v</span> <span class="o">*</span> <span class="nx">v</span><span class="p">;</span>
  <span class="p">};</span>
  <span class="kd">var</span> <span class="nx">submit</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&apos;submit&apos;</span><span class="p">);</span>
  <span class="nx">submit</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">.</span><span class="nx">removeChild</span><span class="p">(</span><span class="nx">submit</span><span class="p">);</span>
  <span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">form</span><span class="p">&gt;</span></pre>
      <p>The above technique is also useful in XHTML, since <code>noscript</code> is not supported in <a href="xhtml.html#xhtml">the XHTML syntax</a>.</p>
     </div>
     <h4 class="heading settled" data-level="4.12.3" id="the-template-element"><span class="secno">4.12.3. </span><span class="content">The <dfn class="dfn-paneled" data-dfn-type="element" data-export="" id="elementdef-template"><code>template</code><span class="dfn-panel"><b><a href="semantics-scripting.html#elementdef-template">#elementdef-template</a></b><b>Referenced in:</b><span><a href="dom.html#ref-for-elementdef-template-1">3.2.4. Content models</a></span><span><a href="dom.html#ref-for-elementdef-template-2">3.2.4.2.1. Metadata content</a></span><span><a href="dom.html#ref-for-elementdef-template-3">3.2.4.2.2. Flow content</a></span><span><a href="dom.html#ref-for-elementdef-template-4">3.2.4.2.5. Phrasing content</a></span><span><a href="dom.html#ref-for-elementdef-template-5">3.2.4.2.9. Script-supporting elements</a></span><span><a href="sections.html#ref-for-elementdef-template-6">4.3.1. The body element</a></span><span><a href="semantics-embedded-content.html#ref-for-elementdef-template-7">4.7.16. The area element</a> <a href="semantics-embedded-content.html#ref-for-elementdef-template-8">(2)</a></span><span><a href="tabular-data.html#ref-for-elementdef-template-9">4.9.3. The colgroup element</a></span><span><a href="semantics-scripting.html#ref-for-elementdef-template-10">4.12.3. The template element</a> <a href="semantics-scripting.html#ref-for-elementdef-template-11">(2)</a> <a href="semantics-scripting.html#ref-for-elementdef-template-12">(3)</a> <a href="semantics-scripting.html#ref-for-elementdef-template-13">(4)</a> <a href="semantics-scripting.html#ref-for-elementdef-template-14">(5)</a> <a href="semantics-scripting.html#ref-for-elementdef-template-15">(6)</a> <a href="semantics-scripting.html#ref-for-elementdef-template-16">(7)</a> <a href="semantics-scripting.html#ref-for-elementdef-template-17">(8)</a> <a href="semantics-scripting.html#ref-for-elementdef-template-18">(9)</a> <a href="semantics-scripting.html#ref-for-elementdef-template-19">(10)</a> <a href="semantics-scripting.html#ref-for-elementdef-template-20">(11)</a> <a href="semantics-scripting.html#ref-for-elementdef-template-21">(12)</a> <a href="semantics-scripting.html#ref-for-elementdef-template-22">(13)</a></span><span><a href="semantics-scripting.html#ref-for-elementdef-template-23">4.12.3.1. Interaction of template elements with XSLT and XPath</a> <a href="semantics-scripting.html#ref-for-elementdef-template-24">(2)</a> <a href="semantics-scripting.html#ref-for-elementdef-template-25">(3)</a></span><span><a href="syntax.html#ref-for-elementdef-template-26">8.1.2.4. Optional tags</a></span><span><a href="syntax.html#ref-for-elementdef-template-27">8.2.3.1. The insertion mode</a> <a href="syntax.html#ref-for-elementdef-template-28">(2)</a></span><span><a href="syntax.html#ref-for-elementdef-template-29">8.2.3.2. The stack of open elements</a> <a href="syntax.html#ref-for-elementdef-template-30">(2)</a> <a href="syntax.html#ref-for-elementdef-template-31">(3)</a></span><span><a href="syntax.html#ref-for-elementdef-template-32">8.2.3.4. The element pointers</a></span><span><a href="syntax.html#ref-for-elementdef-template-33">8.2.5.1. Creating and inserting nodes</a> <a href="syntax.html#ref-for-elementdef-template-34">(2)</a></span><span><a href="syntax.html#ref-for-elementdef-template-35">8.2.5.4.4. The &quot;in head&quot; insertion mode</a> <a href="syntax.html#ref-for-elementdef-template-36">(2)</a></span><span><a href="syntax.html#ref-for-elementdef-template-37">8.2.5.4.7. The &quot;in body&quot; insertion mode</a> <a href="syntax.html#ref-for-elementdef-template-38">(2)</a> <a href="syntax.html#ref-for-elementdef-template-39">(3)</a> <a href="syntax.html#ref-for-elementdef-template-40">(4)</a> <a href="syntax.html#ref-for-elementdef-template-41">(5)</a> <a href="syntax.html#ref-for-elementdef-template-42">(6)</a> <a href="syntax.html#ref-for-elementdef-template-43">(7)</a></span><span><a href="syntax.html#ref-for-elementdef-template-44">8.2.5.4.9. The &quot;in table&quot; insertion mode</a> <a href="syntax.html#ref-for-elementdef-template-45">(2)</a></span><span><a href="syntax.html#ref-for-elementdef-template-46">8.2.5.4.13. The &quot;in table body&quot; insertion mode</a></span><span><a href="syntax.html#ref-for-elementdef-template-47">8.2.5.4.14. The &quot;in row&quot; insertion mode</a></span><span><a href="syntax.html#ref-for-elementdef-template-48">8.2.5.4.18. The &quot;in template&quot; insertion mode</a></span><span><a href="syntax.html#ref-for-elementdef-template-49">8.2.7. Coercing an HTML DOM into an infoset</a></span><span><a href="syntax.html#ref-for-elementdef-template-50">8.3. Serializing HTML fragments</a> <a href="syntax.html#ref-for-elementdef-template-51">(2)</a></span><span><a href="syntax.html#ref-for-elementdef-template-52">8.4. Parsing HTML fragments</a></span><span><a href="xhtml.html#ref-for-elementdef-template-53">9.2. Parsing XHTML documents</a> <a href="xhtml.html#ref-for-elementdef-template-54">(2)</a></span><span><a href="xhtml.html#ref-for-elementdef-template-55">9.3. Serializing XHTML fragments</a></span><span><a href="fullindex.html#ref-for-elementdef-template-56">Elements</a> <a href="fullindex.html#ref-for-elementdef-template-57">(2)</a> <a href="fullindex.html#ref-for-elementdef-template-58">(3)</a> <a href="fullindex.html#ref-for-elementdef-template-59">(4)</a> <a href="fullindex.html#ref-for-elementdef-template-60">(5)</a> <a href="fullindex.html#ref-for-elementdef-template-61">(6)</a> <a href="fullindex.html#ref-for-elementdef-template-62">(7)</a> <a href="fullindex.html#ref-for-elementdef-template-63">(8)</a> <a href="fullindex.html#ref-for-elementdef-template-64">(9)</a> <a href="fullindex.html#ref-for-elementdef-template-65">(10)</a> <a href="fullindex.html#ref-for-elementdef-template-66">(11)</a> <a href="fullindex.html#ref-for-elementdef-template-67">(12)</a> <a href="fullindex.html#ref-for-elementdef-template-68">(13)</a> <a href="fullindex.html#ref-for-elementdef-template-69">(14)</a> <a href="fullindex.html#ref-for-elementdef-template-70">(15)</a> <a href="fullindex.html#ref-for-elementdef-template-71">(16)</a> <a href="fullindex.html#ref-for-elementdef-template-72">(17)</a> <a href="fullindex.html#ref-for-elementdef-template-73">(18)</a> <a href="fullindex.html#ref-for-elementdef-template-74">(19)</a> <a href="fullindex.html#ref-for-elementdef-template-75">(20)</a> <a href="fullindex.html#ref-for-elementdef-template-76">(21)</a> <a href="fullindex.html#ref-for-elementdef-template-77">(22)</a> <a href="fullindex.html#ref-for-elementdef-template-78">(23)</a> <a href="fullindex.html#ref-for-elementdef-template-79">(24)</a> <a href="fullindex.html#ref-for-elementdef-template-80">(25)</a> <a href="fullindex.html#ref-for-elementdef-template-81">(26)</a> <a href="fullindex.html#ref-for-elementdef-template-82">(27)</a> <a href="fullindex.html#ref-for-elementdef-template-83">(28)</a> <a href="fullindex.html#ref-for-elementdef-template-84">(29)</a> <a href="fullindex.html#ref-for-elementdef-template-85">(30)</a> <a href="fullindex.html#ref-for-elementdef-template-86">(31)</a></span><span><a href="fullindex.html#ref-for-elementdef-template-87">Element content categories</a> <a href="fullindex.html#ref-for-elementdef-template-88">(2)</a> <a href="fullindex.html#ref-for-elementdef-template-89">(3)</a> <a href="fullindex.html#ref-for-elementdef-template-90">(4)</a></span><span><a href="fullindex.html#ref-for-elementdef-template-91">Element Interfaces</a></span></span></dfn> element</span><a class="self-link" href="semantics-scripting.html#the-template-element"></a></h4>
     <dl class="element">
      <dt><a data-link-type="dfn" href="dom.html#categories" id="ref-for-categories-109">Categories</a>:
      <dd><a data-link-type="dfn" href="dom.html#metadata-content" id="ref-for-metadata-content-15">Metadata content</a>.
      <dd><a data-link-type="dfn" href="dom.html#flow-content" id="ref-for-flow-content-147">Flow content</a>.
      <dd><a data-link-type="dfn" href="dom.html#phrasing-content" id="ref-for-phrasing-content-156">Phrasing content</a>.
      <dd><a data-link-type="dfn" href="dom.html#script-supporting-element" id="ref-for-script-supporting-element-17">Script-supporting element</a>.
      <dt><a data-link-type="dfn" href="dom.html#contexts-in-which-this-element-can-be-used" id="ref-for-contexts-in-which-this-element-can-be-used-108">Contexts in which this element can be used</a>:
      <dd>Where <a data-link-type="dfn" href="dom.html#metadata-content" id="ref-for-metadata-content-16">metadata content</a> is expected.
      <dd>Where <a data-link-type="dfn" href="dom.html#phrasing-content" id="ref-for-phrasing-content-157">phrasing content</a> is expected.
      <dd>Where <a data-link-type="dfn" href="dom.html#script-supporting-element" id="ref-for-script-supporting-element-18">script-supporting elements</a> are expected.
      <dd>As a child of a <code><a data-link-type="element" href="tabular-data.html#elementdef-colgroup" id="ref-for-elementdef-colgroup-30">colgroup</a></code> element that doesn&#x2019;t have a <code>span</code> attribute.
      <dt><a data-link-type="dfn" href="dom.html#content-model" id="ref-for-content-model-109">Content model</a>:
      <dd>Either: <a data-link-type="dfn" href="dom.html#metadata-content" id="ref-for-metadata-content-17">Metadata content</a>.
      <dd>Or: <a data-link-type="dfn" href="dom.html#flow-content" id="ref-for-flow-content-148">Flow content</a>.
      <dd>Or: The content model of <code>ol</code> and <code><a data-link-type="element" href="grouping-content.html#elementdef-ul" id="ref-for-elementdef-ul-13">ul</a></code> elements.
      <dd>Or: The content model of <code><a data-link-type="element" href="grouping-content.html#elementdef-dl" id="ref-for-elementdef-dl-22">dl</a></code> elements.
      <dd>Or: The content model of <code><a data-link-type="element" href="grouping-content.html#elementdef-figure" id="ref-for-elementdef-figure-26">figure</a></code> elements.
      <dd>Or: The content model of <code><a data-link-type="element" href="textlevel-semantics.html#elementdef-ruby" id="ref-for-elementdef-ruby-29">ruby</a></code> elements.
      <dd>Or: The content model of <code><a data-link-type="element" href="semantics-embedded-content.html#elementdef-object" id="ref-for-elementdef-object-79">object</a></code> elements.
      <dd>Or: The content model of <code>video</code> and <code><a data-link-type="element" href="semantics-embedded-content.html#elementdef-audio" id="ref-for-elementdef-audio-23">audio</a></code> elements.
      <dd>Or: The content model of <code><a data-link-type="element" href="tabular-data.html#elementdef-table" id="ref-for-elementdef-table-95">table</a></code> elements.
      <dd>Or: The content model of <code><a data-link-type="element" href="tabular-data.html#elementdef-colgroup" id="ref-for-elementdef-colgroup-31">colgroup</a></code> elements.
      <dd>Or: The content model of <code><a data-link-type="element" href="tabular-data.html#elementdef-thead" id="ref-for-elementdef-thead-42">thead</a></code>, <code><a data-link-type="element" href="tabular-data.html#elementdef-tbody" id="ref-for-elementdef-tbody-42">tbody</a></code>, and <code><a data-link-type="element" href="tabular-data.html#elementdef-tfoot" id="ref-for-elementdef-tfoot-43">tfoot</a></code> elements.
      <dd>Or: The content model of <code><a data-link-type="element" href="tabular-data.html#elementdef-tr" id="ref-for-elementdef-tr-76">tr</a></code> elements.
      <dd>Or: The content model of <code><a data-link-type="element" href="sec-forms.html#elementdef-fieldset" id="ref-for-elementdef-fieldset-31">fieldset</a></code> elements.
      <dd>Or: The content model of <code><a data-link-type="element" href="sec-forms.html#elementdef-select" id="ref-for-elementdef-select-89">select</a></code> elements.
      <dd>Or: The content model of <code><a data-link-type="element" href="interactive-elements.html#elementdef-details" id="ref-for-elementdef-details-17">details</a></code> elements.
      <dd>Or: The content model of <code><a data-link-type="element" href="interactive-elements.html#elementdef-menu" id="ref-for-elementdef-menu-34">menu</a></code> elements whose <code>type</code> attribute is in the <a data-link-type="state" href="interactive-elements.html#statedef-menu-popup-menu" id="ref-for-statedef-menu-popup-menu-14">popup menu</a> state.
      <dt><a data-link-type="dfn" href="dom.html#tag-omission-in-text-html" id="ref-for-tag-omission-in-text-html-108">Tag omission in text/html</a>:
      <dd>Neither tag is omissible
      <dt><a data-link-type="dfn" href="dom.html#content-attribute" id="ref-for-content-attribute-110">Content attributes</a>:
      <dd><a data-link-type="dfn" href="dom.html#global-attributes" id="ref-for-global-attributes-109">Global attributes</a>
      <dt>Allowed <a href="dom.html#aria-role-attribute">ARIA role attribute</a> values:
      <dd>None
      <dt>Allowed <a href="dom.html#state-and-property-attributes">ARIA state and property attributes</a>:
      <dd><a data-link-type="dfn" href="dom.html#global-aria--attributes" id="ref-for-global-aria--attributes-131">Global aria-* attributes</a>
      <dt><a data-link-type="dfn" href="dom.html#dom-interface" id="ref-for-dom-interface-108">DOM interface</a>:
      <dd>
<pre class="idl def" data-highlight="webidl">interface <dfn class="dfn-paneled idl-code" data-dfn-for="HTMLTemplateElement" data-dfn-type="interface" data-export="" id="htmltemplateelement-htmltemplateelement">HTMLTemplateElement<span class="dfn-panel"><b><a href="semantics-scripting.html#htmltemplateelement-htmltemplateelement">#htmltemplateelement-htmltemplateelement</a></b><b>Referenced in:</b><span><a href="fullindex.html#ref-for-htmltemplateelement-htmltemplateelement-1">Elements</a></span><span><a href="fullindex.html#ref-for-htmltemplateelement-htmltemplateelement-2">Element Interfaces</a></span></span></dfn> : <a data-link-type="idl-name" href="dom.html#htmlelement-htmlelement" id="ref-for-htmlelement-htmlelement-79">HTMLElement</a> {
  readonly attribute <a data-link-type="idl-name" href="https://dom.spec.whatwg.org/#documentfragment">DocumentFragment</a> <dfn class="idl-code" data-dfn-for="HTMLTemplateElement" data-dfn-type="attribute" data-export="" data-readonly="" data-type="DocumentFragment " id="dom-htmltemplateelement-content">content<a class="self-link" href="semantics-scripting.html#dom-htmltemplateelement-content"></a></dfn>;
};
</pre>
     </dd></dt></dd></dt></dd></dt></dd></dt></dd></dt></dd></dd></dd></dd></dd></dd></dd></dd></dd></dd></dd></dd></dd></dd></dd></dd></dt></dd></dd></dd></dd></dt></dd></dd></dd></dd></dt></dl>
     <p>The <code><a data-link-type="element" href="semantics-scripting.html#elementdef-template" id="ref-for-elementdef-template-10">template</a></code> element is used to declare fragments of HTML that can be cloned and
  inserted in the document by script.</p>
     <p class="note" role="note"> Templates provide a method for declaring inert DOM subtrees and manipulating them to
  instantiate document fragments with identical contents. </p>
     <p class="note" role="note"> When web pages dynamically alter the contents of their documents (e.g., in response to user
  interaction or new data arriving from the server), it is common that they require fragments of
  HTML which may require further modification before use, such as the insertion of values
  appropriate for the usage context. </p>
     <p class="note" role="note"> The <code><a data-link-type="element" href="semantics-scripting.html#elementdef-template" id="ref-for-elementdef-template-11">template</a></code> element allows for the declaration of document fragments which are
  unused by the document when loaded, but are parsed as HTML and are available at runtime for use by
  the web page. </p>
     <p>In a rendering, the <code><a data-link-type="element" href="semantics-scripting.html#elementdef-template" id="ref-for-elementdef-template-12">template</a></code> element <a data-link-type="dfn" href="dom.html#represent" id="ref-for-represent-175">represents</a> nothing.</p>
     <dl class="domintro">
      <dt><var>template</var> . <code>content</code>
      <dd>
       <p>Returns the contents of the <code><a data-link-type="element" href="semantics-scripting.html#elementdef-template" id="ref-for-elementdef-template-13">template</a></code>, which are stored in a <code>DocumentFragment</code> associated with a different <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document">Document</a></code> so as to avoid
    the <code><a data-link-type="element" href="semantics-scripting.html#elementdef-template" id="ref-for-elementdef-template-14">template</a></code> contents interfering with the main <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document">Document</a></code>. (For
    example, this avoids form controls from being submitted, scripts from executing, and so
    forth.)</p>
     </dd></dt></dl>
     <div class="impl">
      <p>Each <code><a data-link-type="element" href="semantics-scripting.html#elementdef-template" id="ref-for-elementdef-template-15">template</a></code> element has an associated <code>DocumentFragment</code> object that
  is its <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="template-contents">template contents<span class="dfn-panel"><b><a href="semantics-scripting.html#template-contents">#template-contents</a></b><b>Referenced in:</b><span><a href="dom.html#ref-for-template-contents-1">3.2.4. Content models</a></span><span><a href="semantics-scripting.html#ref-for-template-contents-2">4.12.3. The template element</a> <a href="semantics-scripting.html#ref-for-template-contents-3">(2)</a> <a href="semantics-scripting.html#ref-for-template-contents-4">(3)</a> <a href="semantics-scripting.html#ref-for-template-contents-5">(4)</a> <a href="semantics-scripting.html#ref-for-template-contents-6">(5)</a> <a href="semantics-scripting.html#ref-for-template-contents-7">(6)</a> <a href="semantics-scripting.html#ref-for-template-contents-8">(7)</a> <a href="semantics-scripting.html#ref-for-template-contents-9">(8)</a></span><span><a href="semantics-scripting.html#ref-for-template-contents-10">4.12.3.1. Interaction of template elements with XSLT and XPath</a> <a href="semantics-scripting.html#ref-for-template-contents-11">(2)</a> <a href="semantics-scripting.html#ref-for-template-contents-12">(3)</a></span><span><a href="syntax.html#ref-for-template-contents-13">8.2.5.1. Creating and inserting nodes</a> <a href="syntax.html#ref-for-template-contents-14">(2)</a></span><span><a href="syntax.html#ref-for-template-contents-15">8.2.7. Coercing an HTML DOM into an infoset</a></span><span><a href="syntax.html#ref-for-template-contents-16">8.3. Serializing HTML fragments</a></span><span><a href="xhtml.html#ref-for-template-contents-17">9.2. Parsing XHTML documents</a></span><span><a href="xhtml.html#ref-for-template-contents-18">9.3. Serializing XHTML fragments</a></span></span></dfn>. When a <code><a data-link-type="element" href="semantics-scripting.html#elementdef-template" id="ref-for-elementdef-template-16">template</a></code> element is created, the user
  agent must run the following steps to establish the <a data-link-type="dfn" href="semantics-scripting.html#template-contents" id="ref-for-template-contents-2">template contents</a>:</p>
      <ol>
       <li>Let <var>doc</var> be the <code><a data-link-type="element" href="semantics-scripting.html#elementdef-template" id="ref-for-elementdef-template-17">template</a></code> element&#x2019;s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-node-document">node document</a>&#x2019;s <a data-link-type="dfn" href="semantics-scripting.html#appropriate-template-contents-owner-document" id="ref-for-appropriate-template-contents-owner-document-1">appropriate template contents owner
    document</a>.
       </li><li>Create a <code>DocumentFragment</code> object whose <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-node-document">node document</a> is <var>doc</var>.
       </li><li>Set the <code><a data-link-type="element" href="semantics-scripting.html#elementdef-template" id="ref-for-elementdef-template-18">template</a></code> element&#x2019;s <a data-link-type="dfn" href="semantics-scripting.html#template-contents" id="ref-for-template-contents-3">template contents</a> to the newly
    created <code>DocumentFragment</code> object.
      </li></ol>
      <p>A <code>Document</code> <var>doc</var>&#x2019;s <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="appropriate-template-contents-owner-document">appropriate template contents owner
  document<span class="dfn-panel"><b><a href="semantics-scripting.html#appropriate-template-contents-owner-document">#appropriate-template-contents-owner-document</a></b><b>Referenced in:</b><span><a href="semantics-scripting.html#ref-for-appropriate-template-contents-owner-document-1">4.12.3. The template element</a> <a href="semantics-scripting.html#ref-for-appropriate-template-contents-owner-document-2">(2)</a></span></span></dfn> is the <code>Document</code> returned by the following algorithm:</p>
      <ol>
       <li>
        <p>If <var>doc</var> is not a <code>Document</code> created by this algorithm, run
    these substeps:</p>
        <ol>
         <li>
          <p>If <var>doc</var> does not yet have an <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="associated-inert-template-document">associated inert template
      document<span class="dfn-panel"><b><a href="semantics-scripting.html#associated-inert-template-document">#associated-inert-template-document</a></b><b>Referenced in:</b><span><a href="semantics-scripting.html#ref-for-associated-inert-template-document-1">4.12.3. The template element</a> <a href="semantics-scripting.html#ref-for-associated-inert-template-document-2">(2)</a></span></span></dfn> then run these substeps:</p>
          <ol>
           <li>Let <var>new doc</var> be a new <code>Document</code> (that does not have a <a data-link-type="dfn" href="browsers.html#browsing-context" id="ref-for-browsing-context-86">browsing context</a>). This is &quot;a <code>Document</code> created by this algorithm&quot;
        for the purposes of the step above.
           </li><li>If <var>doc</var> is an <a data-link-type="dfn" href="infrastructure.html#html-document" id="ref-for-html-document-19">HTML document</a>, mark <var>new doc</var> as an <a data-link-type="dfn" href="infrastructure.html#html-document" id="ref-for-html-document-20">HTML document</a> also.
           </li><li>Let <var>doc</var>&#x2019;s <a data-link-type="dfn" href="semantics-scripting.html#associated-inert-template-document" id="ref-for-associated-inert-template-document-1">associated inert template document</a> be <var>new doc</var>.
          </li></ol>
         </li><li>Set <var>doc</var> to <var>doc</var>&#x2019;s <a data-link-type="dfn" href="semantics-scripting.html#associated-inert-template-document" id="ref-for-associated-inert-template-document-2">associated inert
      template document</a>.
        </li></ol>
        <p class="note" role="note"> Each <code>Document</code> not created by this algorithm thus gets a single <code>Document</code> to act as its proxy for owning the <a data-link-type="dfn" href="semantics-scripting.html#template-contents" id="ref-for-template-contents-4">template contents</a> of all
    its <code><a data-link-type="element" href="semantics-scripting.html#elementdef-template" id="ref-for-elementdef-template-19">template</a></code> elements, so that they aren&#x2019;t in a <a data-link-type="dfn" href="browsers.html#browsing-context" id="ref-for-browsing-context-87">browsing context</a> and
    thus remain inert (e.g., scripts do not run). Meanwhile, <code><a data-link-type="element" href="semantics-scripting.html#elementdef-template" id="ref-for-elementdef-template-20">template</a></code> elements inside <code>Document</code> objects that <em>are</em> created by this algorithm just reuse the same <code>Document</code> owner for their contents. </p>
       </li><li>Return <var>doc</var>.
      </li></ol>
      <p>The <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-node-adopt-ext">adopting steps</a> (with <var>node</var> and <var>oldDocument</var> as parameters) for <code><a data-link-type="element" href="semantics-scripting.html#elementdef-template" id="ref-for-elementdef-template-21">template</a></code> elements
  are the following:</p>
      <ol>
       <li>
        <p>Let <var>doc</var> be <var>node</var>&#x2019;s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-node-document">node document</a>&#x2019;s <a data-link-type="dfn" href="semantics-scripting.html#appropriate-template-contents-owner-document" id="ref-for-appropriate-template-contents-owner-document-2">appropriate template contents owner document</a>.</p>
        <p class="note" role="note"><var>node</var>&#x2019;s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-node-document">node document</a> is the <code>Document</code> object
    that <var>node</var> was just adopted <em>into</em>.</p>
       </li><li><a data-link-type="dfn" href="http://www.w3.org/TR/dom/#concept-node-adopt">Adopt</a> <var>node</var>&#x2019;s <a data-link-type="dfn" href="semantics-scripting.html#template-contents" id="ref-for-template-contents-5">template contents</a> (a <code>DocumentFragment</code> object) into <var>doc</var>.
      </li></ol>
      <p>The <dfn data-dfn-type="dfn" data-noexport="" id="content"><code>content</code><a class="self-link" href="semantics-scripting.html#content"></a></dfn> IDL attribute must return the <code><a data-link-type="element" href="semantics-scripting.html#elementdef-template" id="ref-for-elementdef-template-22">template</a></code> element&#x2019;s <a data-link-type="dfn" href="semantics-scripting.html#template-contents" id="ref-for-template-contents-6">template contents</a>.</p>
      <hr>
      <p>The <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-node-clone-ext">cloning steps</a> for a <code>template</code> element <var>node</var> being cloned to a copy <var>copy</var> must run the
  following steps:</p>
      <ol>
       <li>If the <var>clone children flag</var> is not set in the calling <a data-link-type="dfn" href="http://www.w3.org/TR/dom/#concept-node-clone">clone</a> algorithm, abort these steps.
       </li><li>Let <var>copied contents</var> be the result of <a data-link-type="dfn" href="http://www.w3.org/TR/dom/#concept-node-clone">cloning</a> all the children of <var>node</var>&#x2019;s <a data-link-type="dfn" href="semantics-scripting.html#template-contents" id="ref-for-template-contents-7">template contents</a>, with <var>document</var> set to <var>copy</var>&#x2019;s <a data-link-type="dfn" href="semantics-scripting.html#template-contents" id="ref-for-template-contents-8">template contents</a>&#x2019;s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-node-document">node
    document</a>, and with the <var>clone children
    flag</var> set.
       </li><li>Append <var>copied contents</var> to <var>copy</var>&#x2019;s <a data-link-type="dfn" href="semantics-scripting.html#template-contents" id="ref-for-template-contents-9">template
    contents</a>.
      </li></ol>
     </div>
     <div class="example" id="example-4cc708e6">
      <a class="self-link" href="semantics-scripting.html#example-4cc708e6"></a> In this example, a script populates a table four-column with data from a data structure, using
    a <code>template</code> to provide the element structure instead of manually generating the
    structure from markup. 
<pre class="highlight"><span></span><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>Cat data<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
  <span class="c1">// Data is hard-coded here, but could come from the server</span>
  <span class="kd">var</span> <span class="nx">data</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span> <span class="nx">name</span><span class="o">:</span> <span class="s1">&apos;Pillar&apos;</span><span class="p">,</span> <span class="nx">color</span><span class="o">:</span> <span class="s1">&apos;Ticked Tabby&apos;</span><span class="p">,</span> <span class="nx">sex</span><span class="o">:</span> <span class="s1">&apos;Female (neutered)&apos;</span><span class="p">,</span> <span class="nx">legs</span><span class="o">:</span> <span class="mi">3</span> <span class="p">},</span>
    <span class="p">{</span> <span class="nx">name</span><span class="o">:</span> <span class="s1">&apos;Hedral&apos;</span><span class="p">,</span> <span class="nx">color</span><span class="o">:</span> <span class="s1">&apos;Tuxedo&apos;</span><span class="p">,</span> <span class="nx">sex</span><span class="o">:</span> <span class="s1">&apos;Male (neutered)&apos;</span><span class="p">,</span> <span class="nx">legs</span><span class="o">:</span> <span class="mi">4</span> <span class="p">},</span>
  <span class="p">];</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">table</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">thead</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">tr</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>Name <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>Color <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>Sex <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>Legs
  <span class="p">&lt;</span><span class="nt">tbody</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">template</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;row&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">tr</span><span class="p">&gt;&lt;</span><span class="nt">td</span><span class="p">&gt;&lt;</span><span class="nt">td</span><span class="p">&gt;&lt;</span><span class="nt">td</span><span class="p">&gt;&lt;</span><span class="nt">td</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">template</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">table</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
  <span class="kd">var</span> <span class="nx">template</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s1">&apos;#row&apos;</span><span class="p">);</span>
  <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">data</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">cat</span> <span class="o">=</span> <span class="nx">data</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
    <span class="kd">var</span> <span class="nx">clone</span> <span class="o">=</span> <span class="nx">template</span><span class="p">.</span><span class="nx">content</span><span class="p">.</span><span class="nx">cloneNode</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
    <span class="kd">var</span> <span class="nx">cells</span> <span class="o">=</span> <span class="nx">clone</span><span class="p">.</span><span class="nx">querySelectorAll</span><span class="p">(</span><span class="s1">&apos;td&apos;</span><span class="p">);</span>
    <span class="nx">cells</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">textContent</span> <span class="o">=</span> <span class="nx">cat</span><span class="p">.</span><span class="nx">name</span><span class="p">;</span>
    <span class="nx">cells</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="nx">textContent</span> <span class="o">=</span> <span class="nx">cat</span><span class="p">.</span><span class="nx">color</span><span class="p">;</span>
    <span class="nx">cells</span><span class="p">[</span><span class="mi">2</span><span class="p">].</span><span class="nx">textContent</span> <span class="o">=</span> <span class="nx">cat</span><span class="p">.</span><span class="nx">sex</span><span class="p">;</span>
    <span class="nx">cells</span><span class="p">[</span><span class="mi">3</span><span class="p">].</span><span class="nx">textContent</span> <span class="o">=</span> <span class="nx">cat</span><span class="p">.</span><span class="nx">legs</span><span class="p">;</span>
    <span class="nx">template</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">clone</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span></pre>
      <p>This example uses <code>cloneNode()</code> on the <code>template</code>&#x2019;s contents; it could
    equivalently have used <code>document.importNode()</code>, which does the same thing. The only
    difference between these two APIs is when the <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-node-document">node document</a> is updated: with <code>cloneNode()</code> it is updated when the nodes are appended with <code>appendChild()</code>, with <code>document.importNode()</code> it is updated when the nodes
    are cloned.</p>
     </div>
     <div class="impl">
      <h5 class="heading settled" data-level="4.12.3.1" id="interaction-of-template-elements-with-xslt-and-xpath"><span class="secno">4.12.3.1. </span><span class="content">Interaction of <code><a data-link-type="element" href="semantics-scripting.html#elementdef-template" id="ref-for-elementdef-template-23">template</a></code> elements with XSLT and XPath</span><a class="self-link" href="semantics-scripting.html#interaction-of-template-elements-with-xslt-and-xpath"></a></h5>
      <p><em>This section is non-normative.</em></p>
      <p>This specification does not define how XSLT and XPath interact with the <code>template</code> element. However, in the absence of another specification actually defining this, here are some
  guidelines for implementors, which are intended to be consistent with other processing described
  in this specification:</p>
      <ul>
       <li>An XSLT processor based on an XML parser that acts as described
    in this specification needs to act as if <code><a data-link-type="element" href="semantics-scripting.html#elementdef-template" id="ref-for-elementdef-template-24">template</a></code> elements contain as
    descendants their <a data-link-type="dfn" href="semantics-scripting.html#template-contents" id="ref-for-template-contents-10">template contents</a> for the purposes of the transform.
       </li><li>An XSLT processor that outputs a DOM needs to ensure that nodes that would go into a <code><a data-link-type="element" href="semantics-scripting.html#elementdef-template" id="ref-for-elementdef-template-25">template</a></code> element are instead placed into the element&#x2019;s <a data-link-type="dfn" href="semantics-scripting.html#template-contents" id="ref-for-template-contents-11">template
    contents</a>.
       </li><li>XPath evaluation using the XPath DOM API when applied to a <code>Document</code> parsed
    using the <a data-link-type="dfn" href="syntax.html#html-parser" id="ref-for-html-parser-24">HTML parser</a> or the <a data-link-type="dfn" href="xhtml.html#xml-parser" id="ref-for-xml-parser-18">XML parser</a> described in this specification
    needs to ignore <a data-link-type="dfn" href="semantics-scripting.html#template-contents" id="ref-for-template-contents-12">template contents</a>. 
      </li></ul>
     </div>
     <h4 class="heading settled" data-level="4.12.4" id="the-canvas-element"><span class="secno">4.12.4. </span><span class="content">The <dfn class="dfn-paneled" data-dfn-type="element" data-export="" id="elementdef-canvas"><code>canvas</code><span class="dfn-panel"><b><a href="semantics-scripting.html#elementdef-canvas">#elementdef-canvas</a></b><b>Referenced in:</b><span><a href="dom.html#ref-for-elementdef-canvas-1">3.2.4.2.2. Flow content</a></span><span><a href="dom.html#ref-for-elementdef-canvas-2">3.2.4.2.5. Phrasing content</a></span><span><a href="dom.html#ref-for-elementdef-canvas-3">3.2.4.2.6. Embedded content</a></span><span><a href="dom.html#ref-for-elementdef-canvas-4">3.2.4.2.8. Palpable content</a> <a href="dom.html#ref-for-elementdef-canvas-5">(2)</a></span><span><a href="dom.html#ref-for-elementdef-canvas-6">3.2.4.4. Paragraphs</a></span><span><a href="semantics-embedded-content.html#ref-for-elementdef-canvas-7">4.7.5. The img element</a></span><span><a href="semantics-embedded-content.html#ref-for-elementdef-canvas-8">4.7.14.7. Ready states</a></span><span><a href="semantics-scripting.html#ref-for-elementdef-canvas-9">4.12.4. The canvas element</a> <a href="semantics-scripting.html#ref-for-elementdef-canvas-10">(2)</a> <a href="semantics-scripting.html#ref-for-elementdef-canvas-11">(3)</a> <a href="semantics-scripting.html#ref-for-elementdef-canvas-12">(4)</a> <a href="semantics-scripting.html#ref-for-elementdef-canvas-13">(5)</a> <a href="semantics-scripting.html#ref-for-elementdef-canvas-14">(6)</a> <a href="semantics-scripting.html#ref-for-elementdef-canvas-15">(7)</a> <a href="semantics-scripting.html#ref-for-elementdef-canvas-16">(8)</a> <a href="semantics-scripting.html#ref-for-elementdef-canvas-17">(9)</a> <a href="semantics-scripting.html#ref-for-elementdef-canvas-18">(10)</a> <a href="semantics-scripting.html#ref-for-elementdef-canvas-19">(11)</a> <a href="semantics-scripting.html#ref-for-elementdef-canvas-20">(12)</a> <a href="semantics-scripting.html#ref-for-elementdef-canvas-21">(13)</a> <a href="semantics-scripting.html#ref-for-elementdef-canvas-22">(14)</a> <a href="semantics-scripting.html#ref-for-elementdef-canvas-23">(15)</a> <a href="semantics-scripting.html#ref-for-elementdef-canvas-24">(16)</a> <a href="semantics-scripting.html#ref-for-elementdef-canvas-25">(17)</a> <a href="semantics-scripting.html#ref-for-elementdef-canvas-26">(18)</a> <a href="semantics-scripting.html#ref-for-elementdef-canvas-27">(19)</a> <a href="semantics-scripting.html#ref-for-elementdef-canvas-28">(20)</a> <a href="semantics-scripting.html#ref-for-elementdef-canvas-29">(21)</a> <a href="semantics-scripting.html#ref-for-elementdef-canvas-30">(22)</a> <a href="semantics-scripting.html#ref-for-elementdef-canvas-31">(23)</a> <a href="semantics-scripting.html#ref-for-elementdef-canvas-32">(24)</a> <a href="semantics-scripting.html#ref-for-elementdef-canvas-33">(25)</a> <a href="semantics-scripting.html#ref-for-elementdef-canvas-34">(26)</a> <a href="semantics-scripting.html#ref-for-elementdef-canvas-35">(27)</a> <a href="semantics-scripting.html#ref-for-elementdef-canvas-36">(28)</a> <a href="semantics-scripting.html#ref-for-elementdef-canvas-37">(29)</a> <a href="semantics-scripting.html#ref-for-elementdef-canvas-38">(30)</a> <a href="semantics-scripting.html#ref-for-elementdef-canvas-39">(31)</a> <a href="semantics-scripting.html#ref-for-elementdef-canvas-40">(32)</a> <a href="semantics-scripting.html#ref-for-elementdef-canvas-41">(33)</a> <a href="semantics-scripting.html#ref-for-elementdef-canvas-42">(34)</a> <a href="semantics-scripting.html#ref-for-elementdef-canvas-43">(35)</a> <a href="semantics-scripting.html#ref-for-elementdef-canvas-44">(36)</a> <a href="semantics-scripting.html#ref-for-elementdef-canvas-45">(37)</a> <a href="semantics-scripting.html#ref-for-elementdef-canvas-46">(38)</a> <a href="semantics-scripting.html#ref-for-elementdef-canvas-47">(39)</a> <a href="semantics-scripting.html#ref-for-elementdef-canvas-48">(40)</a></span><span><a href="semantics-scripting.html#ref-for-elementdef-canvas-49">4.12.4.1. Proxying canvases to workers</a> <a href="semantics-scripting.html#ref-for-elementdef-canvas-50">(2)</a> <a href="semantics-scripting.html#ref-for-elementdef-canvas-51">(3)</a> <a href="semantics-scripting.html#ref-for-elementdef-canvas-52">(4)</a> <a href="semantics-scripting.html#ref-for-elementdef-canvas-53">(5)</a> <a href="semantics-scripting.html#ref-for-elementdef-canvas-54">(6)</a> <a href="semantics-scripting.html#ref-for-elementdef-canvas-55">(7)</a></span><span><a href="semantics-scripting.html#ref-for-elementdef-canvas-56">4.12.4.2. Color spaces and color correction</a> <a href="semantics-scripting.html#ref-for-elementdef-canvas-57">(2)</a></span><span><a href="semantics-scripting.html#ref-for-elementdef-canvas-58">4.12.4.4. Security with canvas elements</a> <a href="semantics-scripting.html#ref-for-elementdef-canvas-59">(2)</a> <a href="semantics-scripting.html#ref-for-elementdef-canvas-60">(3)</a> <a href="semantics-scripting.html#ref-for-elementdef-canvas-61">(4)</a> <a href="semantics-scripting.html#ref-for-elementdef-canvas-62">(5)</a></span><span><a href="editing.html#ref-for-elementdef-canvas-63">5.1. The hidden attribute</a> <a href="editing.html#ref-for-elementdef-canvas-64">(2)</a></span><span><a href="editing.html#ref-for-elementdef-canvas-65">5.3. Activation</a></span><span><a href="webappapis.html#ref-for-elementdef-canvas-66">7.7. Images</a> <a href="webappapis.html#ref-for-elementdef-canvas-67">(2)</a> <a href="webappapis.html#ref-for-elementdef-canvas-68">(3)</a> <a href="webappapis.html#ref-for-elementdef-canvas-69">(4)</a> <a href="webappapis.html#ref-for-elementdef-canvas-70">(5)</a></span><span><a href="rendering.html#ref-for-elementdef-canvas-71">10.4.1. Embedded content</a> <a href="rendering.html#ref-for-elementdef-canvas-72">(2)</a> <a href="rendering.html#ref-for-elementdef-canvas-73">(3)</a></span><span><a href="fullindex.html#ref-for-elementdef-canvas-74">Elements</a></span><span><a href="fullindex.html#ref-for-elementdef-canvas-75">Element content categories</a> <a href="fullindex.html#ref-for-elementdef-canvas-76">(2)</a> <a href="fullindex.html#ref-for-elementdef-canvas-77">(3)</a> <a href="fullindex.html#ref-for-elementdef-canvas-78">(4)</a></span><span><a href="fullindex.html#ref-for-elementdef-canvas-79">Attributes</a> <a href="fullindex.html#ref-for-elementdef-canvas-80">(2)</a></span><span><a href="fullindex.html#ref-for-elementdef-canvas-81">Element Interfaces</a></span></span></dfn> element</span><a class="self-link" href="semantics-scripting.html#the-canvas-element"></a></h4>
     <dl class="element">
      <dt><a data-link-type="dfn" href="dom.html#categories" id="ref-for-categories-110">Categories</a>:
      <dd><a data-link-type="dfn" href="dom.html#flow-content" id="ref-for-flow-content-149">Flow content</a>.
      <dd><a data-link-type="dfn" href="dom.html#phrasing-content" id="ref-for-phrasing-content-158">Phrasing content</a>.
      <dd><a data-link-type="dfn" href="dom.html#embedded-content" id="ref-for-embedded-content-20">Embedded content</a>.
      <dd><a data-link-type="dfn" href="dom.html#palpable-content" id="ref-for-palpable-content-67">Palpable content</a>.
      <dt><a data-link-type="dfn" href="dom.html#contexts-in-which-this-element-can-be-used" id="ref-for-contexts-in-which-this-element-can-be-used-109">Contexts in which this element can be used</a>:
      <dd>Where <a data-link-type="dfn" href="dom.html#embedded-content" id="ref-for-embedded-content-21">embedded content</a> is expected.
      <dt><a data-link-type="dfn" href="dom.html#content-model" id="ref-for-content-model-110">Content model</a>:
      <dd><a data-link-type="dfn" href="dom.html#transparent" id="ref-for-transparent-15">Transparent</a>.
      <dt><a data-link-type="dfn" href="dom.html#tag-omission-in-text-html" id="ref-for-tag-omission-in-text-html-109">Tag omission in text/html</a>:
      <dd>Neither tag is omissible
      <dt><a data-link-type="dfn" href="dom.html#content-attribute" id="ref-for-content-attribute-111">Content attributes</a>:
      <dd><a data-link-type="dfn" href="dom.html#global-attributes" id="ref-for-global-attributes-110">Global attributes</a>
      <dd><code>width</code> - Horizontal dimension
      <dd><code>height</code> - Vertical dimension
      <dt>Allowed <a href="dom.html#aria-role-attribute">ARIA role attribute</a> values:
      <dd><a href="dom.html#allowed-aria-roles-states-and-properties">Any role value</a>.
      <dt>Allowed <a href="dom.html#state-and-property-attributes">ARIA state and property attributes</a>:
      <dd><a data-link-type="dfn" href="dom.html#global-aria--attributes" id="ref-for-global-aria--attributes-132">Global aria-* attributes</a>
      <dd>Any <code>aria-*</code> attributes <a href="dom.html#allowed-aria-roles-states-and-properties">applicable to the allowed roles</a>.
      <dt><a data-link-type="dfn" href="dom.html#dom-interface" id="ref-for-dom-interface-109">DOM interface</a>:
      <dd>
<pre class="idl def" data-highlight="webidl">typedef (<a data-link-type="idl-name" href="http://www.w3.org/TR/2dcontext/#canvasrenderingcontext2d">CanvasRenderingContext2D</a> or <a data-link-type="idl-name" href="https://www.khronos.org/registry/webgl/specs/1.0/#5.14">WebGLRenderingContext</a>) <dfn class="dfn-paneled idl-code" data-dfn-for="HTMLCanvasElement" data-dfn-type="typedef" data-export="" id="typedefdef-htmlcanvaselement-renderingcontext">RenderingContext<span class="dfn-panel"><b><a href="semantics-scripting.html#typedefdef-htmlcanvaselement-renderingcontext">#typedefdef-htmlcanvaselement-renderingcontext</a></b><b>Referenced in:</b><span><a href="semantics-scripting.html#ref-for-typedefdef-htmlcanvaselement-renderingcontext-1">4.12.4. The canvas element</a> <a href="semantics-scripting.html#ref-for-typedefdef-htmlcanvaselement-renderingcontext-2">(2)</a></span><span><a href="semantics-scripting.html#ref-for-typedefdef-htmlcanvaselement-renderingcontext-3">4.12.4.1. Proxying canvases to workers</a></span></span></dfn>;

interface <dfn class="dfn-paneled idl-code" data-dfn-for="HTMLCanvasElement" data-dfn-type="interface" data-export="" id="htmlcanvaselement-htmlcanvaselement">HTMLCanvasElement<span class="dfn-panel"><b><a href="semantics-scripting.html#htmlcanvaselement-htmlcanvaselement">#htmlcanvaselement-htmlcanvaselement</a></b><b>Referenced in:</b><span><a href="webappapis.html#ref-for-htmlcanvaselement-htmlcanvaselement-1">7.7. Images</a></span><span><a href="fullindex.html#ref-for-htmlcanvaselement-htmlcanvaselement-2">Elements</a></span><span><a href="fullindex.html#ref-for-htmlcanvaselement-htmlcanvaselement-3">Element Interfaces</a></span></span></dfn> : <a data-link-type="idl-name" href="dom.html#htmlelement-htmlelement" id="ref-for-htmlelement-htmlelement-80">HTMLElement</a> {
  attribute unsigned long <a class="idl-code" data-link-type="attribute" data-type="unsigned long " href="semantics-scripting.html#dom-htmlcanvaselement-width" id="ref-for-dom-htmlcanvaselement-width-1">width</a>;
  attribute unsigned long <a class="idl-code" data-link-type="attribute" data-type="unsigned long " href="semantics-scripting.html#dom-htmlcanvaselement-height" id="ref-for-dom-htmlcanvaselement-height-1">height</a>;

  <a data-link-type="idl-name" href="semantics-scripting.html#typedefdef-htmlcanvaselement-renderingcontext" id="ref-for-typedefdef-htmlcanvaselement-renderingcontext-1">RenderingContext</a>? <a class="idl-code" data-link-type="method" href="semantics-scripting.html#dom-htmlcanvaselement-getcontext" id="ref-for-dom-htmlcanvaselement-getcontext-1">getContext</a>(DOMString <dfn class="idl-code" data-dfn-for="HTMLCanvasElement/getContext(contextId, arguments...), HTMLCanvasElement/getContext(contextId, arguments)" data-dfn-type="argument" data-export="" id="dom-htmlcanvaselement-getcontext-contextid-arguments-contextid">contextId<a class="self-link" href="semantics-scripting.html#dom-htmlcanvaselement-getcontext-contextid-arguments-contextid"></a></dfn>, any... <dfn class="idl-code" data-dfn-for="HTMLCanvasElement/getContext(contextId, arguments...), HTMLCanvasElement/getContext(contextId, arguments)" data-dfn-type="argument" data-export="" id="dom-htmlcanvaselement-getcontext-contextid-arguments-arguments">arguments<a class="self-link" href="semantics-scripting.html#dom-htmlcanvaselement-getcontext-contextid-arguments-arguments"></a></dfn>);
  boolean <a class="idl-code" data-link-type="method" href="semantics-scripting.html#dom-htmlcanvaselement-probablysupportscontext" id="ref-for-dom-htmlcanvaselement-probablysupportscontext-1">probablySupportsContext</a>(DOMString <dfn class="idl-code" data-dfn-for="HTMLCanvasElement/probablySupportsContext(contextId, arguments...), HTMLCanvasElement/probablySupportsContext(contextId, arguments)" data-dfn-type="argument" data-export="" id="dom-htmlcanvaselement-probablysupportscontext-contextid-arguments-contextid">contextId<a class="self-link" href="semantics-scripting.html#dom-htmlcanvaselement-probablysupportscontext-contextid-arguments-contextid"></a></dfn>, any... <dfn class="idl-code" data-dfn-for="HTMLCanvasElement/probablySupportsContext(contextId, arguments...), HTMLCanvasElement/probablySupportsContext(contextId, arguments)" data-dfn-type="argument" data-export="" id="dom-htmlcanvaselement-probablysupportscontext-contextid-arguments-arguments">arguments<a class="self-link" href="semantics-scripting.html#dom-htmlcanvaselement-probablysupportscontext-contextid-arguments-arguments"></a></dfn>);

  void <a class="idl-code" data-link-type="method" href="semantics-scripting.html#dom-htmlcanvaselement-setcontext" id="ref-for-dom-htmlcanvaselement-setcontext-1">setContext</a>(<a data-link-type="idl-name" href="semantics-scripting.html#typedefdef-htmlcanvaselement-renderingcontext" id="ref-for-typedefdef-htmlcanvaselement-renderingcontext-2">RenderingContext</a> <dfn class="idl-code" data-dfn-for="HTMLCanvasElement/setContext(context)" data-dfn-type="argument" data-export="" id="dom-htmlcanvaselement-setcontext-context-context">context<a class="self-link" href="semantics-scripting.html#dom-htmlcanvaselement-setcontext-context-context"></a></dfn>);
  <a data-link-type="idl-name" href="semantics-scripting.html#canvasproxy-canvasproxy" id="ref-for-canvasproxy-canvasproxy-3">CanvasProxy</a> <dfn class="idl-code" data-dfn-for="HTMLCanvasElement" data-dfn-type="method" data-export="" data-lt="transferControlToProxy()" id="dom-htmlcanvaselement-transfercontroltoproxy">transferControlToProxy<a class="self-link" href="semantics-scripting.html#dom-htmlcanvaselement-transfercontroltoproxy"></a></dfn>();

  DOMString <dfn class="idl-code" data-dfn-for="HTMLCanvasElement" data-dfn-type="method" data-export="" data-lt="toDataURL(type, arguments...)|toDataURL(type)|toDataURL()" id="dom-htmlcanvaselement-todataurl">toDataURL<a class="self-link" href="semantics-scripting.html#dom-htmlcanvaselement-todataurl"></a></dfn>(optional DOMString <dfn class="idl-code" data-dfn-for="HTMLCanvasElement/toDataURL(type, arguments...), HTMLCanvasElement/toDataURL(type, arguments)" data-dfn-type="argument" data-export="" id="dom-htmlcanvaselement-todataurl-type-arguments-type">type<a class="self-link" href="semantics-scripting.html#dom-htmlcanvaselement-todataurl-type-arguments-type"></a></dfn>, any... <dfn class="idl-code" data-dfn-for="HTMLCanvasElement/toDataURL(type, arguments...), HTMLCanvasElement/toDataURL(type, arguments)" data-dfn-type="argument" data-export="" id="dom-htmlcanvaselement-todataurl-type-arguments-arguments">arguments<a class="self-link" href="semantics-scripting.html#dom-htmlcanvaselement-todataurl-type-arguments-arguments"></a></dfn>);
  void <dfn class="idl-code" data-dfn-for="HTMLCanvasElement" data-dfn-type="method" data-export="" data-lt="toBlob(_callback, type, arguments...)|toBlob(_callback, type)|toBlob(_callback)" id="dom-htmlcanvaselement-toblob">toBlob<a class="self-link" href="semantics-scripting.html#dom-htmlcanvaselement-toblob"></a></dfn>(<a data-link-type="idl-name" href="semantics-scripting.html#callbackdef-htmlcanvaselement-blobcallback" id="ref-for-callbackdef-htmlcanvaselement-blobcallback-1">BlobCallback</a> <dfn class="idl-code" data-dfn-for="HTMLCanvasElement/toBlob(_callback, type, arguments...), HTMLCanvasElement/toBlob(_callback, type, arguments)" data-dfn-type="argument" data-export="" id="dom-htmlcanvaselement-toblob-_callback-type-arguments-_callback">_callback<a class="self-link" href="semantics-scripting.html#dom-htmlcanvaselement-toblob-_callback-type-arguments-_callback"></a></dfn>, optional DOMString <dfn class="idl-code" data-dfn-for="HTMLCanvasElement/toBlob(_callback, type, arguments...), HTMLCanvasElement/toBlob(_callback, type, arguments)" data-dfn-type="argument" data-export="" id="dom-htmlcanvaselement-toblob-_callback-type-arguments-type">type<a class="self-link" href="semantics-scripting.html#dom-htmlcanvaselement-toblob-_callback-type-arguments-type"></a></dfn>, any... <dfn class="idl-code" data-dfn-for="HTMLCanvasElement/toBlob(_callback, type, arguments...), HTMLCanvasElement/toBlob(_callback, type, arguments)" data-dfn-type="argument" data-export="" id="dom-htmlcanvaselement-toblob-_callback-type-arguments-arguments">arguments<a class="self-link" href="semantics-scripting.html#dom-htmlcanvaselement-toblob-_callback-type-arguments-arguments"></a></dfn>);
};

callback <dfn class="dfn-paneled idl-code" data-dfn-for="HTMLCanvasElement" data-dfn-type="callback" data-export="" id="callbackdef-htmlcanvaselement-blobcallback">BlobCallback<span class="dfn-panel"><b><a href="semantics-scripting.html#callbackdef-htmlcanvaselement-blobcallback">#callbackdef-htmlcanvaselement-blobcallback</a></b><b>Referenced in:</b><span><a href="semantics-scripting.html#ref-for-callbackdef-htmlcanvaselement-blobcallback-1">4.12.4. The canvas element</a></span></span></dfn> = void (<a data-link-type="idl-name" href="http://www.w3.org/TR/FileAPI/#dfn-Blob">Blob</a>? <dfn class="idl-code" data-dfn-for="BlobCallback" data-dfn-type="argument" data-export="" id="dom-blobcallback-blob">blob<a class="self-link" href="semantics-scripting.html#dom-blobcallback-blob"></a></dfn>);
</pre>
     </dd></dt></dd></dd></dt></dd></dt></dd></dd></dd></dt></dd></dt></dd></dt></dd></dt></dd></dd></dd></dd></dt></dl>
     <p>The <code><a data-link-type="element" href="semantics-scripting.html#elementdef-canvas" id="ref-for-elementdef-canvas-9">canvas</a></code> element provides scripts with a resolution-dependent bitmap canvas,
  which can be used for rendering graphs, game graphics, art, or other visual images on the fly.</p>
     <p>Authors should not use the <code><a data-link-type="element" href="semantics-scripting.html#elementdef-canvas" id="ref-for-elementdef-canvas-10">canvas</a></code> element in a document when a more suitable
  element is available. For example, it is inappropriate to use a <code><a data-link-type="element" href="semantics-scripting.html#elementdef-canvas" id="ref-for-elementdef-canvas-11">canvas</a></code> element to
  render a page heading: if the desired presentation of the heading is graphically intense, it
  should be marked up using appropriate elements (typically <code>h1</code>) and then styled using
  CSS and supporting technologies such as Web Components.</p>
     <p>When authors use the <code><a data-link-type="element" href="semantics-scripting.html#elementdef-canvas" id="ref-for-elementdef-canvas-12">canvas</a></code> element, they must also provide content that, when
  presented to the user, conveys essentially the same function or purpose as the <code>canvas</code>&apos; bitmap. This content may be placed as content of the <code>canvas</code> element. The contents of the <code><a data-link-type="element" href="semantics-scripting.html#elementdef-canvas" id="ref-for-elementdef-canvas-13">canvas</a></code> element, if any, are the element&#x2019;s <a data-link-type="dfn" href="dom.html#fallback-content" id="ref-for-fallback-content-14">fallback
  content</a>.</p>
     <hr>
     <p>In interactive visual media, if <a data-link-type="dfn" href="webappapis.html#scripting-was-enabled" id="ref-for-scripting-was-enabled-6">scripting is enabled</a> for
  the <code><a data-link-type="element" href="semantics-scripting.html#elementdef-canvas" id="ref-for-elementdef-canvas-14">canvas</a></code> element, and if support for <code><a data-link-type="element" href="semantics-scripting.html#elementdef-canvas" id="ref-for-elementdef-canvas-15">canvas</a></code> elements has been enabled,
  the <code><a data-link-type="element" href="semantics-scripting.html#elementdef-canvas" id="ref-for-elementdef-canvas-16">canvas</a></code> element <a data-link-type="dfn" href="dom.html#represent" id="ref-for-represent-176">represents</a> <a data-link-type="dfn" href="dom.html#embedded-content" id="ref-for-embedded-content-22">embedded content</a> consisting
  of a dynamically created image, the element&#x2019;s bitmap.</p>
     <p>In non-interactive, static, visual media, if the <code><a data-link-type="element" href="semantics-scripting.html#elementdef-canvas" id="ref-for-elementdef-canvas-17">canvas</a></code> element has been
  previously associated with a rendering context (e.g., if the page was viewed in an interactive
  visual medium and is now being printed, or if some script that ran during the page layout process
  painted on the element), then the <code><a data-link-type="element" href="semantics-scripting.html#elementdef-canvas" id="ref-for-elementdef-canvas-18">canvas</a></code> element <a data-link-type="dfn" href="dom.html#represent" id="ref-for-represent-177">represents</a> <a data-link-type="dfn" href="dom.html#embedded-content" id="ref-for-embedded-content-23">embedded content</a> with the element&#x2019;s current bitmap and size. Otherwise, the element
  represents its <a data-link-type="dfn" href="dom.html#fallback-content" id="ref-for-fallback-content-15">fallback content</a> instead.</p>
     <p>In non-visual media, and in visual media if <a data-link-type="dfn" href="webappapis.html#scripting-is-disabled" id="ref-for-scripting-is-disabled-11">scripting is
  disabled</a> for the <code><a data-link-type="element" href="semantics-scripting.html#elementdef-canvas" id="ref-for-elementdef-canvas-19">canvas</a></code> element or if support for <code><a data-link-type="element" href="semantics-scripting.html#elementdef-canvas" id="ref-for-elementdef-canvas-20">canvas</a></code> elements
  has been disabled, the <code><a data-link-type="element" href="semantics-scripting.html#elementdef-canvas" id="ref-for-elementdef-canvas-21">canvas</a></code> element <a data-link-type="dfn" href="dom.html#represent" id="ref-for-represent-178">represents</a> its <a data-link-type="dfn" href="dom.html#fallback-content" id="ref-for-fallback-content-16">fallback
  content</a> instead.</p>
     <p>When a <code><a data-link-type="element" href="semantics-scripting.html#elementdef-canvas" id="ref-for-elementdef-canvas-22">canvas</a></code> element <a data-link-type="dfn" href="dom.html#represent" id="ref-for-represent-179">represents</a> <a data-link-type="dfn" href="dom.html#embedded-content" id="ref-for-embedded-content-24">embedded content</a>, the
  user can still focus descendants of the <code><a data-link-type="element" href="semantics-scripting.html#elementdef-canvas" id="ref-for-elementdef-canvas-23">canvas</a></code> element (in the <a data-link-type="dfn" href="dom.html#fallback-content" id="ref-for-fallback-content-17">fallback
  content</a>). When an element is <a data-link-type="dfn" href="editing.html#focused" id="ref-for-focused-6">focused</a>, it is the target of keyboard interaction
  events (even though the element itself is not visible). This allows authors to make an interactive
  canvas keyboard-accessible: authors should have a one-to-one mapping of interactive regions to <i>focusable areas</i> in the <a data-link-type="dfn" href="dom.html#fallback-content" id="ref-for-fallback-content-18">fallback content</a>. (Focus has no
  effect on mouse interaction events.) <a data-link-type="biblio" href="references.html#biblio-uievents">[UIEVENTS]</a></p>
     <p>An element whose nearest <code><a data-link-type="element" href="semantics-scripting.html#elementdef-canvas" id="ref-for-elementdef-canvas-24">canvas</a></code> element ancestor is <a data-link-type="dfn" href="rendering.html#being-rendered" id="ref-for-being-rendered-12">being rendered</a> and <a data-link-type="dfn" href="dom.html#represent" id="ref-for-represent-180">represents</a> <a data-link-type="dfn" href="dom.html#embedded-content" id="ref-for-embedded-content-25">embedded content</a> is an element that is <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="being-used-as-relevant-canvas-fallback-content">being used as
  relevant canvas fallback content<span class="dfn-panel"><b><a href="semantics-scripting.html#being-used-as-relevant-canvas-fallback-content">#being-used-as-relevant-canvas-fallback-content</a></b><b>Referenced in:</b><span><a href="editing.html#ref-for-being-used-as-relevant-canvas-fallback-content-1">5.4.2. Data model</a></span></span></dfn>.</p>
     <hr>
     <p>The <code><a data-link-type="element" href="semantics-scripting.html#elementdef-canvas" id="ref-for-elementdef-canvas-25">canvas</a></code> element has two attributes to control the size of the element&#x2019;s bitmap: <dfn class="dfn-paneled" data-dfn-for="canvas" data-dfn-type="element-attr" data-export="" id="element-attrdef-canvas-width"><code>width</code><span class="dfn-panel"><b><a href="semantics-scripting.html#element-attrdef-canvas-width">#element-attrdef-canvas-width</a></b><b>Referenced in:</b><span><a href="fullindex.html#ref-for-element-attrdef-canvas-width-1">Elements</a></span></span></dfn> and <dfn class="dfn-paneled" data-dfn-for="canvas" data-dfn-type="element-attr" data-export="" id="element-attrdef-canvas-height"><code>height</code><span class="dfn-panel"><b><a href="semantics-scripting.html#element-attrdef-canvas-height">#element-attrdef-canvas-height</a></b><b>Referenced in:</b><span><a href="fullindex.html#ref-for-element-attrdef-canvas-height-1">Elements</a></span></span></dfn>. These attributes, when specified, must have
  values that are <a data-link-type="dfn" href="infrastructure.html#valid-non-negative-integer" id="ref-for-valid-non-negative-integer-23">valid non-negative integers</a>. <span class="impl">The <a data-link-type="dfn" href="infrastructure.html#parse-that-attributes-value" id="ref-for-parse-that-attributes-value-19">rules for parsing non-negative integers</a> must be used to obtain their
  numeric values. If an attribute is missing, or if parsing its value returns an error, then the
  default value must be used instead.</span> The <code>width</code> attribute defaults to 300, and the <code>height</code> attribute
  defaults to 150.</p>
     <p>The <a data-link-type="dfn" href="infrastructure.html#intrinsic-dimensions" id="ref-for-intrinsic-dimensions-9">intrinsic dimensions</a> of the <code><a data-link-type="element" href="semantics-scripting.html#elementdef-canvas" id="ref-for-elementdef-canvas-26">canvas</a></code> element when it <a data-link-type="dfn" href="dom.html#represent" id="ref-for-represent-181">represents</a> <a data-link-type="dfn" href="dom.html#embedded-content" id="ref-for-embedded-content-26">embedded content</a> are equal to the dimensions of the
  element&#x2019;s bitmap.</p>
     <p>The user agent must use a square pixel density consisting of one pixel of image data per
  coordinate space unit for the bitmaps of a <code>canvas</code> and its rendering contexts.</p>
     <p class="note" role="note"> A <code><a data-link-type="element" href="semantics-scripting.html#elementdef-canvas" id="ref-for-elementdef-canvas-27">canvas</a></code> element can be sized arbitrarily by a style sheet, its
  bitmap is then subject to the <a class="property" data-link-type="propdesc" href="https://drafts.csswg.org/css-images-3/#propdef-object-fit">object-fit</a> CSS property. <a data-link-type="biblio" href="references.html#biblio-css3-images">[CSS3-IMAGES]</a> </p>
     <div class="impl">
      <hr>
      <p>The bitmaps of <code><a data-link-type="element" href="semantics-scripting.html#elementdef-canvas" id="ref-for-elementdef-canvas-28">canvas</a></code> elements, the bitmaps of <code>ImageBitmap</code> objects,
  as well as some of the bitmaps of rendering contexts, such as those described in the section on
  the <code>CanvasRenderingContext2D</code> object below, have an <dfn class="dfn-paneled" data-dfn-for="canvas" data-dfn-type="dfn" data-noexport="" id="canvas-origin-clean">origin-clean<span class="dfn-panel"><b><a href="semantics-scripting.html#canvas-origin-clean">#canvas-origin-clean</a></b><b>Referenced in:</b><span><a href="semantics-scripting.html#ref-for-canvas-origin-clean-1">4.12.4. The canvas element</a> <a href="semantics-scripting.html#ref-for-canvas-origin-clean-2">(2)</a> <a href="semantics-scripting.html#ref-for-canvas-origin-clean-3">(3)</a></span><span><a href="semantics-scripting.html#ref-for-canvas-origin-clean-4">4.12.4.4. Security with canvas elements</a> <a href="semantics-scripting.html#ref-for-canvas-origin-clean-5">(2)</a> <a href="semantics-scripting.html#ref-for-canvas-origin-clean-6">(3)</a> <a href="semantics-scripting.html#ref-for-canvas-origin-clean-7">(4)</a> <a href="semantics-scripting.html#ref-for-canvas-origin-clean-8">(5)</a></span><span><a href="webappapis.html#ref-for-canvas-origin-clean-9">7.7. Images</a> <a href="webappapis.html#ref-for-canvas-origin-clean-10">(2)</a> <a href="webappapis.html#ref-for-canvas-origin-clean-11">(3)</a> <a href="webappapis.html#ref-for-canvas-origin-clean-12">(4)</a> <a href="webappapis.html#ref-for-canvas-origin-clean-13">(5)</a> <a href="webappapis.html#ref-for-canvas-origin-clean-14">(6)</a> <a href="webappapis.html#ref-for-canvas-origin-clean-15">(7)</a> <a href="webappapis.html#ref-for-canvas-origin-clean-16">(8)</a></span></span></dfn> flag, which can be set to true or false.
  Initially, when the <code><a data-link-type="element" href="semantics-scripting.html#elementdef-canvas" id="ref-for-elementdef-canvas-29">canvas</a></code> element or <code>ImageBitmap</code> object is created,
  its bitmap&#x2019;s <a data-link-type="dfn" href="semantics-scripting.html#canvas-origin-clean" id="ref-for-canvas-origin-clean-1">origin-clean</a> flag must be set to
  true.</p>
      <p>A <code>canvas</code> bitmap can also have a hit region list, as described in the <code>CanvasRenderingContext2D</code> section below.</p>
      <p>A <code><a data-link-type="element" href="semantics-scripting.html#elementdef-canvas" id="ref-for-elementdef-canvas-30">canvas</a></code> element can have a rendering context bound to it. Initially, it does not
  have a bound rendering context. To keep track of whether it has a rendering context or not, and
  what kind of rendering context it is, a <code>canvas</code> also has a <dfn class="dfn-paneled" data-dfn-for="canvas" data-dfn-type="mode" data-export="" data-lt="context mode|canvas context mode" id="modedef-canvas-context-mode">canvas context mode<span class="dfn-panel"><b><a href="semantics-scripting.html#modedef-canvas-context-mode">#modedef-canvas-context-mode</a></b><b>Referenced in:</b><span><a href="semantics-scripting.html#ref-for-modedef-canvas-context-mode-1">4.12.4. The canvas element</a> <a href="semantics-scripting.html#ref-for-modedef-canvas-context-mode-2">(2)</a> <a href="semantics-scripting.html#ref-for-modedef-canvas-context-mode-3">(3)</a> <a href="semantics-scripting.html#ref-for-modedef-canvas-context-mode-4">(4)</a> <a href="semantics-scripting.html#ref-for-modedef-canvas-context-mode-5">(5)</a> <a href="semantics-scripting.html#ref-for-modedef-canvas-context-mode-6">(6)</a> <a href="semantics-scripting.html#ref-for-modedef-canvas-context-mode-7">(7)</a></span><span><a href="semantics-scripting.html#ref-for-modedef-canvas-context-mode-8">4.12.4.1. Proxying canvases to workers</a> <a href="semantics-scripting.html#ref-for-modedef-canvas-context-mode-9">(2)</a></span></span></dfn>, which is initially <dfn class="dfn-paneled" data-dfn-for="canvas" data-dfn-type="context" data-export="" id="contextdef-canvas-none">none<span class="dfn-panel"><b><a href="semantics-scripting.html#contextdef-canvas-none">#contextdef-canvas-none</a></b><b>Referenced in:</b><span><a href="semantics-scripting.html#ref-for-contextdef-canvas-none-1">4.12.4. The canvas element</a> <a href="semantics-scripting.html#ref-for-contextdef-canvas-none-2">(2)</a> <a href="semantics-scripting.html#ref-for-contextdef-canvas-none-3">(3)</a></span><span><a href="semantics-scripting.html#ref-for-contextdef-canvas-none-4">4.12.4.1. Proxying canvases to workers</a></span></span></dfn> but can be changed to either <dfn class="dfn-paneled" data-dfn-for="canvas" data-dfn-type="context" data-export="" id="contextdef-canvas-direct-2d">direct-2d<span class="dfn-panel"><b><a href="semantics-scripting.html#contextdef-canvas-direct-2d">#contextdef-canvas-direct-2d</a></b><b>Referenced in:</b><span><a href="semantics-scripting.html#ref-for-contextdef-canvas-direct-2d-1">4.12.4. The canvas element</a> <a href="semantics-scripting.html#ref-for-contextdef-canvas-direct-2d-2">(2)</a> <a href="semantics-scripting.html#ref-for-contextdef-canvas-direct-2d-3">(3)</a></span></span></dfn>, <dfn class="dfn-paneled" data-dfn-for="canvas" data-dfn-type="context" data-export="" id="contextdef-canvas-direct-webgl">direct-webgl<span class="dfn-panel"><b><a href="semantics-scripting.html#contextdef-canvas-direct-webgl">#contextdef-canvas-direct-webgl</a></b><b>Referenced in:</b><span><a href="semantics-scripting.html#ref-for-contextdef-canvas-direct-webgl-1">4.12.4. The canvas element</a> <a href="semantics-scripting.html#ref-for-contextdef-canvas-direct-webgl-2">(2)</a></span></span></dfn>, <dfn class="dfn-paneled" data-dfn-for="canvas" data-dfn-type="context" data-export="" id="contextdef-canvas-indirect">indirect<span class="dfn-panel"><b><a href="semantics-scripting.html#contextdef-canvas-indirect">#contextdef-canvas-indirect</a></b><b>Referenced in:</b><span><a href="semantics-scripting.html#ref-for-contextdef-canvas-indirect-1">4.12.4. The canvas element</a> <a href="semantics-scripting.html#ref-for-contextdef-canvas-indirect-2">(2)</a> <a href="semantics-scripting.html#ref-for-contextdef-canvas-indirect-3">(3)</a></span></span></dfn>, or <dfn class="dfn-paneled" data-dfn-for="canvas" data-dfn-type="context" data-export="" id="contextdef-canvas-proxied">proxied<span class="dfn-panel"><b><a href="semantics-scripting.html#contextdef-canvas-proxied">#contextdef-canvas-proxied</a></b><b>Referenced in:</b><span><a href="semantics-scripting.html#ref-for-contextdef-canvas-proxied-1">4.12.4. The canvas element</a></span><span><a href="semantics-scripting.html#ref-for-contextdef-canvas-proxied-2">4.12.4.1. Proxying canvases to workers</a></span></span></dfn> by algorithms defined in this specification.</p>
      <p>When its <a data-link-type="mode" href="semantics-scripting.html#modedef-canvas-context-mode" id="ref-for-modedef-canvas-context-mode-1">canvas context mode</a> is <a data-link-type="context" href="semantics-scripting.html#contextdef-canvas-none" id="ref-for-contextdef-canvas-none-1">none</a>, a <code><a data-link-type="element" href="semantics-scripting.html#elementdef-canvas" id="ref-for-elementdef-canvas-31">canvas</a></code> element has no rendering context,
  and its bitmap must be fully transparent black with an <a data-link-type="dfn" href="infrastructure.html#css-intrinsic-width" id="ref-for-css-intrinsic-width-15">intrinsic width</a> equal to the numeric value
  of the element&#x2019;s <code>width</code> attribute and an <a data-link-type="dfn" href="infrastructure.html#css-intrinsic-height" id="ref-for-css-intrinsic-height-12">intrinsic height</a> equal to the numeric value of the element&#x2019;s <code>height</code> attribute, those values being interpreted in CSS pixels, and being updated as the attributes are
  set, changed, or removed.</p>
      <p>When a <code><a data-link-type="element" href="semantics-scripting.html#elementdef-canvas" id="ref-for-elementdef-canvas-32">canvas</a></code> element represents <a data-link-type="dfn" href="dom.html#embedded-content" id="ref-for-embedded-content-27">embedded content</a>, it <a data-link-type="dfn" href="infrastructure.html#provides-a-paint-source" id="ref-for-provides-a-paint-source-3">provides
  a paint source</a> whose width is the element&#x2019;s <a data-link-type="dfn" href="infrastructure.html#css-intrinsic-width" id="ref-for-css-intrinsic-width-16">intrinsic width</a>, whose height is
  the element&#x2019;s <a data-link-type="dfn" href="infrastructure.html#css-intrinsic-height" id="ref-for-css-intrinsic-height-13">intrinsic height</a>, and whose appearance is the element&#x2019;s bitmap.</p>
      <p>Whenever the <code>width</code> and <code>height</code> content attributes are set, removed, changed, or
  redundantly set to the value they already have, if the <a data-link-type="mode" href="semantics-scripting.html#modedef-canvas-context-mode" id="ref-for-modedef-canvas-context-mode-2">canvas context mode</a> is <a data-link-type="context" href="semantics-scripting.html#contextdef-canvas-direct-2d" id="ref-for-contextdef-canvas-direct-2d-1">direct-2d</a>, the user agent must set bitmap dimensions to the numeric values of
  the <code>width</code> and <code>height</code> content attributes.</p>
      <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="HTMLCanvasElement" data-dfn-type="attribute" data-export="" id="dom-htmlcanvaselement-width"><code>width</code><span class="dfn-panel"><b><a href="semantics-scripting.html#dom-htmlcanvaselement-width">#dom-htmlcanvaselement-width</a></b><b>Referenced in:</b><span><a href="semantics-scripting.html#ref-for-dom-htmlcanvaselement-width-1">4.12.4. The canvas element</a></span></span></dfn> and <dfn class="dfn-paneled idl-code" data-dfn-for="HTMLCanvasElement" data-dfn-type="attribute" data-export="" id="dom-htmlcanvaselement-height"><code>height</code><span class="dfn-panel"><b><a href="semantics-scripting.html#dom-htmlcanvaselement-height">#dom-htmlcanvaselement-height</a></b><b>Referenced in:</b><span><a href="semantics-scripting.html#ref-for-dom-htmlcanvaselement-height-1">4.12.4. The canvas element</a></span></span></dfn> IDL attributes must <a data-link-type="dfn" href="infrastructure.html#reflection" id="ref-for-reflection-117">reflect</a> the
  respective content attributes of the same name, with the same defaults.</p>
     </div>
     <hr>
     <dl class="domintro">
      <dt><var>context</var> = <var>canvas</var> . <code>getContext</code>(<var>contextId</var> [, ... ] )
      <dd>
       <p>Returns an object that exposes an API for drawing on the canvas. The first argument specifies
    the desired API, either &quot;<code>2d</code>&quot; or &quot;<code>webgl</code>&quot;. Subsequent arguments are handled by that API.</p>
       <p>The list of defined contexts is given on the <a data-link-type="dfn" href="http://wiki.whatwg.org/wiki/CanvasContexts#content">WHATWG Wiki CanvasContexts page</a>. <a data-link-type="biblio" href="references.html#biblio-whatwgwiki">[WHATWGWIKI]</a></p>
       <p>Example contexts are the &quot;<code>2d</code>&quot; <a data-link-type="biblio" href="references.html#biblio-canvas-2d">[CANVAS-2D]</a> and the &quot;<code>webgl</code>&quot; context <a data-link-type="biblio" href="references.html#biblio-webgl">[WEBGL]</a>.</p>
       <p>Returns null if the given context ID is not supported or if the canvas has already been
    initialized with some other (incompatible) context type (e.g., trying to get a &quot;<code>2d</code>&quot; context after getting a &quot;<code>webgl</code>&quot; context).</p>
       <p>Throws an <code>InvalidStateError</code> exception if the <code>setContext()</code> or <code>transferControlToProxy()</code> methods have been
    used.</p>
      <dt><var>supported</var> = <var>canvas</var> . <code>probablySupportsContext</code>(<var>contextId</var> [, ... ] )
      <dd>
       <p>Returns false if calling <code>getContext()</code> with the
    same arguments would definitely return null, and true otherwise.</p>
       <p>This return value is not a guarantee that <code>getContext()</code> will or will not return an object, as
    conditions (e.g., availability of system resources) can vary over time.</p>
       <p>Throws an <code>InvalidStateError</code> exception if the <code>setContext()</code> or <code>transferControlToProxy()</code> methods have been
    used.</p>
      <dt><var>canvas</var> . <code>setContext</code>(<var>context</var>)
      <dd>
       <p>Sets the <code>canvas</code>&apos; rendering context to the given object.</p>
       <p>Throws an <code>InvalidStateError</code> exception if the <code>getContext()</code> or <code>transferControlToProxy()</code> methods have been
    used.</p>
     </dd></dt></dd></dt></dd></dt></dl>
     <div class="impl">
      <p>There are two ways for a <code><a data-link-type="element" href="semantics-scripting.html#elementdef-canvas" id="ref-for-elementdef-canvas-33">canvas</a></code> element to acquire a rendering context: the <code><a data-link-type="element" href="semantics-scripting.html#elementdef-canvas" id="ref-for-elementdef-canvas-34">canvas</a></code> element can provide one via the <code>getContext()</code> method, and one can be assigned to it via the <code>setContext()</code> method. In addition, the whole issue of a
  rendering context can be taken out of the <code><a data-link-type="element" href="semantics-scripting.html#elementdef-canvas" id="ref-for-elementdef-canvas-35">canvas</a></code> element&#x2019;s hands and passed to a <code>CanvasProxy</code> object, which itself can then be assigned a rendering context using its <code>setContext()</code> method.</p>
      <p>These three methods are mutually exclusive; calling any of the three makes the other two start
  throwing <code>InvalidStateError</code> exceptions when called.</p>
      <p>Each rendering context has a <dfn class="dfn-paneled" data-dfn-for="canvas" data-dfn-type="dfn" data-noexport="" id="canvas-context-bitmap-mode">context bitmap
  mode<span class="dfn-panel"><b><a href="semantics-scripting.html#canvas-context-bitmap-mode">#canvas-context-bitmap-mode</a></b><b>Referenced in:</b><span><a href="semantics-scripting.html#ref-for-canvas-context-bitmap-mode-1">4.12.4. The canvas element</a> <a href="semantics-scripting.html#ref-for-canvas-context-bitmap-mode-2">(2)</a> <a href="semantics-scripting.html#ref-for-canvas-context-bitmap-mode-3">(3)</a> <a href="semantics-scripting.html#ref-for-canvas-context-bitmap-mode-4">(4)</a> <a href="semantics-scripting.html#ref-for-canvas-context-bitmap-mode-5">(5)</a> <a href="semantics-scripting.html#ref-for-canvas-context-bitmap-mode-6">(6)</a></span><span><a href="semantics-scripting.html#ref-for-canvas-context-bitmap-mode-7">4.12.4.1. Proxying canvases to workers</a> <a href="semantics-scripting.html#ref-for-canvas-context-bitmap-mode-8">(2)</a> <a href="semantics-scripting.html#ref-for-canvas-context-bitmap-mode-9">(3)</a> <a href="semantics-scripting.html#ref-for-canvas-context-bitmap-mode-10">(4)</a></span></span></dfn>, which is one of <dfn class="dfn-paneled" data-dfn-for="canvas" data-dfn-type="context" data-export="" id="contextdef-canvas-fixed">fixed<span class="dfn-panel"><b><a href="semantics-scripting.html#contextdef-canvas-fixed">#contextdef-canvas-fixed</a></b><b>Referenced in:</b><span><a href="semantics-scripting.html#ref-for-contextdef-canvas-fixed-1">4.12.4. The canvas element</a> <a href="semantics-scripting.html#ref-for-contextdef-canvas-fixed-2">(2)</a> <a href="semantics-scripting.html#ref-for-contextdef-canvas-fixed-3">(3)</a></span><span><a href="semantics-scripting.html#ref-for-contextdef-canvas-fixed-4">4.12.4.1. Proxying canvases to workers</a></span></span></dfn>, <dfn class="dfn-paneled" data-dfn-for="canvas" data-dfn-type="context" data-export="" id="contextdef-canvas-unbound">unbound<span class="dfn-panel"><b><a href="semantics-scripting.html#contextdef-canvas-unbound">#contextdef-canvas-unbound</a></b><b>Referenced in:</b><span><a href="semantics-scripting.html#ref-for-contextdef-canvas-unbound-1">4.12.4. The canvas element</a> <a href="semantics-scripting.html#ref-for-contextdef-canvas-unbound-2">(2)</a></span><span><a href="semantics-scripting.html#ref-for-contextdef-canvas-unbound-3">4.12.4.1. Proxying canvases to workers</a></span></span></dfn>, or <dfn class="dfn-paneled" data-dfn-for="canvas" data-dfn-type="context" data-export="" id="contextdef-canvas-bound">bound<span class="dfn-panel"><b><a href="semantics-scripting.html#contextdef-canvas-bound">#contextdef-canvas-bound</a></b><b>Referenced in:</b><span><a href="semantics-scripting.html#ref-for-contextdef-canvas-bound-1">4.12.4. The canvas element</a> <a href="semantics-scripting.html#ref-for-contextdef-canvas-bound-2">(2)</a></span><span><a href="semantics-scripting.html#ref-for-contextdef-canvas-bound-3">4.12.4.1. Proxying canvases to workers</a> <a href="semantics-scripting.html#ref-for-contextdef-canvas-bound-4">(2)</a></span></span></dfn>.
  Initially, rendering contexts must be in the <a data-link-type="context" href="semantics-scripting.html#contextdef-canvas-unbound" id="ref-for-contextdef-canvas-unbound-1">unbound</a> mode.</p>
      <hr>
      <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="HTMLCanvasElement" data-dfn-type="method" data-export="" data-lt="getContext(contextId, arguments...)|getContext(contextId, arguments)" id="dom-htmlcanvaselement-getcontext"><code>getContext(<var>contextId</var>, <var>arguments...</var>)</code><span class="dfn-panel"><b><a href="semantics-scripting.html#dom-htmlcanvaselement-getcontext">#dom-htmlcanvaselement-getcontext</a></b><b>Referenced in:</b><span><a href="semantics-scripting.html#ref-for-dom-htmlcanvaselement-getcontext-1">4.12.4. The canvas element</a></span></span></dfn> method of the <code><a data-link-type="element" href="semantics-scripting.html#elementdef-canvas" id="ref-for-elementdef-canvas-36">canvas</a></code> element, when invoked,
  must run the steps in the cell of the following table whose column header describes the <code><a data-link-type="element" href="semantics-scripting.html#elementdef-canvas" id="ref-for-elementdef-canvas-37">canvas</a></code> element&#x2019;s <a data-link-type="mode" href="semantics-scripting.html#modedef-canvas-context-mode" id="ref-for-modedef-canvas-context-mode-3">canvas context mode</a> and whose row header describes the method&#x2019;s first argument.</p>
      <table>
       <thead>
        <tr>
         <td>
         <th><a data-link-type="context" href="semantics-scripting.html#contextdef-canvas-none" id="ref-for-contextdef-canvas-none-2">none</a> 
         </th><th><a data-link-type="context" href="semantics-scripting.html#contextdef-canvas-direct-2d" id="ref-for-contextdef-canvas-direct-2d-2">direct-2d</a> 
         </th><th><a data-link-type="context" href="semantics-scripting.html#contextdef-canvas-direct-webgl" id="ref-for-contextdef-canvas-direct-webgl-1">direct-webgl</a> 
         </th><th><a data-link-type="context" href="semantics-scripting.html#contextdef-canvas-indirect" id="ref-for-contextdef-canvas-indirect-1">indirect</a> 
         </th><th><a data-link-type="context" href="semantics-scripting.html#contextdef-canvas-proxied" id="ref-for-contextdef-canvas-proxied-1">proxied</a> 
       <tbody>
        <tr>
         <th>&quot;<dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="2d"><code>2d</code><span class="dfn-panel"><b><a href="semantics-scripting.html#2d">#2d</a></b><b>Referenced in:</b><span><a href="syntax.html#ref-for-2d-1">8.2.8.1. Misnested tags: &lt;b&gt;&lt;i&gt;&lt;/b&gt;&lt;/i&gt;</a> <a href="syntax.html#ref-for-2d-2">(2)</a></span><span><a href="syntax.html#ref-for-2d-3">8.2.8.2. Misnested tags: &lt;b&gt;&lt;p&gt;&lt;/b&gt;&lt;/p&gt;</a> <a href="syntax.html#ref-for-2d-4">(2)</a> <a href="syntax.html#ref-for-2d-5">(3)</a> <a href="syntax.html#ref-for-2d-6">(4)</a> <a href="syntax.html#ref-for-2d-7">(5)</a></span></span></dfn>&quot; 
         </th><td>
          <p>Set the <code><a data-link-type="element" href="semantics-scripting.html#elementdef-canvas" id="ref-for-elementdef-canvas-38">canvas</a></code> element&#x2019;s <a data-link-type="mode" href="semantics-scripting.html#modedef-canvas-context-mode" id="ref-for-modedef-canvas-context-mode-4">context mode</a> to <a data-link-type="context" href="semantics-scripting.html#contextdef-canvas-direct-2d" id="ref-for-contextdef-canvas-direct-2d-3">direct-2d</a>, obtain a <code>CanvasRenderingContext2D</code> object as defined in the HTML Canvas 2D Context
      specification <a data-link-type="biblio" href="references.html#biblio-canvas-2d">[CANVAS-2D]</a>, set the obtained <code>CanvasRenderingContext2D</code> object&#x2019;s <a data-link-type="dfn" href="semantics-scripting.html#canvas-context-bitmap-mode" id="ref-for-canvas-context-bitmap-mode-1">context bitmap mode</a> to <a data-link-type="context" href="semantics-scripting.html#contextdef-canvas-fixed" id="ref-for-contextdef-canvas-fixed-1">fixed</a>, and return the <code>CanvasRenderingContext2D</code> object</p>
         </td><td> Return the same object as was return the last time the method was invoked with this same
      first argument. 
         </td><td> Return null. 
         </td><td> Throw an <code>InvalidStateError</code> exception. 
         </td><td> Throw an <code>InvalidStateError</code> exception. 
        </td></tr><tr>
         <th>&quot;<dfn data-dfn-type="dfn" data-noexport="" id="webgl"><code>webgl</code><a class="self-link" href="semantics-scripting.html#webgl"></a></dfn>&quot;, if the user agent supports the WebGL feature in its current configuration 
         </th><td> Follow the instructions given in the WebGL specification&#x2019;s <i>Context Creation</i> section to
      obtain either a <code>WebGLRenderingContext</code> or null; if the returned value is null,
      then return null and abort these steps, otherwise, set the <code><a data-link-type="element" href="semantics-scripting.html#elementdef-canvas" id="ref-for-elementdef-canvas-39">canvas</a></code> element&#x2019;s <a data-link-type="mode" href="semantics-scripting.html#modedef-canvas-context-mode" id="ref-for-modedef-canvas-context-mode-5">context mode</a> to <a data-link-type="context" href="semantics-scripting.html#contextdef-canvas-direct-webgl" id="ref-for-contextdef-canvas-direct-webgl-2">direct-webgl</a>, set the new <code>WebGLRenderingContext</code> object&#x2019;s <a data-link-type="dfn" href="semantics-scripting.html#canvas-context-bitmap-mode" id="ref-for-canvas-context-bitmap-mode-2">context bitmap mode</a> to <a data-link-type="context" href="semantics-scripting.html#contextdef-canvas-fixed" id="ref-for-contextdef-canvas-fixed-2">fixed</a>, and return the <code>WebGLRenderingContext</code> object&#x2021; <a data-link-type="biblio" href="references.html#biblio-webgl">[WEBGL]</a> 
         </td><td> Return null. 
         </td><td> Return the same object as was return the last time the method was invoked with this same
      first argument. 
         </td><td> Throw an <code>InvalidStateError</code> exception. 
         </td><td> Throw an <code>InvalidStateError</code> exception. 
        </td></tr><tr>
         <th>A vendor-specific extension* 
         </th><td> Behave as defined for the extension. 
         </td><td> Behave as defined for the extension. 
         </td><td> Behave as defined for the extension. 
         </td><td> Throw an <code>InvalidStateError</code> exception. 
         </td><td> Throw an <code>InvalidStateError</code> exception. 
        </td></tr><tr>
         <th>An unsupported value&#x2020; 
         </th><td> Return null. 
         </td><td> Return null. 
         </td><td> Return null. 
         </td><td> Throw an <code>InvalidStateError</code> exception. 
         </td><td> Throw an <code>InvalidStateError</code> exception. 
      </td></tr></tbody></th></td></tr></thead></table>
      <p><small>* Vendors may define experimental contexts using the syntax <code><var>vendorname</var>-<var>context</var></code>, for example, <code>moz-3d</code>.</small></p>
      <p><small>&#x2020; For example, the &quot;<code>webgl</code>&quot; value in the case of a user agent having exhausted the
  graphics hardware&#x2019;s abilities and having no software fallback implementation.</small></p>
      <p><small>&#x2021; The second (and subsequent) argument(s) to the method, if
  any, are ignored in all cases except this one. See the WebGL specification for
  details.</small></p>
      <hr>
      <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="HTMLCanvasElement" data-dfn-type="method" data-export="" data-lt="probablySupportsContext(contextId, arguments...)|probablySupportsContext(contextId, arguments)" id="dom-htmlcanvaselement-probablysupportscontext"><code>probablySupportsContext(<var>contextId</var>, <var>arguments...</var>)</code><span class="dfn-panel"><b><a href="semantics-scripting.html#dom-htmlcanvaselement-probablysupportscontext">#dom-htmlcanvaselement-probablysupportscontext</a></b><b>Referenced in:</b><span><a href="semantics-scripting.html#ref-for-dom-htmlcanvaselement-probablysupportscontext-1">4.12.4. The canvas element</a></span></span></dfn> method of the <code><a data-link-type="element" href="semantics-scripting.html#elementdef-canvas" id="ref-for-elementdef-canvas-40">canvas</a></code> element, when
  invoked, must return false if calling <code>getContext()</code> on
  the same object and with the same arguments would definitely return null at this time, and true
  otherwise.</p>
      <hr>
      <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="HTMLCanvasElement" data-dfn-type="method" data-export="" id="dom-htmlcanvaselement-setcontext"><code>setContext(<var>context</var>)</code><span class="dfn-panel"><b><a href="semantics-scripting.html#dom-htmlcanvaselement-setcontext">#dom-htmlcanvaselement-setcontext</a></b><b>Referenced in:</b><span><a href="semantics-scripting.html#ref-for-dom-htmlcanvaselement-setcontext-1">4.12.4. The canvas element</a></span></span></dfn> method of the <code><a data-link-type="element" href="semantics-scripting.html#elementdef-canvas" id="ref-for-elementdef-canvas-41">canvas</a></code> element, when invoked, must
  run the following steps:</p>
      <ol>
       <li>If the <code><a data-link-type="element" href="semantics-scripting.html#elementdef-canvas" id="ref-for-elementdef-canvas-42">canvas</a></code> element&#x2019;s <a data-link-type="mode" href="semantics-scripting.html#modedef-canvas-context-mode" id="ref-for-modedef-canvas-context-mode-6">canvas context mode</a> is neither <a data-link-type="context" href="semantics-scripting.html#contextdef-canvas-none" id="ref-for-contextdef-canvas-none-3">none</a> nor <a data-link-type="context" href="semantics-scripting.html#contextdef-canvas-indirect" id="ref-for-contextdef-canvas-indirect-2">indirect</a>, throw an <code>InvalidStateError</code> exception and abort these steps.
       </li><li>If <var>context</var>&#x2019;s <a data-link-type="dfn" href="semantics-scripting.html#canvas-context-bitmap-mode" id="ref-for-canvas-context-bitmap-mode-3">context
    bitmap mode</a> is <a data-link-type="context" href="semantics-scripting.html#contextdef-canvas-fixed" id="ref-for-contextdef-canvas-fixed-3">fixed</a>, then throw an <code>InvalidStateError</code> exception and abort these steps.
       </li><li>If <var>context</var>&#x2019;s <a data-link-type="dfn" href="semantics-scripting.html#canvas-context-bitmap-mode" id="ref-for-canvas-context-bitmap-mode-4">context
    bitmap mode</a> is <a data-link-type="context" href="semantics-scripting.html#contextdef-canvas-bound" id="ref-for-contextdef-canvas-bound-1">bound</a>, then run <var>context</var>&#x2019;s unbinding steps and
    set its <var>context</var>&#x2019;s <a data-link-type="dfn" href="semantics-scripting.html#canvas-context-bitmap-mode" id="ref-for-canvas-context-bitmap-mode-5">context
    bitmap mode</a> to <a data-link-type="context" href="semantics-scripting.html#contextdef-canvas-unbound" id="ref-for-contextdef-canvas-unbound-2">unbound</a>.
       </li><li>Run <var>context</var>&#x2019;s binding steps to bind it to this <code><a data-link-type="element" href="semantics-scripting.html#elementdef-canvas" id="ref-for-elementdef-canvas-43">canvas</a></code> element.
       </li><li>Set the <code><a data-link-type="element" href="semantics-scripting.html#elementdef-canvas" id="ref-for-elementdef-canvas-44">canvas</a></code> element&#x2019;s <a data-link-type="mode" href="semantics-scripting.html#modedef-canvas-context-mode" id="ref-for-modedef-canvas-context-mode-7">context mode</a> to <a data-link-type="context" href="semantics-scripting.html#contextdef-canvas-indirect" id="ref-for-contextdef-canvas-indirect-3">indirect</a> and the <var>context</var>&#x2019;s <a data-link-type="dfn" href="semantics-scripting.html#canvas-context-bitmap-mode" id="ref-for-canvas-context-bitmap-mode-6">context bitmap
    mode</a> to <a data-link-type="context" href="semantics-scripting.html#contextdef-canvas-bound" id="ref-for-contextdef-canvas-bound-2">bound</a>.
      </li></ol>
      <hr>
     </div>
     <dl class="domintro">
      <dt><var>url</var> = <var>canvas</var> . <code>toDataURL</code>( [ <var>type</var>, ... ] )
      <dd>
       <p>Returns a <a data-link-type="scheme" href="infrastructure.html#schemedef-data-url" id="ref-for-schemedef-data-url-6"><code>data:</code> URL</a> for the image in the
    canvas.</p>
       <p>The first argument, if provided, controls the type of the image to be returned (e.g., PNG or
    JPEG). The default is <code>image/png</code>; that type is also used if the given type
    isn&#x2019;t supported. The other arguments are specific to the type, and control the way that the
    image is generated, as given in the table below.</p>
       <p>When trying to use types other than &quot;<code>image/png</code>&quot;, authors can check if the image
    was really returned in the requested format by checking to see if the returned string starts
    with one of the exact strings &quot;<code>data:image/png,</code>&quot; or &quot;<code>data:image/png;</code>&quot;. If it does, the image is PNG, and thus the requested type was
    not supported. (The one exception to this is if the canvas has either no height or no width, in
    which case the result might simply be &quot;<code>data:,</code>&quot;.)</p>
      <dt><var>canvas</var> . <code>toBlob</code>(<var>callback</var> [, <var>type</var>, ... ] )
      <dd>
       <p>Creates a <code>Blob</code> object representing a file containing the image in the canvas,
    and invokes a callback with a handle to that object.</p>
       <p>The second argument, if provided, controls the type of the image to be returned (e.g., PNG or
    JPEG). The default is <code>image/png</code>; that type is also used if the given type
    isn&#x2019;t supported. The other arguments are specific to the type, and control the way that the
    image is generated, as given in the table below.</p>
     </dd></dt></dd></dt></dl>
     <div class="impl">
      <p>The <dfn class="css" data-dfn-type="function" data-export="" id="funcdef-todataurl"><code>toDataURL()</code><a class="self-link" href="semantics-scripting.html#funcdef-todataurl"></a></dfn> method must run the
  following steps:</p>
      <ol>
       <li>If the <code><a data-link-type="element" href="semantics-scripting.html#elementdef-canvas" id="ref-for-elementdef-canvas-45">canvas</a></code> element&#x2019;s bitmap&#x2019;s <a data-link-type="dfn" href="semantics-scripting.html#canvas-origin-clean" id="ref-for-canvas-origin-clean-2">origin-clean</a> flag is set to false, throw a <code>SecurityError</code> exception and abort these steps. 
       </li><li>If the <code><a data-link-type="element" href="semantics-scripting.html#elementdef-canvas" id="ref-for-elementdef-canvas-46">canvas</a></code> element&#x2019;s bitmap has no pixels (i.e., either its horizontal
    dimension or its vertical dimension is zero) then return the string &quot;<code>data:,</code>&quot; and abort these steps. (This is the shortest <a data-link-type="scheme" href="infrastructure.html#schemedef-data-url" id="ref-for-schemedef-data-url-7"><code>data:</code> URL</a>; it represents the empty string in a <code>text/plain</code> resource.)
       </li><li>Let <var>file</var> be <a data-link-type="dfn" href="semantics-scripting.html#a-serialization-of-the-canvas-elements-bitmap-as-a-file" id="ref-for-a-serialization-of-the-canvas-elements-bitmap-as-a-file-1">a serialization of the <code>canvas</code> element&#x2019;s bitmap as a file</a>, using the method&#x2019;s
    arguments (if any) as the <var>arguments</var>.
       </li><li>Return a <a data-link-type="scheme" href="infrastructure.html#schemedef-data-url" id="ref-for-schemedef-data-url-8"><code>data:</code> URL</a> representing <var>file</var>. <a data-link-type="biblio" href="references.html#biblio-rfc2397">[RFC2397]</a> 
      </li></ol>
      <p>The <dfn class="css" data-dfn-type="function" data-export="" id="funcdef-toblob"><code>toBlob()</code><a class="self-link" href="semantics-scripting.html#funcdef-toblob"></a></dfn> method must run the following
  steps:</p>
      <ol>
       <li>If the <code><a data-link-type="element" href="semantics-scripting.html#elementdef-canvas" id="ref-for-elementdef-canvas-47">canvas</a></code> element&#x2019;s bitmap&#x2019;s <a data-link-type="dfn" href="semantics-scripting.html#canvas-origin-clean" id="ref-for-canvas-origin-clean-3">origin-clean</a> flag is set to false, throw a <code>SecurityError</code> exception and abort these steps. 
       </li><li>Let <var>callback</var> be the first argument.
       </li><li>Let <var>arguments</var> be the second and subsequent arguments to the method, if
    any.
       </li><li>
        <p>If the <code><a data-link-type="element" href="semantics-scripting.html#elementdef-canvas" id="ref-for-elementdef-canvas-48">canvas</a></code> element&#x2019;s bitmap has no pixels (i.e., either its horizontal
    dimension or its vertical dimension is zero) then let <var>result</var> be null.</p>
        <p>Otherwise, let <var>result</var> be a <code>Blob</code> object representing <a data-link-type="dfn" href="semantics-scripting.html#a-serialization-of-the-canvas-elements-bitmap-as-a-file" id="ref-for-a-serialization-of-the-canvas-elements-bitmap-as-a-file-2">a serialization of the <code>canvas</code> element&#x2019;s
    bitmap as a file</a>, using <var>arguments</var>. <a data-link-type="biblio" href="references.html#biblio-fileapi">[FILEAPI]</a></p>
       </li><li>Return, but continue running these steps <a data-link-type="dfn" href="infrastructure.html#in-parallel" id="ref-for-in-parallel-25">in parallel</a>.
       </li><li><a data-link-type="dfn" href="webappapis.html#queuing" id="ref-for-queuing-127">Queue a task</a> to invoke the <code>BlobCallback</code> <var>callback</var> with <var>result</var> as its argument. The <a data-link-type="dfn" href="webappapis.html#task-source" id="ref-for-task-source-17">task source</a> for this task is the <dfn data-dfn-type="dfn" data-noexport="" id="canvas-blob-serialization-task-source">canvas
    blob serialization task source<a class="self-link" href="semantics-scripting.html#canvas-blob-serialization-task-source"></a></dfn>.
      </li></ol>
     </div>
     <h5 class="heading settled" data-level="4.12.4.1" id="proxying-canvases-to-workers"><span class="secno">4.12.4.1. </span><span class="content">Proxying canvases to workers</span><a class="self-link" href="semantics-scripting.html#proxying-canvases-to-workers"></a></h5>
     <p>Since DOM nodes cannot be accessed across worker boundaries, a proxy object is needed to enable
  workers to render to <code><a data-link-type="element" href="semantics-scripting.html#elementdef-canvas" id="ref-for-elementdef-canvas-49">canvas</a></code> elements in <code>Document</code>s.</p>
<pre class="idl def" data-highlight="webidl">[Exposed=(Window, Worker)]
interface <dfn class="dfn-paneled idl-code" data-dfn-for="CanvasProxy" data-dfn-type="interface" data-export="" id="canvasproxy-canvasproxy">CanvasProxy<span class="dfn-panel"><b><a href="semantics-scripting.html#canvasproxy-canvasproxy">#canvasproxy-canvasproxy</a></b><b>Referenced in:</b><span><a href="infrastructure.html#ref-for-canvasproxy-canvasproxy-1">2.7.5. Transferable objects</a> <a href="infrastructure.html#ref-for-canvasproxy-canvasproxy-2">(2)</a></span><span><a href="semantics-scripting.html#ref-for-canvasproxy-canvasproxy-3">4.12.4. The canvas element</a></span></span></dfn> {
  void <dfn class="idl-code" data-dfn-for="CanvasProxy" data-dfn-type="method" data-export="" data-lt="setContext(context)" id="dom-canvasproxy-setcontext">setContext<a class="self-link" href="semantics-scripting.html#dom-canvasproxy-setcontext"></a></dfn>(<a data-link-type="idl-name" href="semantics-scripting.html#typedefdef-htmlcanvaselement-renderingcontext" id="ref-for-typedefdef-htmlcanvaselement-renderingcontext-3">RenderingContext</a> <dfn class="idl-code" data-dfn-for="CanvasProxy/setContext(context)" data-dfn-type="argument" data-export="" id="dom-canvasproxy-setcontext-context-context">context<a class="self-link" href="semantics-scripting.html#dom-canvasproxy-setcontext-context-context"></a></dfn>);
};
// CanvasProxy implements Transferable;
</pre>
     <dl class="domintro">
      <dt><var>canvasProxy</var> = <var>canvas</var> . <code>transferControlToProxy</code>()
      <dd>
       <p>Returns a <code>CanvasProxy</code> object that can be used to transfer control for this
    canvas over to another document (e.g., an <code>iframe</code> from another <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request-origin">origin</a>)
    or to a worker.</p>
       <p>Throws an <code>InvalidStateError</code> exception if the <code>getContext()</code> or <code>setContext()</code> methods have been used.</p>
      <dt><var>canvasProxy</var> . <code>setContext</code>(<var>context</var>)
      <dd>
       <p>Sets the <code>CanvasProxy</code> object&#x2019;s <code><a data-link-type="element" href="semantics-scripting.html#elementdef-canvas" id="ref-for-elementdef-canvas-50">canvas</a></code> element&#x2019;s rendering context to
    the given object.</p>
       <p>Throws an <code>InvalidStateError</code> exception if the <code>CanvasProxy</code> has been <a data-link-type="dfn" href="infrastructure.html#transfer" id="ref-for-transfer-4">transferred</a>.</p>
     </dd></dt></dd></dt></dl>
     <hr>
     <p>The <dfn class="css" data-dfn-type="function" data-export="" id="funcdef-transfercontroltoproxy"><code>transferControlToProxy()</code><a class="self-link" href="semantics-scripting.html#funcdef-transfercontroltoproxy"></a></dfn> method of the <code><a data-link-type="element" href="semantics-scripting.html#elementdef-canvas" id="ref-for-elementdef-canvas-51">canvas</a></code> element, when invoked, must run the following steps:</p>
     <ol>
      <li>If the <code><a data-link-type="element" href="semantics-scripting.html#elementdef-canvas" id="ref-for-elementdef-canvas-52">canvas</a></code> element&#x2019;s <a data-link-type="mode" href="semantics-scripting.html#modedef-canvas-context-mode" id="ref-for-modedef-canvas-context-mode-8">canvas context mode</a> is not <a data-link-type="context" href="semantics-scripting.html#contextdef-canvas-none" id="ref-for-contextdef-canvas-none-4">none</a>, throw an <code>InvalidStateError</code> exception and abort these steps.
      </li><li>Set the <code><a data-link-type="element" href="semantics-scripting.html#elementdef-canvas" id="ref-for-elementdef-canvas-53">canvas</a></code> element&#x2019;s <a data-link-type="mode" href="semantics-scripting.html#modedef-canvas-context-mode" id="ref-for-modedef-canvas-context-mode-9">context mode</a> to <a data-link-type="context" href="semantics-scripting.html#contextdef-canvas-proxied" id="ref-for-contextdef-canvas-proxied-2">proxied</a>.
      </li><li>Return a <code>CanvasProxy</code> object bound to this <code>canvas</code> element.
     </li></ol>
     <p>A <code>CanvasProxy</code> object can be <a data-link-type="dfn" href="infrastructure.html#neuter" id="ref-for-neuter-3">neutered</a> (like any <code>Transferable</code> object),
  meaning it can no longer be <a data-link-type="dfn" href="infrastructure.html#transfer" id="ref-for-transfer-5">transferred</a>, and
  can be <dfn class="dfn-paneled" data-dfn-for="canvas" data-dfn-type="dfn" data-noexport="" id="canvas-disabled">disabled<span class="dfn-panel"><b><a href="semantics-scripting.html#canvas-disabled">#canvas-disabled</a></b><b>Referenced in:</b><span><a href="semantics-scripting.html#ref-for-canvas-disabled-1">4.12.4.1. Proxying canvases to workers</a></span></span></dfn>, meaning it can no longer be bound
  to rendering contexts. When first created, a <code>CanvasProxy</code> object must be neither.</p>
     <p>A <code>CanvasProxy</code> is created with a link to a <code><a data-link-type="element" href="semantics-scripting.html#elementdef-canvas" id="ref-for-elementdef-canvas-54">canvas</a></code> element. A <code>CanvasProxy</code> object that has not been disabled must have a strong reference to its canvas
  element.</p>
     <p>The <dfn class="css" data-dfn-type="function" data-export="" data-lt="setContext()" id="funcdef-setcontext"><code>setContext(<var>context</var>)</code><a class="self-link" href="semantics-scripting.html#funcdef-setcontext"></a></dfn> method of <code>CanvasProxy</code> objects, when invoked,
  must run the following steps:</p>
     <ol>
      <li>If the <code>CanvasProxy</code> object has been disabled, throw an <code>InvalidStateError</code> exception and abort these steps.
      </li><li>If the <code>CanvasProxy</code> object has not been <a data-link-type="dfn" href="infrastructure.html#neuter" id="ref-for-neuter-4">neutered</a>, then <a data-link-type="dfn" href="infrastructure.html#neuter" id="ref-for-neuter-5">neuter</a> it.
      </li><li>If <var>context</var>&#x2019;s <a data-link-type="dfn" href="semantics-scripting.html#canvas-context-bitmap-mode" id="ref-for-canvas-context-bitmap-mode-7">context
    bitmap mode</a> is <a data-link-type="context" href="semantics-scripting.html#contextdef-canvas-fixed" id="ref-for-contextdef-canvas-fixed-4">fixed</a>, then throw an <code>InvalidStateError</code> exception and abort these steps.
      </li><li>If <var>context</var>&#x2019;s <a data-link-type="dfn" href="semantics-scripting.html#canvas-context-bitmap-mode" id="ref-for-canvas-context-bitmap-mode-8">context
    bitmap mode</a> is <a data-link-type="context" href="semantics-scripting.html#contextdef-canvas-bound" id="ref-for-contextdef-canvas-bound-3">bound</a>, then run <var>context</var>&#x2019;s unbinding steps and
    set its <var>context</var>&#x2019;s <a data-link-type="dfn" href="semantics-scripting.html#canvas-context-bitmap-mode" id="ref-for-canvas-context-bitmap-mode-9">context
    bitmap mode</a> to <a data-link-type="context" href="semantics-scripting.html#contextdef-canvas-unbound" id="ref-for-contextdef-canvas-unbound-3">unbound</a>.
      </li><li>Run <var>context</var>&#x2019;s binding steps to bind it to this <code>CanvasProxy</code> object&#x2019;s <code>canvas</code> element.
      </li><li>Set the <var>context</var>&#x2019;s <a data-link-type="dfn" href="semantics-scripting.html#canvas-context-bitmap-mode" id="ref-for-canvas-context-bitmap-mode-10">context bitmap mode</a> to <a data-link-type="context" href="semantics-scripting.html#contextdef-canvas-bound" id="ref-for-contextdef-canvas-bound-4">bound</a>.
     </li></ol>
     <p>To <a data-link-type="dfn" href="infrastructure.html#transfer" id="ref-for-transfer-6">transfer</a> a <code>CanvasProxy</code> object <var>old</var> to a new owner <var>owner</var>,
  a user agent must create a new <code>CanvasProxy</code> object linked to the same <code><a data-link-type="element" href="semantics-scripting.html#elementdef-canvas" id="ref-for-elementdef-canvas-55">canvas</a></code> element as <var>old</var>, thus obtaining <var>new</var>,
  must <a data-link-type="dfn" href="infrastructure.html#neuter" id="ref-for-neuter-6">neuter</a> and <a data-link-type="dfn" href="semantics-scripting.html#canvas-disabled" id="ref-for-canvas-disabled-1">disable</a> the <var>old</var> object, and must
  finally return <var>new</var>.</p>
     <div class="example" id="example-d46c2f86">
      <a class="self-link" href="semantics-scripting.html#example-d46c2f86"></a> Here is a clock implemented on a worker. First, the main page: 
<pre class="highlight"><span></span><span class="cp">&lt;!DOCTYPE HTML&gt;</span>
<span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>Clock<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">canvas</span><span class="p">&gt;&lt;/</span><span class="nt">canvas</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
  <span class="kd">var</span> <span class="nx">canvas</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="s1">&apos;canvas&apos;</span><span class="p">)[</span><span class="mi">0</span><span class="p">];</span>
  <span class="kd">var</span> <span class="nx">proxy</span> <span class="o">=</span> <span class="nx">canvas</span><span class="p">.</span><span class="nx">transferControlToProxy</span><span class="p">();</span>
  <span class="kd">var</span> <span class="nx">worker</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Worker</span><span class="p">(</span><span class="s1">&apos;clock.js&apos;</span><span class="p">);</span>
  <span class="nx">worker</span><span class="p">.</span><span class="nx">postMessage</span><span class="p">(</span><span class="nx">proxy</span><span class="p">,</span> <span class="p">[</span><span class="nx">proxy</span><span class="p">]);</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span></pre>
      <p>Second, the worker:</p>
<pre class="highlight"><span></span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">context</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">CanvasRenderingContext2D</span><span class="p">();</span>
  <span class="nx">event</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">setContext</span><span class="p">(</span><span class="nx">context</span><span class="p">);</span> <span class="c1">// event.data is the CanvasProxy object</span>
  <span class="nx">setInterval</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">context</span><span class="p">.</span><span class="nx">clearRect</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">context</span><span class="p">.</span><span class="nx">width</span><span class="p">,</span> <span class="nx">context</span><span class="p">.</span><span class="nx">height</span><span class="p">);</span>
    <span class="nx">context</span><span class="p">.</span><span class="nx">fillText</span><span class="p">(</span><span class="k">new</span> <span class="nb">Date</span><span class="p">(),</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">);</span>
    <span class="nx">context</span><span class="p">.</span><span class="nx">commit</span><span class="p">();</span>
  <span class="p">},</span> <span class="mi">1000</span><span class="p">);</span>
<span class="p">};</span></pre>
     </div>
     <div class="impl">
      <h5 class="heading settled" data-level="4.12.4.2" id="color-spaces-and-color-correction"><span class="secno">4.12.4.2. </span><span class="content">Color spaces and color correction</span><a class="self-link" href="semantics-scripting.html#color-spaces-and-color-correction"></a></h5>
      <p>The <code>canvas</code> APIs must perform color correction at only two points: when rendering
  images with their own gamma correction and color space information onto a bitmap, to convert the
  image to the color space used by the bitmaps (e.g., using the 2D Context&#x2019;s <code>drawImage()</code> method with an <code>HTMLImageElement</code> object), and when rendering the actual canvas bitmap to the output device.</p>
      <p class="note" role="note"> Thus, in the 2D context, colors used to draw shapes onto the canvas will exactly
  match colors obtained through the <code>getImageData()</code> method. </p>
      <p>The <code>toDataURL()</code> method must not include color space
  information in the resources they return. Where the output format allows it, the color of pixels
  in resources created by <code>toDataURL()</code> must match those
  returned by the <code>getImageData()</code> method.</p>
      <p>In user agents that support CSS, the color space used by a <code><a data-link-type="element" href="semantics-scripting.html#elementdef-canvas" id="ref-for-elementdef-canvas-56">canvas</a></code> element must
  match the color space used for processing any colors for that element in CSS.</p>
      <p>The gamma correction and color space information of images must be handled in such a way that
  an image rendered directly using an <code><a data-link-type="element" href="semantics-embedded-content.html#elementdef-img" id="ref-for-elementdef-img-139">img</a></code> element would use the same colors as one
  painted on a <code><a data-link-type="element" href="semantics-scripting.html#elementdef-canvas" id="ref-for-elementdef-canvas-57">canvas</a></code> element that is then itself rendered. Furthermore, the rendering
  of images that have no color correction information (such as those returned by the <code>toDataURL()</code> method) must be rendered with no color
  correction.</p>
      <p class="note" role="note"> Thus, in the 2D context, calling the <code>drawImage()</code> method to render the output of the <code>toDataURL()</code> method to the canvas, given the appropriate
  dimensions, has no visible effect. </p>
     </div>
     <div class="impl">
      <h5 class="heading settled" data-level="4.12.4.3" id="serializing-bitmaps-to-a-file"><span class="secno">4.12.4.3. </span><span class="content">Serializing bitmaps to a file</span><a class="self-link" href="semantics-scripting.html#serializing-bitmaps-to-a-file"></a></h5>
      <p>When a user agent is to create <dfn class="dfn-paneled" data-dfn-type="dfn" data-lt="a serialization of the canvas element&#x2019;s bitmap as a file|a serialization of the bitmap as a file" data-noexport="" id="a-serialization-of-the-canvas-elements-bitmap-as-a-file">a serialization of the bitmap as a file<span class="dfn-panel"><b><a href="semantics-scripting.html#a-serialization-of-the-canvas-elements-bitmap-as-a-file">#a-serialization-of-the-canvas-elements-bitmap-as-a-file</a></b><b>Referenced in:</b><span><a href="semantics-scripting.html#ref-for-a-serialization-of-the-canvas-elements-bitmap-as-a-file-1">4.12.4. The canvas element</a> <a href="semantics-scripting.html#ref-for-a-serialization-of-the-canvas-elements-bitmap-as-a-file-2">(2)</a></span></span></dfn>, optionally
  with some given <var>arguments</var>, and optionally with a <var>native</var> flag set, it must
  create an image file in the format given by the first value of <var>arguments</var>, or, if there
  are no <var>arguments</var>, in the PNG format. <a data-link-type="biblio" href="references.html#biblio-png">[PNG]</a></p>
      <p>If the <var>native</var> flag is set, or if the bitmap has one pixel per coordinate space unit,
  then the image file must have the same pixel data (before compression, if applicable) as the
  bitmap, and if the file format used supports encoding resolution metadata, the resolution of that
  bitmap (device pixels per coordinate space units being interpreted as image pixels per CSS pixel)
  must be given as well.</p>
      <p>Otherwise, the image file&#x2019;s pixel data must be the bitmap&#x2019;s pixel data scaled to one image
  pixel per coordinate space unit, and if the file format used supports encoding resolution
  metadata, the resolution must be given as 96dpi (one image pixel per CSS pixel).</p>
      <p>If <var>arguments</var> is not empty, the first value must be interpreted as a <a data-link-type="dfn" href="infrastructure.html#mime-type" id="ref-for-mime-type-29">MIME type</a> giving the format to use. If the type has any parameters, it
  must be treated as not supported.</p>
      <p class="example" id="example-aa03e02c"><a class="self-link" href="semantics-scripting.html#example-aa03e02c"></a>For example, the value &quot;<code>image/png</code>&quot; would mean to generate a PNG
  image, the value &quot;<code>image/jpeg</code>&quot; would mean to generate a JPEG image, and the value
  &quot;<code>image/svg+xml</code>&quot; would mean to generate an SVG image (which would require that the
  user agent track how the bitmap was generated, an unlikely, though potentially awesome,
  feature).</p>
      <p>User agents must support PNG (&quot;<code>image/png</code>&quot;). User agents may support other types.
  If the user agent does not support the requested type, it must create the file using the PNG
  format. <a data-link-type="biblio" href="references.html#biblio-png">[PNG]</a></p>
      <p>User agents must <a data-link-type="dfn" href="infrastructure.html#converting-a-string-to-ascii-lowercase" id="ref-for-converting-a-string-to-ascii-lowercase-3">convert the provided type to ASCII lowercase</a> before establishing if they support that type.</p>
      <p>For image types that do not support an alpha channel, the serialized image must be the bitmap
  image composited onto a solid black background using the source-over operator.</p>
      <p>If the first argument in <var>arguments</var> gives a type corresponding to one of the
  types given in the first column of the following table, and the user agent supports that type,
  then the subsequent arguments, if any, must be treated as described in the second cell of that
  row.</p>
     </div>
     <table id="canvas-serialization-arguments">
      <caption>Arguments for serialization methods</caption>
      <thead>
       <tr>
        <th> Type 
        </th><th> Other arguments 
        </th><th> Reference 
      <tbody>
       <tr>
        <td> <code>image/jpeg</code> 
        </td><td> The second argument<span class="impl">, if it</span> is a number in the range 0.0 to 1.0
      inclusive<span class="impl">, must be</span> treated as the desired quality level. <span class="impl">If it is not a number or is outside that range, the user agent must use its
      default value, as if the argument had been omitted.</span> 
        </td><td> <a data-link-type="biblio" href="references.html#biblio-jpeg">[JPEG]</a> 
     </td></tr></tbody></th></tr></thead></table>
     <div class="impl">
      <p>For the purposes of these rules, an argument is considered to be a number if it is converted to
  an IDL double value by the rules for handling arguments of type <code>any</code> in the
  Web IDL specification. <a data-link-type="biblio" href="references.html#biblio-webidl">[WEBIDL]</a></p>
      <p>Other arguments must be ignored and must not cause the user agent to throw an exception. A
  future version of this specification will probably define other parameters to be passed to these
  methods to allow authors to more carefully control compression settings, image metadata, etc.</p>
     </div>
     <div class="impl">
      <h5 class="heading settled" data-level="4.12.4.4" id="security-with-canvas-elements"><span class="secno">4.12.4.4. </span><span class="content">Security with <code><a data-link-type="element" href="semantics-scripting.html#elementdef-canvas" id="ref-for-elementdef-canvas-58">canvas</a></code> elements</span><a class="self-link" href="semantics-scripting.html#security-with-canvas-elements"></a></h5>
      <p><em>This section is non-normative.</em></p>
      <p><strong>Information leakage</strong> can occur if scripts from one <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request-origin">origin</a> can
  access information (e.g., read pixels) from images from another origin (one that isn&#x2019;t the same).</p>
      <p>To mitigate this, bitmaps used with <code><a data-link-type="element" href="semantics-scripting.html#elementdef-canvas" id="ref-for-elementdef-canvas-59">canvas</a></code> elements and <code>ImageBitmap</code> objects are defined to have a flag indicating whether they are <a data-link-type="dfn" href="semantics-scripting.html#canvas-origin-clean" id="ref-for-canvas-origin-clean-4">origin-clean</a>. All bitmaps start with their <a data-link-type="dfn" href="semantics-scripting.html#canvas-origin-clean" id="ref-for-canvas-origin-clean-5">origin-clean</a> set to true. The flag is set to
  false when cross-origin images or fonts are used.</p>
      <p>The <code>toDataURL()</code>, <code>toBlob()</code>, and <code>getImageData()</code> methods check the flag and will
  throw a <code>SecurityError</code> exception rather than leak cross-origin data.</p>
      <p>The value of the <a data-link-type="dfn" href="semantics-scripting.html#canvas-origin-clean" id="ref-for-canvas-origin-clean-6">origin-clean</a> flag is
  propagated from a source <code><a data-link-type="element" href="semantics-scripting.html#elementdef-canvas" id="ref-for-elementdef-canvas-60">canvas</a></code> element&#x2019;s bitmap to a new <code>ImageBitmap</code> object by <code>createImageBitmap()</code>. Conversely, a
  destination <code><a data-link-type="element" href="semantics-scripting.html#elementdef-canvas" id="ref-for-elementdef-canvas-61">canvas</a></code> element&#x2019;s bitmap will have its <a data-link-type="dfn" href="semantics-scripting.html#canvas-origin-clean" id="ref-for-canvas-origin-clean-7">origin-clean</a> flags set to false by <code>drawImage</code> if the source image is an <code>ImageBitmap</code> object whose bitmap has its <a data-link-type="dfn" href="semantics-scripting.html#canvas-origin-clean" id="ref-for-canvas-origin-clean-8">origin-clean</a> flag set to false.</p>
      <p>The flag can be reset in certain situations; for example, when a <code>CanvasRenderingContext2D</code> is bound to a new <code><a data-link-type="element" href="semantics-scripting.html#elementdef-canvas" id="ref-for-elementdef-canvas-62">canvas</a></code>, the bitmap is cleared
  and its flag reset.</p>
     </div>
    </section></main>
<script src="https://www.w3.org/scripts/TR/2016/fixup.js"></script>
<script>
        document.body.addEventListener("click", function(e) {
            var queryAll = function(sel) { return [].slice.call(document.querySelectorAll(sel)); }
            // Find the dfn element or panel, if any, that was clicked on.
            var el = e.target;
            var target;
            while(el.parentElement) {
                if(el.tagName == "DFN") {
                    target = "dfn";
                    break;
                }
                if(/H\d/.test(el.tagName) && el.getAttribute('data-dfn-type') != null) {
                    target = "dfn";
                    break;
                }
                if(el.classList.contains("dfn-panel")) {
                    target = "dfn-panel";
                    break;
                }
                el = el.parentElement;
            }
            if(target != "dfn-panel") {
                // Turn off any currently "on" or "activated" panels.
                queryAll(".dfn-panel.on, .dfn-panel.activated").forEach(function(el){
                    el.classList.remove("on");
                    el.classList.remove("activated");
                });
            }
            if(target == "dfn") {
                // open the panel
                var dfnPanel = el.querySelector(".dfn-panel");
                if(dfnPanel) {
                    dfnPanel.classList.add("on");
                }
            } else if(target == "dfn-panel") {
                // Switch it to "activated" state, which pins it.
                el.classList.add("activated");
            }

        });
        </script><p class="prev_next">&#x2190; <a href="interactive-elements.html#interactive-elements"><span class="secno">4.11</span> <span class="content">Interactive elements</span></a> &#x2014; <a href="index.html#contents">Table of contents</a> &#x2014; <a href="common-idioms-without-dedicated-elements.html#common-idioms-without-dedicated-elements"><span class="secno">4.13</span> <span class="content">Common idioms without dedicated elements</span></a> &#x2192;</p></body></html>